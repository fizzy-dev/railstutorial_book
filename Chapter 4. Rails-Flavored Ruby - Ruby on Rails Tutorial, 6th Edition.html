<!DOCTYPE html>
<!-- saved from url=(0080)https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml -->
<html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage no-applicationcache svg inlinesvg zoom" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/ruby-on-rails/9780136702726/ch10.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="10224494" data-user-uuid="66943332-5511-462c-876e-5d5b720c7edf" data-username="czjtgu3dkobug4zdmolfga2wembsmu" data-account-type="Trial" data-activated-trial-date="12/02/2020" data-archive="9780136702726" data-publishers="Addison-Wesley Professional" data-htmlfile-name="ch10.xhtml" data-epub-title="Ruby on Rails Tutorial, 6th Edition" data-debug="0" data-testing="0" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="O&#39;Reilly Media"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9780136702726"><link rel="shortcut icon" href="https://www.oreilly.com/favicon.ico"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/css" rel="stylesheet" type="text/css"><title>Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition</title><link rel="stylesheet" href="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/output.731fc84c4f9a.css" type="text/css"><link rel="stylesheet" type="text/css" href="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/annotator.e3b0c44298fc.css"><link rel="stylesheet" href="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/font-awesome.min.css"><style type="text/css" title="ibis-book">@page{margin:1em 2em}#sbo-rt-content div{margin-top:1em;margin-bottom:1em;margin-left:1em;margin-right:1em;text-align:justify}#sbo-rt-content div.cover img{max-width:99%;max-height:99%}#sbo-rt-content .att{text-align:right}#sbo-rt-content .cover{margin-top:.5em;margin-bottom:.5em;text-align:center}#sbo-rt-content .h1{margin-top:1.5em;margin-bottom:.5em;font-weight:bold;font-size:210%;page-break-after:avoid;border-bottom:solid .1em;text-align:center}#sbo-rt-content .halftitle{margin-top:1em;margin-bottom:2em;font-weight:bold;font-size:210%;page-break-after:avoid;text-align:center}#sbo-rt-content .h2{margin-top:1em;margin-bottom:.1em;font-weight:bold;font-size:180%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content .h2f{margin-top:1em;margin-bottom:2.5em;font-weight:bold;font-size:190%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content .h2t{margin-top:1em;margin-bottom:2em;font-weight:bold;font-size:190%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content .center{text-align:center}#sbo-rt-content .h3{margin-top:.5em;margin-bottom:.001em;font-weight:bold;font-size:160%;page-break-after:avoid;text-align:left}#sbo-rt-content .h4{margin-top:.5em;margin-bottom:.001em;font-weight:bold;font-size:130%;page-break-after:avoid;text-align:left}#sbo-rt-content .h5{margin-top:.5em;margin-bottom:.001em;font-weight:bold;font-size:120%;page-break-after:avoid;text-align:left}#sbo-rt-content ul{margin-top:1em;margin-bottom:1em;margin-left:.2em}#sbo-rt-content ul.sq{list-style-type:square}#sbo-rt-content ul.sq li p,#sbo-rt-content ul.sq li p.noindent{margin-top:.5em;margin-left:1em;margin-bottom:.5em;text-indent:.002em}#sbo-rt-content .left{text-align:left}#sbo-rt-content .ex-title{margin-top:.8em;margin-bottom:.5em;text-indent:.1em;font-size:100%}#sbo-rt-content code{font-family:Courier,Courier New,monospace;font-size:small}#sbo-rt-content pre{font-family:Courier,Courier New,monospace;margin-top:.6em;margin-bottom:1em;margin-left:.1em;line-height:1.3em;font-size:small}#sbo-rt-content .pre3{font-family:Courier,Courier New,monospace;margin-top:1em;margin-bottom:1em;margin-left:2.9em;background-color:#E6E6E6}#sbo-rt-content .equ{margin-top:.8em;margin-bottom:.5em;text-align:center}#sbo-rt-content .footnum{margin-top:.7em;margin-bottom:.5em;text-indent:-1em;margin-left:3.3em}#sbo-rt-content .footnotep{margin-top:.8em;margin-left:.8em;margin-bottom:.5em;text-indent:.8em}#sbo-rt-content .mark1{background-color:#F4F7F9}#sbo-rt-content .codelink{margin-top:.2em;margin-bottom:.5em}#sbo-rt-content .middle img{vertical-align:middle}#sbo-rt-content .box{margin-top:.6em;margin-bottom:1em;margin-left:.1em;margin-right:.8em;padding:.8em;background-color:#E6E6E6}#sbo-rt-content .box-bq{font-size:.8em;margin-top:.8em;margin-bottom:.5em;margin-left:1.6em;text-indent:.1em;background-color:#E6E6E6}#sbo-rt-content .boxip{margin-top:.5em;margin-left:.1em;margin-bottom:.5em;text-indent:.8em;background-color:#E6E6E6}#sbo-rt-content ol.num{list-style-type:number;font-weight:normal}#sbo-rt-content ol.num li p{list-style-type:number;font-weight:normal}#sbo-rt-content ol.num li p,#sbo-rt-content ol.num li p.number{margin-top:.5em;margin-left:.2em;margin-bottom:.5em;text-indent:.002em}#sbo-rt-content .num-p{margin-top:.5em;margin-bottom:.5em;margin-left:0}#sbo-rt-content .bullet{margin-top:.7em;margin-bottom:.5em;text-indent:-.8em;margin-left:2em}#sbo-rt-content .credit{margin-top:.1em;margin-bottom:.1em;text-indent:-1.5em;margin-left:2em}#sbo-rt-content .box-caption{margin-top:.1em;margin-bottom:1em;font-size:125%;font-weight:bold;text-indent:.02em;text-align:left}#sbo-rt-content .example{font-family:Courier,Courier New,monospace;margin-top:.6em;margin-bottom:1em;margin-left:.1em;line-height:1.3em;font-size:small;border-top:.02em solid black;border-bottom:.02em solid black}#sbo-rt-content .image-l{margin-top:.8em;margin-left:1em;text-align:center}#sbo-rt-content .topbot{margin-top:.8em;margin-bottom:.5em;border-bottom:solid black .1em;border-top:solid black .1em;text-indent:.1em}#sbo-rt-content .uln{margin-top:.7em;margin-bottom:.7em;margin-left:2em}#sbo-rt-content .fdash{margin-top:.7em;margin-bottom:.7em;margin-left:2em}#sbo-rt-content .fdash1{margin-top:.7em;margin-bottom:.7em;margin-left:3em}#sbo-rt-content .tr{border-bottom:.1em solid black}#sbo-rt-content th{text-align:left}#sbo-rt-content td{padding-left:.1em;padding-top:0;padding-bottom:0;vertical-align:top;text-align:left}#sbo-rt-content .mark{background-color:#E6E6E6}#sbo-rt-content .pre1{font-family:Courier,Courier New,monospace;margin-top:.2em;margin-bottom:1em;margin-left:0;padding:.8em;background-color:#E6E6E6}#sbo-rt-content .pre2{font-family:Courier,Courier New,monospace;margin-top:.2em;margin-bottom:1em;margin-left:.2em}#sbo-rt-content .tab-thc{margin-top:.1em;margin-bottom:.1em;border-bottom:solid black .1em;text-align:center}#sbo-rt-content .tab-th{margin-top:.1em;border-bottom:solid black .1em;border-top:solid black .1em;text-align:left}#sbo-rt-content .author{margin-top:2.5em;margin-bottom:5.5em;text-align:center;font-size:120%}#sbo-rt-content .pub{margin-top:1.5em;margin-bottom:.5em;text-align:center}#sbo-rt-content .pub1{font-weight:bold;font-size:.9em;margin-top:.1em;margin-bottom:.5em;text-align:center}#sbo-rt-content .copy{margin-top:.9em;margin-bottom:.5em;text-indent:.02em}#sbo-rt-content .copy1{margin-top:.9em;margin-bottom:.2em;text-indent:.02em}#sbo-rt-content .copy2{margin-top:.2em;margin-bottom:.5em;text-indent:.02em}#sbo-rt-content .title{margin-top:1em;margin-bottom:.2em;font-size:125%;font-weight:bold;text-indent:.02em;text-align:center}#sbo-rt-content .noindent{margin-top:.5em;margin-bottom:.5em;text-indent:.1em}#sbo-rt-content .tab-para{margin-top:.1em;margin-bottom:.1em;margin-left:.1em;text-indent:0}#sbo-rt-content .tab-parai{margin-top:.1em;margin-bottom:.1em;margin-left:1.1em;text-indent:-1.1em}#sbo-rt-content .boxnp{margin-top:.5em;margin-bottom:.5em;text-indent:.1em}#sbo-rt-content .toc-intro{margin-top:.1em;margin-bottom:.5em;margin-left:1.5em;text-align:left}#sbo-rt-content .tocchap{margin-top:1.5em;margin-bottom:.4em;margin-left:3.4em;text-indent:-4em}#sbo-rt-content .toclev1{margin-top:.4em;margin-bottom:.4em;margin-left:1em}#sbo-rt-content .toclev2{margin-top:.4em;margin-bottom:.4em;margin-left:2.6em}#sbo-rt-content .toclev1a{margin-top:.4em;margin-bottom:.4em;margin-left:.5em}#sbo-rt-content .toc-index{margin-top:2em;margin-bottom:.4em;margin-left:.7em}#sbo-rt-content .indexmain{margin-top:.4em;margin-bottom:.2em;margin-left:.8em;text-indent:-.8em}#sbo-rt-content .indexsub{margin-top:.4em;margin-bottom:.2em;margin-left:1.7em;text-indent:-.7em}#sbo-rt-content .indexsubsub{margin-top:.4em;margin-bottom:.2em;font-style:italic;margin-left:3em;text-indent:-.9em}#sbo-rt-content figcaption{margin-top:.8em;margin-bottom:.5em;color:black;text-align:left;text-indent:.1em}#sbo-rt-content .subtitle{margin-top:.1em;margin-bottom:1em;font-weight:bold;font-size:150%;page-break-after:avoid;text-align:center}#sbo-rt-content .edition{margin-top:2em;margin-bottom:3em;font-weight:bold;font-size:150%;page-break-after:avoid;text-align:center}#sbo-rt-content .indent{margin-top:.5em;margin-left:.1em;margin-bottom:.5em;text-indent:1.5em}#sbo-rt-content .h2a{margin-top:.1em;margin-bottom:2em;font-weight:bold;font-size:190%;page-break-after:avoid;text-align:left}#sbo-rt-content figure>img{max-width:99%;max-height:99%}#sbo-rt-content figure{margin-top:1em;margin-bottom:1em;margin-left:.5em;margin-right:1.5em}#sbo-rt-content none{list-style-type:none}#sbo-rt-content a{text-decoration:none}#sbo-rt-content .footnote{font-size:.8em;margin-top:.1em;margin-bottom:.5em;margin-left:.8em}#sbo-rt-content .none{margin-top:.5em;margin-left:1em;margin-bottom:.5em;list-style-type:none}#sbo-rt-content div.image-p img{width:80%}#sbo-rt-content .image-p{page-break-before:always;text-align:center}#sbo-rt-content table{border-collapse:collapse;border-spacing:0;background:transparent;vertical-align:top;margin-top:.1em;margin-right:.1em;margin-bottom:.9em;margin-left:0;width:100%}#sbo-rt-content .tab-parar{margin-top:.1em;margin-bottom:.1em;text-indent:.1em;text-align:right}#sbo-rt-content .h2i{margin-top:1em;margin-bottom:2.1em;font-weight:bold;font-size:190%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content pre{overflow:auto;-ms-overflow:auto;-moz-overflow:auto;-webkit-overflow:auto;-ms-padding-bottom:5pt;-moz-padding-bottom:5pt;-webkit-padding-bottom:5pt}#sbo-rt-content .maroon{color:#BB2121}#sbo-rt-content .green{color:#005A00}#sbo-rt-content .green1{color:#48785D}#sbo-rt-content .navy{color:#504B72}#sbo-rt-content .ash{color:#666}#sbo-rt-content .blue{color:#408080}#sbo-rt-content .green3{color:#00A100}#sbo-rt-content .blue1{color:#0000B8}#sbo-rt-content .violet{color:#1A177D}#sbo-rt-content .pink{color:#A131A1}#sbo-rt-content .pink1{color:#A131A1}#sbo-rt-content .red{color:#800}#sbo-rt-content .blue3{color:#2E3192}#sbo-rt-content .red2{color:#B80000}#sbo-rt-content .green4{color:#269200}#sbo-rt-content .ash1{color:#666}#sbo-rt-content .ash2{color:#33484A}#sbo-rt-content .red2{color:#640000}#sbo-rt-content .ash3{color:#7D8F29}#sbo-rt-content .red5{color:#BD7B00}#sbo-rt-content .maroon1{color:#B66600}#sbo-rt-content .blue5{color:#1F3BFF}#sbo-rt-content .red6{color:#B68}#sbo-rt-content .green7{color:#14B600}#sbo-rt-content .maroon2{color:#B66600}#sbo-rt-content .pink2{color:#AC21FF}#sbo-rt-content .pink3{color:#AC21FF}#sbo-rt-content .lighgreen{color:#5FA100}#sbo-rt-content .lighblue{color:#269271}#sbo-rt-content .darkmaroon{color:#269271}#sbo-rt-content .maroon5{color:#A10000}#sbo-rt-content .blue6{color:#0000B9}#sbo-rt-content .marko{background-color:#FAF9CE}#sbo-rt-content .green5{color:#1C8B43}#sbo-rt-content .colork1{color:#136433;font-weight:bold}#sbo-rt-content .colork2{color:#504C72}#sbo-rt-content .colork3{color:#51785D}#sbo-rt-content .colork4{color:#303192}#sbo-rt-content .colork5{color:#955744}#sbo-rt-content .colork6{color:#5C70BA}#sbo-rt-content .colork7{color:#487864}#sbo-rt-content .colork8{color:#5C5778}#sbo-rt-content .colork9{color:#666}#sbo-rt-content .colork10{color:#48785D}#sbo-rt-content .colork11{color:#BC654D}#sbo-rt-content .colork12{color:#3E8185}#sbo-rt-content .colork13{color:#C62425}#sbo-rt-content .colork14{color:#1D8C43}#sbo-rt-content .colork15{color:#0D8140}#sbo-rt-content .colork16{color:#BB2425}#sbo-rt-content .colork17{color:#985744}#sbo-rt-content .colork18{color:#6C8896}#sbo-rt-content .colork19{color:#2A2C80}#sbo-rt-content .colork20{color:#BD2425}#sbo-rt-content .redk1{color:#EE1C25}#sbo-rt-content .colork21{color:#2A2C77}#sbo-rt-content .colork22{color:#955744}#sbo-rt-content .colork23{color:#BC6561}#sbo-rt-content .colork24{color:#BE7D2B}#sbo-rt-content .colork25{color:#8E7C5D}#sbo-rt-content .colork26{color:#7C5778}#sbo-rt-content .colork27{color:#9D1C1F}#sbo-rt-content .colork28{color:#AA5744}#sbo-rt-content .colork29{color:#C59861}#sbo-rt-content .grayk1{color:#C0908E}#sbo-rt-content .pd_green{color:#48785d}#sbo-rt-content .dark-green{color:#146333}#sbo-rt-content .mark1{background-color:#faf9ce}#sbo-rt-content .mark{background-color:#faf9ce}#sbo-rt-content .pd_ash{color:#666}#sbo-rt-content .pd_blue7{color:#6c8896}#sbo-rt-content .pd_blue1{color:#504b72}#sbo-rt-content .pd_red{color:#965744}#sbo-rt-content .pd_red2{color:#bb654e}#sbo-rt-content .pd_red5{color:#ed1c24}#sbo-rt-content .pd_blue5{color:#2e3192}#sbo-rt-content .pd_green4{color:#269200}#sbo-rt-content .pd_green5{color:#1c8b43}#sbo-rt-content .pd_blue3{color:#2c2c78}#sbo-rt-content .pd_orange{color:#c49847}</style><script type="text/javascript" async="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/cool-2.1.15.min.js.download"></script><script type="text/javascript" async="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/ec.js.download"></script><script type="text/javascript" async="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/analytics.js.download"></script><script type="text/javascript" async="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/f.txt"></script><script type="text/javascript" async="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/js"></script><script crossorigin="anonymous" integrity="sha256-NiDMmov61Y536X/eLXLiDGzFVFmNLtPyu4b5aFB54ks=" type="text/javascript" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/appcues.main.11e38ef4746fd64ab30c11794299d10b30bcb704.js.download" async=""></script><script async="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/gtm.js.download"></script><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9780136702726/chapter/ch10.xhtml",
          "book_id": "9780136702726",
          "chapter_uri": "ch10.xhtml",
          "position": 27.4567491080775,
          "user_uuid": "66943332-5511-462c-876e-5d5b720c7edf",
          "next_chapter_uri": "/library/view/ruby-on-rails/9780136702726/ch11.xhtml"
        
      },
      title: "Ruby on Rails Tutorial, 6th Edition",
      author_list: "Michael Hartl",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: true
    };
    // ]]></script><script src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/modernizr.8e35451ddb64.js.download"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><meta name="description" content=" Chapter 10 Updating, Showing, and Deleting Users In this chapter, we complete the REST actions for the Users resource (Table 7.1) by adding edit, update, index ... "><meta property="og:title" content="Chapter 10. Updating, Showing, and Deleting Users"><meta itemprop="isPartOf" content="/library/view/ruby-on-rails/9780136702726/"><meta itemprop="name" content="Chapter 10. Updating, Showing, and Deleting Users"><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9780136702726/"><meta property="og:description" itemprop="description" content=" Chapter 10 Updating, Showing, and Deleting Users In this chapter, we complete the REST actions for the Users resource (Table 7.1) by adding edit, update, index ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Addison-Wesley Professional"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9780136702726"><meta property="og:book:author" itemprop="author" content="Michael Hartl"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@OReillyMedia"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = '66943332-5511-462c-876e-5d5b720c7edf';
      dataLayer.push({userIdentifier: '66943332-5511-462c-876e-5d5b720c7edf'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = 'ba5f3401-307d-4b66-90a6-a97047c63525';
        

        window.medalliaVsgIsIndividual = true;
        
          
          dataLayer.push({learningAccountType: 'free trial'});
          
        

        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/vendor.3eecedff6f59.js.download"></script><script defer="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/reader.772cf1e31d6c.js.download"></script><iframe src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/saved_resource.html"></iframe><iframe src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(3).html"></iframe><iframe src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(4).html"></iframe><link rel="stylesheet" type="text/css" integrity="sha256-q9sKb2HpA5fJjN1cK9LjLaEXff5ix81Rv1Y3xJFptPE=" crossorigin="anonymous" href="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/container.11e38ef4746fd64ab30c11794299d10b30bcb704.css"><iframe src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(5).html"></iframe><script src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/f(1).txt"></script><script async="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/MathJax.js.download"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
</style><style type="text/css" id="kampyleStyle">.noOutline{outline: none !important;}.wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}</style></head>


<body class="reading sidenav  scalefonts subscribe-panel library nav-collapsed"><div id="MathJax_Message" style="display: none;"></div>

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="working hide" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  


<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li><a href="https://learning.oreilly.com/home/" class="l0 nav-icn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z"></path></svg><span>Home</span></a></li><li class="search"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M8,8 C6.34321755,8 5.00013,6.65691245 5.00013,5.00013 C5.00013,3.34334755 6.34321755,2.00026001 8,2.00026001 C9.65678245,2.00026001 10.99987,3.34334755 10.99987,5.00013 C10.99987,6.65691245 9.65678245,8 8,8 Z M2.33024571,11.3523547 L2.33774538,11.3523547 C3.7622187,9.70968996 5.82947484,8.76608166 8.00374984,8.76608166 C10.1780248,8.76608166 12.245281,9.70968996 13.6697543,11.3523547 C13.8892083,11.6177474 14.0062813,11.9530021 13.99974,12.2973138 L13.99974,13.99974 L2.00026001,13.99974 L2.00026001,12.2973138 C1.99371867,11.9530021 2.11079172,11.6177474 2.33024571,11.3523547 Z" id="path-1"></path></svg><span>Your O'Reilly</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/profile/" class="l2 nav-icn"><span>Profile</span></a></li><li><a href="https://learning.oreilly.com/history/" class="l2 nav-icn"><span>History</span></a></li><li><a href="https://learning.oreilly.com/playlists/" class="l2 nav-icn"><span>Playlists</span></a></li><li><a href="https://learning.oreilly.com/u/66943332-5511-462c-876e-5d5b720c7edf/" class="l2 nav-icn"><span>Highlights</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Featured</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/featured/navigating-21st-century/" class="l2 nav-icn"><span>Navigating Change</span></a></li><li><a href="https://learning.oreilly.com/recommendations/" class="l2 nav-icn"><span>Recommended</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"></path></g></svg><span>Explore</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/topics/" class="l2 nav-icn"><span>All Topics</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;sort=publication_date&amp;facet_json=true&amp;page=0" class="l2 nav-icn"><span>Early Releases</span></a></li><li><a href="https://learning.oreilly.com/playlists/discover/" class="l2 nav-icn"><span>Shared Playlists</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;formats=case%20study&amp;formats=learning%20path&amp;formats=live%20online%20training&amp;formats=notebook&amp;formats=oriole&amp;formats=video&amp;sort=popularity&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Most Popular Titles</span></a></li><li><a href="https://learning.oreilly.com/resource-centers/" class="l2 nav-icn"><span>Resource Centers</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M12.8 3.2A1.2 1.2 0 0 1 14 4.4v8.4a1.2 1.2 0 0 1-1.2 1.2H3.2A1.2 1.2 0 0 1 2 12.8V4.4a1.2 1.2 0 0 1 1.2-1.2h1.2V2h1.2v1.2h4.8V2h1.2v1.2h1.2zm-9.6 9.6h9.6V6.2H3.2v6.6zM8 9.5a1.35 1.35 0 1 1 0-2.7 1.35 1.35 0 0 1 0 2.7zm2.7 2.148v.552H5.3v-.552c0-.321.124-.634.355-.858a3.358 3.358 0 0 1 4.69 0c.23.224.355.537.355.858z"></path></svg><span>Attend</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/live-training/" class="l2 nav-icn"><span>Live Trainings</span></a></li><li><a href="https://learning.oreilly.com/featured/architectural-katas" class="l2 nav-icn"><span>Architectural Katas</span></a></li><li><a href="https://learning.oreilly.com/featured/strata/" class="l2 nav-icn"><span>Strata</span></a></li><li><a href="https://learning.oreilly.com/featured/oscon/" class="l2 nav-icn"><span>Open Source</span></a></li><li><a href="https://learning.oreilly.com/featured/infrastructure-ops/" class="l2 nav-icn"><span>Infra &amp; Ops</span></a></li><li><a href="https://learning.oreilly.com/featured/software-architecture/" class="l2 nav-icn"><span>Software Arch</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="l1 nav-icn "><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.6467109,4.35328907 L14.7964612,7.51003884 C15.0678463,7.78304342 15.0678463,8.22395603 14.7964612,8.49696061 L11.6467109,11.6467109 L10.6597892,10.6597892 L13.3055794,8 L10.6597892,5.34021084 L11.6467109,4.35328907 Z M4.35328907,11.6467109 L1.20353875,8.48996116 C0.932153749,8.21695658 0.932153749,7.77604397 1.20353875,7.50303939 L4.35328907,4.35328907 L5.34021084,5.34021084 L2.69442057,8 L5.34021084,10.6597892 L4.35328907,11.6467109 Z M5.84417089,11.4997226 L8.67194674,4.50027742 L10.1838269,4.50027742 L7.35605105,11.4997226 L5.84417089,11.4997226 Z" id="Mask"></path></svg><span>Interact</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/?classification=content-scenario" class="l2 nav-icn"><span>Scenarios</span></a></li><li><a href="https://learning.oreilly.com/scenarios/?classification=sandbox-scenario" class="l2 nav-icn"><span>Sandboxes</span></a></li><li><a href="https://learning.oreilly.com/interactive/?classification=jupyter-notebook" class="l2 nav-icn"><span>Jupyter Notebooks</span></a></li></ul></li><li><a href="https://learning.oreilly.com/answers/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M2.31032699,3.75609006 C4.65421571,1.41371359 8.45302454,1.41472092 10.7955702,3.75860838 C13.1381158,6.10249583 13.1369405,9.90130261 10.7930518,12.243847 C8.44916311,14.5863913 4.65018639,14.5852161 2.30780867,12.2413286 C-0.0346204845,9.89749489 -0.0334929936,6.09853298 2.31032699,3.75609006 Z M8.8198605,4.98016308 C7.34193969,3.86924672 5.23410194,3.98609692 3.88914868,5.33104946 C3.12814393,6.09032122 2.72818176,7.13880077 2.79015179,8.21201133 C2.79115912,8.23064692 2.79233434,8.24928252 2.79350956,8.26791811 L2.79350956,8.26791811 C2.83179539,8.8307976 2.9944077,9.37404287 3.26947292,9.86201677 L3.26947292,9.86201677 L2.77621706,11.7027432 C2.7699968,11.7259241 2.77662063,11.7506624 2.79359185,11.7676337 C2.8105631,11.7846049 2.83530144,11.7912287 2.85848233,11.7850085 L2.85848233,11.7850085 L4.69400524,11.2922565 C5.26306363,11.6167344 5.90703177,11.786885 6.56209849,11.7858479 C8.64827865,11.7858479 10.3395879,10.094542 10.3395879,8.00836292 C10.3405204,6.84135608 9.80105674,5.73967784 8.87862141,5.02482134 L8.87862141,5.02482134 L8.82825492,4.98654283 Z M13.7933062,2 C14.7073496,2.00009863 15.4482759,2.74110484 15.4482759,3.65514822 C15.4482759,4.32460943 15.0449926,4.92814782 14.4264842,5.18432286 C13.8079757,5.44049789 13.096053,5.29885769 12.6226979,4.82545158 C12.1493429,4.35204547 12.0077795,3.64010743 12.2640213,3.02162665 C12.5202631,2.40314587 13.123845,1.99992776 13.7933062,2 Z"></path></svg><span>Answers</span></a></li><li><a href="https://learning.oreilly.com/certifications/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M12.912 9.18L14 8.014l-1.088-1.18a.304.304 0 01-.075-.268L13.195 5l-1.535-.463a.313.313 0 01-.194-.194l-.462-1.537-1.565.358c-.09.03-.194 0-.269-.074L8.007 2 6.845 3.09a.303.303 0 01-.269.074l-1.565-.358-.462 1.537a.313.313 0 01-.194.194L2.82 5l.358 1.567a.26.26 0 01-.075.269L2 8.015l1.088 1.164c.075.075.09.18.075.269l-.358 1.567 1.535.463c.09.03.164.104.194.194l.462 1.537 1.565-.358c.015 0 .045-.015.075-.015.075 0 .15.03.209.074L8.007 14l1.163-1.09a.303.303 0 01.269-.074l1.565.358.462-1.537a.313.313 0 01.194-.194L13.195 11l-.358-1.567a.338.338 0 01.075-.254zm-6.046 1.37L4.41 8.26l1.16-1.244 1.767 1.649L10.4 5.6l1.202 1.202-4.242 4.243-.495-.495z"></path></svg><span>Certifications</span></a></li><li><a href="https://learning.oreilly.com/preferences/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://learning.oreilly.com/public/support/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.363 6.656a2.692 2.692 0 0 1-2.681-2.703c0-1.493 1.2-2.703 2.681-2.703a2.692 2.692 0 0 1 2.682 2.703c0 1.493-1.2 2.703-2.682 2.703zm4.023 2.027c-1.852 0-3.352 1.513-3.352 3.379H2v-1.534c-.006-.31.099-.612.295-.852a6.666 6.666 0 0 1 9.09-.993zm-.543.676h1.12v.304c.003.284.16.543.408.676a.766.766 0 0 0 .77 0l.303-.176.556.966-.302.176a.772.772 0 0 0-.362.676v.08a.772.772 0 0 0 .362.677l.302.21-.556.965-.302-.175a.766.766 0 0 0-.771 0 .778.778 0 0 0-.409.675v.352h-1.106v-.372a.778.778 0 0 0-.409-.676.766.766 0 0 0-.77 0l-.303.176-.556-.912.302-.176a.772.772 0 0 0 .362-.676v-.04-.04a.772.772 0 0 0-.362-.676l-.302-.176.556-.966.289.155a.766.766 0 0 0 .77 0 .778.778 0 0 0 .41-.676V9.36zm1.562 2.703c0-.271-.108-.531-.3-.722a1.001 1.001 0 0 0-.72-.292 1.01 1.01 0 0 0-.992 1.023 1.01 1.01 0 0 0 1.01 1.004 1.01 1.01 0 0 0 1.002-1.013z"></path></svg><span>Support</span></a></li><li><a href="https://get.oreilly.com/email-signup.html" class="l1 nav-icn " target="&quot;_blank&quot;"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Newsletters</span></a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.613 12.63A.607.607 0 0 1 2 12.03V3.602C2 3.269 2.274 3 2.613 3h5.515v1.204H3.226v7.223h4.902v1.203H2.613zM5.677 9.02V6.611h4.903V4.926a.301.301 0 0 1 .19-.274.31.31 0 0 1 .33.063l2.722 2.673a.594.594 0 0 1 0 .849L11.1 10.909a.31.31 0 0 1-.331.063.301.301 0 0 1-.19-.274V9.02H5.677z"></path></svg><span>Sign Out</span></a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Ruby on Rails Tutorial, 6th Edition
      
    </h1></span></a><div class="toc-contents" style="max-height: 0px;">
  <div class="sbo-toc">
    <button type="button" class="sbo-toc-thumb close"><div class="visuallyhidden">Close</div></button>
      <section class="ios-app-teaser">
        <ul>
            <li><a class="js-toc-link toc-link" href="https://itunes.apple.com/gb/app/safari-queue-library-over/id881697395?mt=8" role="button">Install App</a></li>
            <li><a class="js-toc-link toc-link" href="safaridetail://9780136702726" role="button">Open in App</a></li>
        </ul>
      </section>
      <div class="sbo-book-meta">
        
        <span class="cover">
         <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/">
          <img src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/saved_resource" alt="Cover image for Ruby on Rails Tutorial, 6th Edition" height="184" width="141">
        </a>
        </span>
        <span class="title">
          
            
                <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/publisher/addison-wesley-professional/">
                  <img src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/addison-wesley.png" class="publisher-logo video" alt="publisher logo">
                </a>
            
          

          <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/">Ruby on Rails Tutorial, 6th Edition</a>
        </span>
        
        <span class="authors">by Michael Hartl</span>
        

        
        <span class="publishers t-publishers">Published by
          <!-- Show publisher page link if publisher pages switch is on -->
          
            <a class="t-publisher-link toc-link js-toc-link" href="https://learning.oreilly.com/library/publisher/addison-wesley-professional/">
              Addison-Wesley Professional</a>, 2020
          
        </span>
        

    

    </div>
  <ol class="tocList">
    
    
    
     

     <li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/cover.xhtml">
        Cover Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref00.xhtml">
        About This eBook <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/halftitle.xhtml">
        Halftitle Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/title.xhtml">
        Title Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/copy.xhtml">
        Copyright Page <span class="minutes">(02:18 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/toc.xhtml#toc">
        Contents <span class="minutes">(05:45 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref02.xhtml#pref02">
        Foreword <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref03.xhtml#pref03">
        Acknowledgments <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref04.xhtml#pref04">
        About the Author <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01">
        Chapter 1. From Zero to Deploy <span class="minutes">(77:03 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">
        Chapter 2. A Toy App <span class="minutes">(50:36 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03">
        Chapter 3. Mostly Static Pages <span class="minutes">(63:15 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04">
        Chapter 4. Rails-Flavored Ruby <span class="minutes">(57:30 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch05.xhtml#ch05">
        Chapter 5. Filling in the Layout <span class="minutes">(60:57 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">
        Chapter 6. Modeling Users <span class="minutes">(67:51 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#ch07">
        Chapter 7. Sign Up <span class="minutes">(79:21 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch08.xhtml#ch08">
        Chapter 8. Basic Login <span class="minutes">(66:42 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch09.xhtml#ch09">
        Chapter 9. Advanced Login <span class="minutes">(52:54 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1 currently-reading">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml#ch10">
        Chapter 10. Updating, Showing, and Deleting Users <span class="minutes">(73:36 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch11.xhtml#ch11">
        Chapter 11. Account Activation <span class="minutes">(55:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch12.xhtml#ch12">
        Chapter 12. Password Reset <span class="minutes">(48:18 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch13.xhtml#ch13">
        Chapter 13. User Microposts <span class="minutes">(106:57 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch14.xhtml#ch14">
        Chapter 14. Following Users <span class="minutes">(78:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/index.xhtml#index">
        Index <span class="minutes">(55:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/credits.xhtml#credits">
        Credits <span class="minutes">(19:33 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01_images.xhtml#ch01_images">
        Code Snippets <span class="minutes">(09:12 mins)</span>
       </a>
      
        
      
   </li></ol>
 </div>



</div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" title="Search in archive" class="js-search-controls search-controls" onclick="window.Appcues.track(&#39;SearchBook_HeronBook&#39;)"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9780136702726/chapter/ch10.xhtml"><div class="js-collections-dropdown collections-dropdown menu-bit-cards" onclick="window.Appcues.track(&#39;AddPlaylist_HeronBook&#39;)"><div data-reactroot="" class="menu-dropdown-wrapper js-menu-dropdown-wrapper align-right"><img class="hidden" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/ajax-transp.gif" alt="loading spinner"><div class="menu-control"><div class="control "><div class="js-playlists-menu"><button class="js-playlist-icon"><svg class="icon-add-to-playlist-sml" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><g transform="translate(-1.000000, 0.000000)"><rect x="5" y="0" width="12" height="2"></rect><title>Playlists</title><path d="M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"></path><circle cx="2" cy="5" r="1"></circle><circle cx="1.94117647" cy="1" r="1"></circle><rect x="5" y="4" width="12" height="2"></rect><rect x="9" y="8" width="8" height="2"></rect><rect x="9" y="12" width="8" height="2"></rect></g></g></g></svg><div class="js-playlist-addto-label">Add&nbsp;To</div></button></div></div></div></div></div></div></li><li class="js-font-control-panel font-control-activator"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size" onclick="window.Appcues.track(&#39;ChangeFont_HeronBook&#39;)"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="trigger" data-push-state="false" title="Share" aria-label="Share" onclick="window.Appcues.track(&#39;Share_HeronBook&#39;)"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li class="currently-reading"><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml&amp;text=Ruby%20on%20Rails%20Tutorial%2C%206th%20Edition&amp;via=OReillyMedia"><span>Twitter</span></a></li><li class="currently-reading"><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><span>Facebook</span></a></li><li class="currently-reading"><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><span>Google Plus</span></a></li><li class="currently-reading"><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%20Chapter%2010.%20Updating%2C%20Showing%2C%20and%20Deleting%20Users&amp;body=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml%0D%0Afrom%20Ruby%20on%20Rails%20Tutorial%2C%206th%20Edition%0D%0A"><span>Email</span></a></li></ul></li><!-- endif request.user.is_authenticated -->
      </ul>
    </div>

      
          
      

    <section role="document"><script src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/48743.js.download"></script>
<script>
  var userId = "66943332-5511-462c-876e-5d5b720c7edf";

  var userObject = {
    firstName: "Trn",
    segment: "Trial",
    admin: "False",
    profileCreatedOn: "2020-12-01",
    academic: ""
  };
  window.Appcues.identify(userId, userObject);
  window.Appcues.page();

  setTimeout(function () {
    window.Appcues.track('ViewingBook_HeronBook')
  }, 20000);
</script>


	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Chapter 3. Mostly Static Pages</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch05.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Chapter 5. Filling in the Layout</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section epub:type="chapter">
<h2 class="h2" id="ch04"><span epub:type="pagebreak" id="page_153"></span>Chapter 4</h2>
<h2 class="h2a">Rails-Flavored Ruby</h2>
<p class="noindent">Grounded in examples from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03">Chapter 3</a>, this chapter explores some elements of the Ruby programming language that are important for Rails. Ruby is a big language, but fortunately the subset needed to be productive as a Rails developer is relatively small. It also differs somewhat from the usual material covered in an introduction to Ruby. This chapter is designed to give you a solid foundation in Rails-flavored Ruby, whether or not you have prior experience in the language. It covers a lot of material, and its OK not to get it all on the first pass. Well refer back to it frequently in future chapters.<sup><a id="ch04fn1a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn1" class="totri-footnote">1</a></sup></p>
<p class="footnote"><a id="ch04fn1" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn1a" class="totri-footnote">1</a>. For a more systematic introduction to Ruby, see <em>Learn Enough Ruby to Be Dangerous</em> (<a href="http://www.learnenough.com/ruby">www.learnenough.com/ruby</a>).</p>
<section>
<h3 class="h3" id="sec4_1">4.1 Motivation</h3>
<p class="noindent">As we saw in the last chapter, its possible to develop the skeleton of a Rails application, and even start testing it, with essentially no knowledge of the underlying Ruby language. We did this by relying on the test code provided by the tutorial and addressing each error message until the test suite was passing. This situation cant last forever, though, and well open this chapter with an addition to the site that brings us face-to-face with our Ruby limitations.</p>
<p class="indent">As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_2">Section 3.2</a>, well use a separate topic branch to keep our changes self-contained:</p>
<p class="codelink"><a id="pf0153-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0153-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git checkout -b rails-flavored-ruby</pre>
<p class="noindent"><span epub:type="pagebreak" id="page_154"></span>Well merge our changes into <strong><span class="dark-green"><code>master</code></span></strong> in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_5">Section 4.5</a>.</p>
<section>
<h4 class="h4" id="sec4_1_1">4.1.1 Built-in Helpers</h4>
<p class="noindent">When we last saw our new application, we had just updated our mostly static pages to use Rails layouts to eliminate duplication in our views, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex01">Listing 4.1</a> (which is the same as <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex037">Listing 3.37</a>).</p>
<p class="ex-title" id="ch04ex01"><strong>Listing 4.1:</strong> The sample application site layout.</p>
<pre class="pre2">app/views/layouts/application.html.erb</pre>
<p class="codelink"><a id="pf0154-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0154-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<strong><span class="green">html</span></strong>&gt;
  &lt;<strong><span class="green">head</span></strong>&gt;
    &lt;<strong><span class="green">title</span></strong>&gt;<span class="red5">&lt;%=</span> <strong><span class="green">yield</span></strong>(<span class="violet">:title</span>) <span class="red5">%&gt;</span> | Ruby on Rails Tutorial Sample App&lt;/<strong><span class="green">title</span></strong>&gt;
    &lt;<strong><span class="green">meta</span></strong> <span class="ash3">charset</span><span class="ash">=</span><span class="maroon">"utf-8"</span>&gt;
    <span class="red5">&lt;%=</span> csrf_meta_tags <span class="red5">%&gt;</span>
    <span class="red5">&lt;%=</span> csp_meta_tag <span class="red5">%&gt;</span>

    <span class="red5">&lt;%=</span> stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                           <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span> <span class="red5">%&gt;</span>
    <span class="red5">&lt;%=</span> javascript_pack_tag <span class="maroon">'application'</span>, <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span> <span class="red5">%&gt;</span>
  &lt;/<strong><span class="green">head</span></strong>&gt;

  &lt;<strong><span class="green">body</span></strong>&gt;
    <span class="red5">&lt;%=</span> <strong><span class="green">yield</span></strong> <span class="red5">%&gt;</span>
  &lt;/<strong><span class="green">body</span></strong>&gt;
&lt;/<strong><span class="green">html</span></strong>&gt;</pre>
</div>
<p class="indent">Lets focus on one particular line in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex01">Listing 4.1</a>:</p>
<p class="codelink"><a id="pf0154-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0154-02a">Click here to view code image</a></p>
<pre class="pre1"><span class="red5">&lt;%=</span> stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                       <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span> <span class="red5">%&gt;</span></pre>
<p class="noindent">This uses the built-in Rails function <strong><span class="dark-green"><code>stylesheet_link_tag</code></span></strong> (which you can read more about at the Rails API)<sup><a id="ch04fn2a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn2" class="totri-footnote">2</a></sup> to include <strong><span class="dark-green"><code>application.css</code></span></strong> for all media types (including computer screens and printers). To an experienced Rails developer, this<span epub:type="pagebreak" id="page_155"></span> line looks simple, but there are at least four potentially confusing Ruby ideas: built-in Rails methods, method invocation with missing parentheses, symbols, and hashes. Well cover all of these ideas in this chapter.</p>
<p class="footnote"><a id="ch04fn2" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn2a" class="totri-footnote">2</a>. An API is an application programming interface, which is a set of methods and other conventions that serves as an abstraction layer for interacting with a software system. The practical effect is that we as developers dont need to understand the program internals; we need only be famliar with the public-facing API. In the present case, this means that, rather than be concerned with how <strong><span class="dark-green"><code>stylesheet_link_tag</code></span></strong> is implemented, we need only know how it behaves.</p>
</section>
<section>
<h4 class="h4" id="sec4_1_2">4.1.2 Custom Helpers</h4>
<p class="noindent">In addition to coming equipped with a large number of built-in functions for use in the views, Rails allows the creation of new ones. Such functions are called <em>helpers</em>. To see how to make a custom helper, lets start by examining the title line from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex01">Listing 4.1</a>:</p>
<p class="codelink"><a id="pf0155-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0155-01a">Click here to view code image</a></p>
<pre class="pre1"><span class="red5">&lt;%=</span> <strong><span class="green">yield</span></strong>(<span class="violet">:title</span>) <span class="red5">%&gt;</span> | Ruby on Rails Tutorial Sample App</pre>
<p class="indent">This relies on the definition of a page title (using <strong><span class="green7"><code>provide</code></span></strong>) in each view, as in</p>
<p class="codelink"><a id="pf0155-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0155-02a">Click here to view code image</a></p>
<pre class="pre1"><span class="red5">&lt;%</span> provide(<span class="violet">:title</span>, <span class="maroon">"Home"</span>) <span class="red5">%&gt;</span>
&lt;<strong><span class="green">h1</span></strong>&gt;Sample App&lt;/<strong><span class="green">h1</span></strong>&gt;
&lt;<strong><span class="green">p</span></strong>&gt;
  This is the home page for the
  &lt;<strong><span class="green">a</span></strong> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;Ruby on Rails Tutorial&lt;/<strong><span class="green">a</span></strong>&gt;
  sample application.
&lt;/<strong><span class="green">p</span></strong>&gt;</pre>
<p class="noindent">But what if we dont provide a title? Its a good convention to have a <em>base title</em> we use on every page, with an optional page title if we want to be more specific. Weve <em>almost</em> achieved that with our current layout, with one wrinkle: As you can see if you delete the <strong><span class="dark-green"><code>provide</code></span></strong> call in one of the views, in the absence of a page-specific title the full title appears as follows:</p>
<p class="codelink"><a id="pf0155-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0155-03a">Click here to view code image</a></p>
<pre class="pre1">| Ruby on Rails Tutorial Sample App</pre>
<p class="noindent">In other words, theres a suitable base title, but theres also a leading vertical bar character <strong><span class="dark-green"><code>|</code></span></strong> at the beginning.</p>
<p class="indent">To solve the problem of a missing page title, well define a custom helper called <strong><span class="dark-green"><code>full_title</code></span></strong>. The <strong><span class="dark-green"><code>full_title</code></span></strong> helper returns a base title, Ruby on Rails Tutorial<span epub:type="pagebreak" id="page_156"></span> Sample App, if no page title is defined, and adds a vertical bar preceded by the page title if one is defined (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex02">Listing 4.2</a>).<sup><a id="ch04fn3a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn3" class="totri-footnote">3</a></sup></p>
<p class="footnote"><a id="ch04fn3" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn3a" class="totri-footnote">3</a>. If a helper is specific to a particular controller, you should put it in the corresponding helper file; for example, helpers for the Static Pages controller generally go in <strong><span class="dark-green"><code>app/helpers/static_pages_helper.rb</code></span></strong>. In our case, we expect the <strong><span class="dark-green"><code>full_title</code></span></strong> helper to be used on all the sites pages, and Rails has a special helper file for this case: <strong><span class="dark-green"><code>app/helpers/application_helper.rb</code></span></strong>.</p>
<p class="ex-title" id="ch04ex02"><strong>Listing 4.2:</strong> Defining a <strong><span class="dark-green"><code>full_title</code></span></strong> helper.</p>
<pre class="pre2">app/helpers/application_helper.rb</pre>
<p class="codelink"><a id="pf0156-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0156-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">module</span></strong> <strong><span class="blue3">ApplicationHelper</span></strong>

  <span class="blue"># Returns the full title on a per-page basis.</span>
  <strong><span class="green">def</span></strong> <span class="blue3">full_title</span>(page_title <span class="ash">=</span> <span class="maroon">''</span>)
    base_title <span class="ash">=</span> <span class="maroon">"Ruby on Rails Tutorial Sample App"</span>
    <strong><span class="green">if</span></strong> page_title<span class="ash">.</span>empty?
      base_title
    <strong><span class="green">else</span></strong>
      page_title <span class="ash">+</span> <span class="maroon">" | "</span> <span class="ash">+</span> base_title
    <strong><span class="green">end</span></strong>
  <strong><span class="green">end</span></strong>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent">Now that we have a helper, we can use it to simplify our layout by replacing</p>
<p class="codelink"><a id="pf0156-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0156-02a">Click here to view code image</a></p>
<pre class="pre1">&lt;<strong><span class="green">title</span></strong>&gt;<span class="red5">&lt;%=</span> <strong><span class="green">yield</span></strong>(<span class="violet">:title</span>) <span class="red5">%&gt;</span> | Ruby on Rails Tutorial Sample App&lt;/<strong><span class="green">title</span></strong>&gt;</pre>
<p class="noindent">with</p>
<p class="codelink"><a id="pf0156-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0156-03a">Click here to view code image</a></p>
<pre class="pre1">&lt;<strong><span class="green">title</span></strong>&gt;<span class="red5">&lt;%=</span> full_title(<strong><span class="green">yield</span></strong>(<span class="violet">:title</span>)) <span class="red5">%&gt;</span>&lt;/<strong><span class="green">title</span></strong>&gt;</pre>
<p class="noindent">as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex03">Listing 4.3</a>.</p>
<p class="ex-title" id="ch04ex03"><strong>Listing 4.3:</strong> The site layout with the <strong><span class="green7"><code>full_title</code></span></strong> helper. <span class="green5"><small>GREEN</small></span></p>
<pre class="pre2">app/views/layouts/application.html.erb</pre>
<p class="codelink"><a id="pf0156-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0156-04a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<strong><span class="green">html</span></strong>&gt;
  &lt;<strong><span class="green">head</span></strong>&gt;
<span class="mark">    <strong><span class="green3">&lt;title&gt;</span></strong><span class="maroon1">&lt;%=</span> full_title(<strong><span class="green3">yield</span></strong>(<span class="blue1">:title</span>)) <span class="maroon1">%&gt;</span><strong><span class="green3">&lt;/title&gt;</span></strong></span>
    &lt;<strong><span class="green">meta</span></strong> <span class="ash3">charset</span><span class="ash">=</span><span class="maroon">"utf-8"</span>&gt;
    <span class="red5">&lt;%=</span> csrf_meta_tags <span class="red5">%&gt;</span>
    <span class="red5">&lt;%=</span> csp_meta_tag <span class="red5">%&gt;</span>

    <span class="red5">&lt;%=</span> stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                           <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span> <span class="red5">%&gt;</span>
    <span class="red5">&lt;%=</span> javascript_pack_tag <span class="maroon">'application'</span>, <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span> <span class="red5">%&gt;</span>
  &lt;/<strong><span class="green">head</span></strong>&gt;
  &lt;<strong><span class="green">body</span></strong>&gt;
    <span class="red5">&lt;%=</span> <strong><span class="green">yield</span></strong> <span class="red5">%&gt;</span>
  &lt;/<strong><span class="green">body</span></strong>&gt;
 &lt;/<strong><span class="green">html</span></strong>&gt;</pre>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_157"></span>To put our helper to work, we can eliminate the unnecessary word Home from the Home page, allowing it to revert to the base title. We do this by first updating our test with the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex04">Listing 4.4</a>, which updates the previous title test and adds one to test for the absence of the custom <strong><span class="dark-green"><code>"Home"</code></span></strong> string in the title.</p>
<p class="ex-title" id="ch04ex04"><strong>Listing 4.4:</strong> An updated test for the Home pages title. <span class="red5"><small>RED</small></span></p>
<pre class="pre2">test/controllers/static_pages_controller_test.rb</pre>
<p class="codelink"><a id="pf0157-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0157-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green1">require</span> <span class="maroon">'test_helper'</span>

<strong><span class="green">class</span></strong> <strong><span class="blue3">StaticPagesControllerTest</span></strong> <span class="ash">&lt;</span> <span class="red">ActionDispatch</span><span class="ash">::</span><span class="red">IntegrationTest</span>

  <span class="green1">test</span> <span class="maroon">"should get home"</span> <strong><span class="green">do</span></strong>
    get static_pages_home_url
    assert_response <span class="violet">:success</span>
<span class="mark">    assert_select <span class="red2">"title"</span>, <span class="red2">"Ruby on Rails Tutorial Sample App"</span></span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get help"</span> <strong><span class="green">do</span></strong>
    get static_pages_help_url
    assert_response <span class="violet">:success</span>
    assert_select <span class="maroon">"title"</span>, <span class="maroon">"Help | Ruby on Rails Tutorial Sample App"</span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get about"</span> <strong><span class="green">do</span></strong>
    get static_pages_about_url
    assert_response <span class="violet">:success</span>
    assert_select <span class="maroon">"title"</span>, <span class="maroon">"About | Ruby on Rails Tutorial Sample App"</span>
  <strong><span class="green">end</span></strong>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_158"></span>Lets run the test suite to verify that one test fails:<sup><a id="ch04fn4a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn4" class="totri-footnote">4</a></sup></p>
<p class="footnote"><a id="ch04fn4" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn4a" class="totri-footnote">4</a>. Ill generally run the test suite explicitly for completeness, but in practice I usually just use Guard as described in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_6_2">Section 3.6.2</a>.</p>
<p class="ex-title" id="ch04ex05"><strong>Listing 4.5:</strong> <span class="red5"><small>RED</small></span></p>
<p class="codelink"><a id="pf0158-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0158-01a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails test
3 tests, 6 assertions, 1 failures, 0 errors, 0 skips</pre>
</div>
<p class="indent">To get the test suite to pass, well remove the <strong><span class="green7"><code>provide</code></span></strong> line from the Home pages view, as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex06">Listing 4.6</a>.</p>
<p class="ex-title" id="ch04ex06"><strong>Listing 4.6:</strong> The Home page with no custom page title. <span class="green5"><small>GREEN</small></span></p>
<pre class="pre2">app/views/static_pages/home.html.erb</pre>
<p class="codelink"><a id="pf0158-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0158-02a">Click here to view code image</a></p>
<div class="example">
<pre>&lt;<strong><span class="green">h1</span></strong>&gt;Sample App&lt;/<strong><span class="green">h1</span></strong>&gt;
&lt;<strong><span class="green">p</span></strong>&gt;
  This is the home page for the
  &lt;<strong><span class="green">a</span></strong> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;Ruby on Rails Tutorial&lt;/<strong><span class="green">a</span></strong>&gt;
  sample application.
&lt;/<strong><span class="green">p</span></strong>&gt;</pre>
</div>
<p class="noindent">At this point the tests should pass:</p>
<p class="ex-title" id="ch04ex07"><strong>Listing 4.7:</strong> <span class="green5"><small>GREEN</small></span></p>
<div class="example">
<pre>$ rails test</pre>
</div>
<p class="noindent">(Previous examples have included partial output of running <strong><span class="dark-green"><code>rails test</code></span></strong>, including the number of passing and failing tests, but for brevity these will usually be omitted from now on.)</p>
<p class="indent">As with the line to include the application stylesheet in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_1_1">Section 4.1.1</a>, the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex02">Listing 4.2</a> may look simple to the eyes of an experienced Rails developer, but its <em>full</em> of important Ruby ideas: modules, method definition, optional method arguments, comments, local variable assignment, booleans, control flow, string concatenation, and return values. This chapter will cover all of these ideas as well.<span epub:type="pagebreak" id="page_159"></span></p>
</section>
</section>
<section>
<h3 class="h3" id="sec4_2">4.2 Strings and Methods</h3>
<p class="noindent">Our principal tool for learning Ruby will be the <em>Rails console</em>, a command-line program for interacting with Rails applications first seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_3_3">Section 2.3.3</a>. The console itself is built on top of interactive Ruby (<strong><span class="dark-green"><code>irb</code></span></strong>), and thus has access to the full power of the Ruby language. (As well see in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_4_4">Section 4.4.4</a>, the console also has access to the Rails environment.)</p>
<p class="indent">If youre using the cloud IDE, there are a couple of irb configuration parameters I recommend including. Using the simple <strong><span class="dark-green"><code>nano</code></span></strong> text editor, open a file called <strong><span class="dark-green"><code>.irbrc</code></span></strong> in the home directory:<sup><a id="ch04fn5a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn5" class="totri-footnote">5</a></sup></p>
<p class="footnote"><a id="ch04fn5" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn5a" class="totri-footnote">5</a>. The <strong><span class="green7"><code>nano</code></span></strong> editor is easier for beginners, but for this sort of short edit I would almost always use Vim instead. To learn Minimum Viable Vim, see <em>Learn Enough Text Editor to Be Dangerous</em>, <a href="http://www.learnenough.com/text-editor">www.learnenough.com/text-editor</a>.</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> nano ~/.irbrc</pre>
<p class="noindent">Then fill it with the content of <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex08">Listing 4.8</a>, which arranges to simplify the <strong><span class="green7"><code>irb</code></span></strong> prompt and suppress some annoying auto-indent behavior.</p>
<p class="ex-title" id="ch04ex08"><strong>Listing 4.8:</strong> Adding some irb configuration.</p>
<pre class="pre2">~/.irbrc</pre>
<p class="codelink"><a id="pf0159-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0159-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">IRB</span><span class="ash">.</span>conf<span class="ash">[</span><span class="violet">:PROMPT_MODE</span><span class="ash">] =</span> <span class="violet">:SIMPLE</span>
<span class="red">IRB</span><span class="ash">.</span>conf<span class="ash">[</span><span class="violet">:AUTO_INDENT_MODE</span><span class="ash">] =</span> <strong><span class="green">false</span></strong></pre>
</div>
<p class="noindent">Finally, exit <strong><span class="dark-green"><code>nano</code></span></strong> with Ctrl-X and save <strong><span class="dark-green"><code>~/.irbrc</code></span></strong> by typing <strong><span class="dark-green"><code>y</code></span></strong> to confirm.</p>
<p class="indent">We can now start the console at the command line as follows:</p>
<p class="codelink"><a id="pf0159-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0159-02a">Click here to view code image</a></p>
<pre class="pre1"><span class="green">$ rails console</span>
<span class="green">Loading development environment</span>
<span class="green">&gt;&gt;</span></pre>
<p class="indent">By default, the console starts in a <em>development environment</em>, which is one of three separate environments defined by Rails (the others are <em>test</em> and <em>production</em>). This distinction wont be important in this chapter, but it will in the future, and well learn more about environments in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_1_1">Section 7.1.1</a>.<span epub:type="pagebreak" id="page_160"></span></p>
<p class="indent">The console is a great learning tool, and you should feel free to explore it. Dont worryyou (probably) wont break anything. When using the console, type Ctrl-C if you get stuck, or type Ctrl-D to exit the console altogether. As with a regular terminal shell, you can also use up-arrow to retrieve previous commands, which can be a significant time-saver.</p>
<p class="indent">Throughout the rest of this chapter, you might find it helpful to consult the Ruby API. Its packed (perhaps even <em>too</em> packed) with information. For example, to learn more about Ruby strings you can look at the Ruby API entry for the <strong><span class="green7"><code>String</code></span></strong> class.</p>
<p class="indent">During this discussion, well sometimes use Ruby <em>comments</em>, which start with the pound sign <strong><span class="green7"><code>#</code></span></strong> (also called the hash mark or, more poetically, the octothorpe) and extend to the end of the line. Ruby ignores comments, but they are useful for human readers (including, often, the original author!). In the code</p>
<p class="codelink"><a id="pf0160-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0160-01a">Click here to view code image</a></p>
<pre class="pre1"><span class="blue"># Returns the full title on a per-page basis.</span>
<strong><span class="green">def</span></strong> <span class="blue3">full_title</span>(page_title <span class="ash">=</span> <span class="maroon">''</span>)
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
<strong><span class="green">end</span></strong></pre>
<p class="noindent">the first line is a comment indicating the purpose of the subsequent function definition.</p>
<p class="indent">You dont ordinarily include comments in console sessions, but for instructional purposes Ill include some comments in what follows, like this:</p>
<p class="codelink"><a id="pf0160-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0160-02a">Click here to view code image</a></p>
<pre class="pre1"><span class="green">$ rails console</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="ash">17 + 42</span> <span class="blue"># Integer addition</span>
<span class="green">=&gt; 59</span></pre>
<p class="noindent">If you follow along in this section by typing or copying-and-pasting commands into your own console, you can of course omit the comments if you like; the console will ignore them in any case.</p>
<section>
<h4 class="h4" id="sec4_2_1">4.2.1 Strings</h4>
<p><em>Strings</em> are probably the most important data structure for web applications, since web pages ultimately consist of strings of characters sent from the server to the browser. Lets start exploring strings with the console:<span epub:type="pagebreak" id="page_161"></span></p>
<p class="codelink"><a id="pf0161-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0161-01a">Click here to view code image</a></p>
<pre class="pre1"><span class="green">$ rails console</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">""</span>         <span class="blue"># An empty string</span>
<span class="green">=&gt; ""</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"foo"</span>      <span class="blue"># A nonempty string</span>
<span class="green">=&gt; "foo"</span></pre>
<p class="noindent">These are <em>string literals</em> (also called <em>literal strings</em>), created using the double quote character <strong><span class="green7"><code>"</code></span></strong>. The console prints the result of evaluating each line, which in the case of a string literal is just the string itself.</p>
<p class="indent">We can also concatenate strings with the <strong><span class="green7"><code>+</code></span></strong> operator:</p>
<p class="codelink"><a id="pf0161-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0161-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"foo"</span> <span class="ash">+</span> <span class="maroon">"bar"</span>    <span class="blue"># String concatenation</span>
<span class="green">=&gt; "foobar"</span></pre>
<p class="noindent">Here the result of evaluating <strong><span class="green7"><code>"foo"</code></span></strong> plus <strong><span class="green7"><code>"bar"</code></span></strong> is the string <strong><span class="green7"><code>"foobar"</code></span></strong>.<sup><a id="ch04fn6a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn6" class="totri-footnote">6</a></sup></p>
<p class="footnote"><a id="ch04fn6" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn6a" class="totri-footnote">6</a>. For more on the origins of foo and barand, in particular, the possible <em>non</em>-relation of foobar to FUBARsee the Jargon File entry on foo. (<a href="http://www.catb.org/jargon/html/F/foo.html">www.catb.org/jargon/html/F/foo.html</a>).</p>
<p class="indent">Another way to build up strings is via <em>interpolation</em> using the special syntax <strong><span class="green7"><code>#{}</code></span></strong>:<sup><a id="ch04fn7a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn7" class="totri-footnote">7</a></sup></p>
<p class="footnote"><a id="ch04fn7" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn7a" class="totri-footnote">7</a>. Programmers familiar with Perl or PHP should compare this to the automatic interpolation of dollar sign variables in expressions like <strong><span class="dark-green"><code>"foo $bar"</code></span></strong>.</p>
<p class="codelink"><a id="pf0161-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0161-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> first_name <span class="ash">=</span> <span class="maroon">"Michael"</span>         <span class="blue"># Variable assignment</span>
<span class="green">=&gt; "Michael"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"</span><strong><span class="pink">#{</span></strong>first_name<strong><span class="pink">}</span></strong> <span class="maroon">Hartl"</span>          <span class="blue"># String interpolation</span>
<span class="green">=&gt; "Michael Hartl"</span></pre>
<p class="noindent">Here weve <em>assigned</em> the value <strong><span class="green7"><code>"Michael"</code></span></strong> to the variable <strong><span class="green7"><code>first_name</code></span></strong> and then interpolated it into the string <strong><span class="green7"><code>"#{first_name} Hartl"</code></span></strong>. We could also assign both strings a variable name:</p>
<p class="codelink"><a id="pf0161-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0161-04a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> first_name <span class="ash">=</span> <span class="maroon">"Michael"</span>
<span class="green">=&gt; "Michael"</span>
<strong><span class="navy">&gt;&gt;</span></strong> last_name <span class="ash">=</span> <span class="maroon">"Hartl"</span>
<span class="green">=&gt; "Hartl"</span>
<strong><span class="navy">&gt;&gt;</span></strong> first_name <span class="ash">+</span> <span class="maroon">" "</span> <span class="ash">+</span> last_name       <span class="blue"># Concatenation, with a space in between</span>
<span class="green">=&gt; "Michael Hartl"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"</span><strong><span class="pink">#{</span></strong>first_name<strong><span class="pink">} #{</span></strong>last_name<strong><span class="pink">}</span></strong><span class="maroon">"</span>       <span class="blue"># The equivalent interpolation</span>
<span class="green">=&gt; "Michael Hartl"</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_162"></span>Note that the final two expressions are equivalent, but I prefer the interpolated version; having to add the single space <strong><span class="dark-green"><code>" "</code></span></strong> seems a bit awkward.</p>
<section>
<h5 class="h5" id="lev28">Printing</h5>
<p class="noindent">To <em>print</em> a string to the screen, the most commonly used Ruby function is <strong><span class="dark-green"><code>puts</code></span></strong> (pronounced put ess, for put string, though some people do pronounce it like the word puts instead):</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> <span class="maroon">"foo"</span>    <span class="blue"># put string</span>
<span class="green">foo</span>
<span class="green">=&gt; nil</span></pre>
<p class="noindent">The <strong><span class="dark-green"><code>puts</code></span></strong> method operates as a <em>side effect</em>: The expression <strong><span class="dark-green"><code>puts "foo"</code></span></strong> prints the string to the screen and then returns literally nothing<strong><span class="dark-green"><code>nil</code></span></strong> is a special Ruby value for nothing at all. (In what follows, Ill sometimes suppress the <strong><span class="dark-green"><code>=&gt; nil</code></span></strong> part for simplicity.)</p>
<p class="indent">As seen in the preceding examples, using <strong><span class="dark-green"><code>puts</code></span></strong> automatically includes a new line after the string gets printed (the same as the behavior of the <strong><span class="dark-green"><code>echo</code></span></strong> command covered in <em>Learn Enough Command Line to Be Dangerous</em>). The closely related <strong><span class="dark-green"><code>print</code></span></strong> command prints the raw string without the extra line:</p>
<p class="codelink"><a id="pf0162-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0162-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">print</span> <span class="maroon">"foo"</span>     <span class="blue"># print string without extra line</span>
<span class="green">foo=&gt; nil</span></pre>
<p class="noindent">You can see here that the output <strong><span class="green7"><code>foo</code></span></strong> bumps right up against the prompt in the second line.</p>
<p class="indent">The technical name for an extra line of blank space is a <em>newline</em>, typically represented by backslash n <code>\n</code>. We can arrange for <strong><span class="green7"><code>print</code></span></strong> to replicate the behavior of <strong><span class="green7"><code>puts</code></span></strong> by including an explicit newline character in the string:</p>
<p class="codelink"><a id="pf0162-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0162-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">print</span> <span class="maroon">"foo</span><strong><span class="maroon2">\n</span></strong><span class="maroon">"</span>  <span class="blue"># Same as puts "foo"</span>
<span class="green">foo</span>
<span class="green">=&gt; nil</span></pre>
</section>
<section>
<h5 class="h5" id="lev29">Single-quoted Strings</h5>
<p class="noindent">All the examples so far have used <em>double-quoted strings</em>, but Ruby also supports <em>single-quoted</em> strings. For many uses, the two types of strings are effectively identical:<span epub:type="pagebreak" id="page_163"></span></p>
<p class="codelink"><a id="pf0163-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0163-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">'foo'</span>         <span class="blue"># A single-quoted string</span>
<span class="green">=&gt; "foo"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">'foo'</span> <span class="ash">+</span> <span class="maroon">'bar'</span>
<span class="green">=&gt; "foobar"</span></pre>
<p class="indent">Theres an important difference, though; Ruby wont interpolate into single-quoted strings:</p>
<p class="codelink"><a id="pf0163-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0163-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">'#{foo} bar'</span>    <span class="blue"># Single-quoted strings don't allow interpolation</span>
<span class="green">=&gt; "\#{foo} bar"</span></pre>
<p class="noindent">Note how the console returns values using double-quoted strings, which requires a backslash to <em>escape</em> special character combinations such as <strong><span class="dark-green"><code>#{</code></span></strong>.</p>
<p class="indent">If double-quoted strings can do everything that single-quoted strings can do, and interpolate to boot, whats the point of single-quoted strings? They are often useful because they are truly literal, containing exactly the characters you type. For example, the backslash character is special on most systems, as in the literal new-line <strong><span class="dark-green"><code>\n</code></span></strong>. If you want a variable to contain a literal backslash, single quotes make it easier:</p>
<p class="codelink"><a id="pf0163-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0163-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">'\n'</span>    <span class="blue"># A literal 'backslash n' combination</span>
<span class="green">=&gt; "\\n"</span></pre>
<p class="noindent">As with the <strong><span class="dark-green"><code>#{</code></span></strong> combination in our previous example, Ruby needs to escape the backslash with an additional backslash; inside double-quoted strings, a literal backslash is represented with <em>two</em> backslashes. For a small example like this, theres not much savings, but if there are lots of things to escape it can be a real help:</p>
<p class="codelink"><a id="pf0163-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0163-04a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">'Newlines (\n) and tabs (\t) both use the backslash character \.'</span>
<span class="green">=&gt; "Newlines (\\n) and tabs (\\t) both use the backslash character \\."</span></pre>
<p class="indent">Finally, its worth noting that, in the common case that both single and double quotes work just fine, youll often find that the source code switches between the two without any apparent pattern. Theres really nothing to be done about this, except to say, Welcome to Ruby! Youll get used to it soon enough.</p>
</section>
<section>
<h5 class="h5" id="lev30">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.<span epub:type="pagebreak" id="page_164"></span></p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Assign variables <strong><span class="green7"><code>city</code></span></strong> and <strong><span class="green7"><code>state</code></span></strong> to your current city and state of residence. (If you reside outside the United States, substitute the analogous quantities.)</p></li>
<li><p class="num">Using interpolation, print (using <strong><span class="green7"><code>puts</code></span></strong>) a string consisting of the city and state separated by a comma and a space, as in Los Angeles, CA.</p></li>
<li><p class="num">Repeat the previous exercise but with the city and state separated by a tab character.</p></li>
<li><p class="num">What is the result if you replace double quotes with single quotes in the previous exercise?</p></li>
</ol></section>
</section>
<section>
<h4 class="h4" id="sec4_2_2">4.2.2 Objects and Message Passing</h4>
<p class="noindent">Everything in Ruby, including strings and even <strong><span class="green7"><code>nil</code></span></strong>, is an <em>object</em>. Well see the technical meaning of this in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_4_2">Section 4.4.2</a>, but I dont think anyone ever understood objects by reading the definition in a book; you have to build up your intuition for objects by seeing lots of examples.</p>
<p class="indent">Its easier to describe what objects <em>do</em>, which is respond to messages. An object like a string, for example, can respond to the message <strong><span class="green7"><code>length</code></span></strong>, which returns the number of characters in the string:</p>
<p class="codelink"><a id="pf0164-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0164-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"foobar"</span><span class="ash">.</span>length      <span class="blue"># Passing the "length" message to a string</span>
<span class="green">=&gt; 6</span></pre>
<p class="noindent">Typically, the messages that get passed to objects are <em>methods</em>, which are functions defined on those objects.<sup><a id="ch04fn8a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn8" class="totri-footnote">8</a></sup> Strings also respond to the <strong><span class="green7"><code>empty?</code></span></strong> method:</p>
<p class="footnote"><a id="ch04fn8" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn8a" class="totri-footnote">8</a>. Apologies in advance for switching haphazardly between <em>function</em> and <em>method</em> throughout this chapter. In Ruby, theyre the same thing: All methods are functions, and all functions are methods, because everything is an object.</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"foobar"</span><span class="ash">.</span>empty?
<span class="green">=&gt; false</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">""</span><span class="ash">.</span>empty?
<span class="green">=&gt; true</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_165"></span>Note the question mark at the end of the <strong><span class="green7"><code>empty?</code></span></strong> method. This is a Ruby convention indicating that the return value is <em>boolean</em>: <strong><span class="green7"><code>true</code></span></strong> or <strong><span class="green7"><code>false</code></span></strong>. Booleans are especially useful for <em>control flow</em>:</p>
<p class="codelink"><a id="pf0165-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0165-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> s <span class="ash">=</span> <span class="maroon">"foobar"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">if</span></strong> s<span class="ash">.</span>empty?
<strong><span class="navy">&gt;&gt;</span></strong>   <span class="maroon">"The string is empty"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">else</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong>   <span class="maroon">"The string is nonempty"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">=&gt; "The string is nonempty"</span></pre>
<p class="noindent">To include more than one clause, we can use <strong><span class="green7"><code>elsif</code></span></strong> (<strong><span class="green7"><code>else</code></span></strong> + <strong><span class="green7"><code>if</code></span></strong>):</p>
<p class="codelink"><a id="pf0165-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0165-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">if</span></strong> s<span class="ash">.</span>nil?
<strong><span class="navy">&gt;&gt;</span></strong>   <span class="maroon">"The variable is nil"</span>
<strong><span class="navy">&gt;&gt;</span></strong><strong> <span class="green">elsif</span></strong> s<span class="ash">.</span>empty?
<strong><span class="navy">&gt;&gt;</span></strong>   <span class="maroon">"The string is empty"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">elsif</span></strong> s<span class="ash">.</span>include?(<span class="maroon">"foo"</span>)
<strong><span class="navy">&gt;&gt;</span></strong>   <span class="maroon">"The string includes 'foo'"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">=&gt; "The string includes 'foo'"</span></pre>
<p class="noindent">Booleans can also be combined using the <strong><span class="dark-green"><code>&amp;&amp;</code></span></strong> (and), <strong><span class="dark-green"><code>||</code></span></strong> (or), and <strong><span class="dark-green"><code>!</code></span></strong> (not) operators:</p>
<p class="codelink"><a id="pf0165-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0165-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> x <span class="ash">=</span> <span class="maroon">"foo"</span>
<span class="green">=&gt; "foo"</span>
<strong><span class="navy">&gt;&gt;</span></strong> y <span class="ash">=</span> <span class="maroon">""</span>
<span class="green">=&gt; ""</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> <span class="maroon">"Both strings are empty"</span> <strong><span class="green">if</span></strong> x<span class="ash">.</span>empty? <span class="ash">&amp;&amp;</span> y<span class="ash">.</span>empty?
<span class="green">=&gt; nil</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> <span class="maroon">"One of the strings is empty"</span> <strong><span class="green">if</span></strong> x<span class="ash">.</span>empty? <span class="ash">||</span> y<span class="ash">.</span>empty?
<span class="green">"One of the strings is empty"</span>
<span class="green">=&gt; nil</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> <span class="maroon">"x is not empty"</span> <strong><span class="green">if</span></strong> <span class="ash">!</span>x<span class="ash">.</span>empty?
<span class="green">"x is not empty"</span>
<span class="green">=&gt; nil</span></pre>
<p class="indent">Since everything in Ruby is an object, it follows that <strong><span class="green7"><code>nil</code></span></strong> is an object, so it, too, can respond to methods. One example is the <strong><span class="green7"><code>to_s</code></span></strong> method, which can convert virtually any object to a string:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">nil</span></strong><span class="ash">.</span>to_s
<span class="green">=&gt; ""</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_166"></span>This certainly appears to be an empty string, as we can verify by passing multiple methods to <strong><span class="green7"><code>nil</code></span></strong>, a technique known as <em>method chaining</em>:</p>
<p class="codelink"><a id="pf0166-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0166-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">nil</span></strong><span class="ash">.</span>empty?
<span class="green">NoMethodError: undefined method `empty?' for nil:NilClass</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">nil</span></strong><span class="ash">.</span>to_s<span class="ash">.</span>empty?      <span class="blue"># Message chaining</span>
<span class="green">=&gt; true</span></pre>
<p class="noindent">We see here that the <strong><span class="green7"><code>nil</code></span></strong> object doesnt itself respond to the <strong><span class="green7"><code>empty?</code></span></strong> method, but <strong><span class="green7"><code>nil.to_s</code></span></strong> does.</p>
<p class="indent">Theres a special method for testing for <strong><span class="green7"><code>nil</code></span></strong>-ness, which you might be able to guess:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"foo"</span><span class="ash">.</span>nil?
<span class="green">=&gt; false</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">""</span><span class="ash">.</span>nil?
<span class="green">=&gt; false</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">nil</span></strong><span class="ash">.</span>nil?
<span class="green">=&gt; true</span></pre>
<p class="indent">The code</p>
<p class="codelink"><a id="pf0166-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0166-03a">Click here to view code image</a></p>
<pre class="pre1"><span class="green1">puts</span> <span class="maroon">"x is not empty"</span> <strong><span class="green">if</span></strong> <span class="ash">!</span>x<span class="ash">.</span>empty?</pre>
<p class="noindent">also shows an alternative use of the <strong><span class="green7"><code>if</code></span></strong> keyword: Ruby allows you to write a statement that is evaluated only if the statement following <strong><span class="dark-green"><code>if</code></span></strong> is true. Theres a complementary <strong><span class="green7"><code>unless</code></span></strong> keyword that works the same way:</p>
<p class="codelink"><a id="pf0166-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0166-04a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> string <span class="ash">=</span> <span class="maroon">"foobar"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> <span class="maroon">"The string '</span><strong><span class="pink">#{</span></strong>string<strong><span class="pink">}</span></strong><span class="maroon">' is nonempty."</span> <strong><span class="green">unless</span></strong> string<span class="ash">.</span>empty?
<span class="green">The string 'foobar' is nonempty.</span>
<span class="green">=&gt; nil</span></pre>
<p class="indent">Its worth noting that the <strong><span class="green7"><code>nil</code></span></strong> object is special, in that it is the <em>only</em> Ruby object that is false in a boolean context, apart from <strong><span class="green7"><code>false</code></span></strong> itself. We can see this using <strong><span class="green7"><code>!!</code></span></strong> (read bang bang), which negates an object twice, thereby coercing it to its boolean value:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="ash">!!</span><strong><span class="green">nil</span></strong>
<span class="green">=&gt; false</span></pre>
<p class="indent"><span epub:type="pagebreak" id="page_167"></span>In particular, all other Ruby objects are <em>true</em>, even 0:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="ash">!!0</span>
<span class="green">=&gt; true</span></pre>
<section>
<h5 class="h5" id="lev31">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">What is the length of the string racecar?</p></li>
<li><p class="num">Confirm using the <strong><span class="green7"><code>reverse</code></span></strong> method that the string in the previous exercise is the same when its letters are reversed.</p></li>
<li><p class="num">Assign the string racecar to the variable <strong><span class="green7"><code>s</code></span></strong>. Confirm using the <em>comparison operator</em> <strong><span class="green7"><code>==</code></span></strong> that <strong><span class="green7"><code>s</code></span></strong> and <strong><span class="green7"><code>s.reverse</code></span></strong> are equal.</p></li>
<li><p class="num">What is the result of running the code shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex09">Listing 4.9</a>? How does it change if you reassign the variable <strong><span class="dark-green"><code>s</code></span></strong> to the string onomatopoeia? <em>Hint</em>: Use up-arrow to retrieve and edit previous commands</p></li>
</ol>
<p class="ex-title" id="ch04ex09"><strong>Listing 4.9:</strong> A simple palindrome test.</p>
<p class="codelink"><a id="pf0167-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0167-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> <span class="maroon">"It's a palindrome!"</span> <strong><span class="green">if</span></strong> s <span class="ash">==</span> s<span class="ash">.</span>reverse</pre>
</div>
</section>
</section>
<section>
<h4 class="h4" id="sec4_2_3">4.2.3 Method Definitions</h4>
<p class="noindent">The console allows us to define methods the same way we did with the <strong><span class="green7"><code>home</code></span></strong> action from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex08">Listing 3.8</a> or the <strong><span class="green7"><code>full_title</code></span></strong> helper from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex02">Listing 4.2</a>. (Defining methods in the console is a bit cumbersome, and ordinarily you would use a file, but its convenient for demonstration purposes.) For example, lets define a function <strong><span class="green7"><code>string_message</code></span></strong> that takes a single <em>argument</em> and returns a message based on whether the argument is empty:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">def</span></strong> <span class="blue3">string_message</span>(str <span class="ash">=</span> <span class="maroon">''</span>)
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">if</span></strong> str<span class="ash">.</span>empty?
<strong><span class="navy">&gt;&gt;</span></strong>     <span class="maroon">"It's an empty string!"</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">else</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong>     <span class="maroon">"The string is nonempty."</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">end</span></strong>
<span epub:type="pagebreak" id="page_168"></span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">=&gt; :string_message</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> string_message(<span class="maroon">"foobar"</span>)
<span class="green">The string is nonempty.</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> string_message(<span class="maroon">""</span>)
<span class="green">It's an empty string!</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> string_message
<span class="green">It's an empty string!</span></pre>
<p class="noindent">As seen in the final example, its possible to leave out the argument entirely (in which case we can also omit the parentheses). This is because the code</p>
<pre class="pre1"><strong><span class="green">def</span></strong> <span class="blue3">string_message</span>(str <span class="ash">=</span> <span class="maroon">''</span>)</pre>
<p class="noindent">contains a <em>default</em> argument, which in this case is the empty string. This makes the <strong><span class="green7"><code>str</code></span></strong> argument optional, and if we leave it off it automatically takes the given default value.</p>
<p class="indent">Note that Ruby functions have an <em>implicit return</em>, meaning they return the last statement evaluatedin this case, one of the two message strings, depending on whether the methods argument <strong><span class="green7"><code>str</code></span></strong> is empty. Ruby also has an explicit return option; the following function is equivalent to the one above:</p>
<p class="codelink"><a id="pf0168-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0168-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">def</span></strong> <span class="blue3">string_message</span>(str <span class="ash">=</span> <span class="maroon">''</span>)
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">return</span></strong> <span class="maroon">"It's an empty string!"</span> <strong><span class="green">if</span></strong> str<span class="ash">.</span>empty?
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">return</span></strong> <span class="maroon">"The string is nonempty."</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong></pre>
<p class="noindent">(The alert reader might notice at this point that the second <strong><span class="green7"><code>return</code></span></strong> here is actually unnecessary. As the last expression in the function, the string <strong><span class="green7"><code>"The string is nonempty."</code></span></strong> will be returned regardless of the <strong><span class="green7"><code>return</code></span></strong> keyword, but using <strong><span class="green7"><code>return</code></span></strong> in both places has a pleasing symmetry to it.)</p>
<p class="indent">Its also important to understand that the name of the function argument is irrelevant as far as the caller is concerned. In other words, the first example above could replace <strong><span class="green7"><code>str</code></span></strong> with any other valid variable name, such as <strong><span class="green7"><code>the_function_argument</code></span></strong>, and it would work just the same:</p>
<p class="codelink"><a id="pf0168-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0168-04a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">def</span></strong> <span class="blue3">string_message</span>(the_function_argument <span class="ash">=</span> <span class="maroon">''</span>)
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">if</span></strong> the_function_argument<span class="ash">.</span>empty?
<strong><span class="navy">&gt;&gt;</span></strong>     <span class="maroon">"It's an empty string!"</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">else</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong>     <span class="maroon">"The string is nonempty."</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">end</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">=&gt; nil</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> string_message(<span class="maroon">""</span>)
<span class="green">It's an empty string!</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> string_message(<span class="maroon">"foobar"</span>)
<span class="green">The string is nonempty.</span></pre>
<section>
<h5 class="h5" id="lev32"><span epub:type="pagebreak" id="page_169"></span>Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">By replacing <strong><span class="green7"><code>FILL_IN</code></span></strong> with the appropriate comparison test shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex010">Listing 4.10</a>, define a method for testing palindromes. <em>Hint</em>: Use the comparison shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex09">Listing 4.9</a>.</p></li>
<li><p class="num">By running your palindrome tester on racecar and onomatopoeia, confirm that the first is a palindrome and the second isnt.</p></li>
<li><p class="num">By calling the <strong><span class="green7"><code>nil?</code></span></strong> method on <strong><span class="green7"><code>palindrome_tester("racecar")</code></span></strong>, confirm that its return value is <strong><span class="green7"><code>nil</code></span></strong> (i.e., calling <strong><span class="green7"><code>nil?</code></span></strong> on the result of the method should return <strong><span class="green7"><code>true</code></span></strong>). This is because the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex010">Listing 4.10</a> prints its responses instead of returning them.</p></li>
</ol>
<p class="ex-title" id="ch04ex010"><strong>Listing 4.10:</strong> A simple tester for palindromes.</p>
<p class="codelink"><a id="pf0169-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0169-02a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">def</span></strong> <span class="blue3">palindrome_tester</span>(s)
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">if</span></strong> <span class="red">FILL_IN</span>
<strong><span class="navy">&gt;&gt;</span></strong>     <span class="green1">puts</span> <span class="maroon">"It's a palindrome!"</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">else</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong>     <span class="green1">puts</span> <span class="maroon">"It's not a palindrome."</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">end</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong></pre>
</div>
</section>
</section>
<section>
<h4 class="h4" id="sec4_2_4">4.2.4 Back to the Title Helper</h4>
<p class="noindent">We are now in a position to understand the <strong><span class="green7"><code>full_title</code></span></strong> helper from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex02">Listing 4.2</a>,<sup><a id="ch04fn9a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn9" class="totri-footnote">9</a></sup> which appears with commented annotations in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex011">Listing 4.11</a>.</p>
<p class="footnote"><a id="ch04fn9" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn9a" class="totri-footnote">9</a>. Well, there will still be <em>one</em> thing left that we dont understand, which is how Rails ties this all together: mapping URLs to actions, making the <strong><span class="green7"><code>full_title</code></span></strong> helper available in views, etc. This is an interesting subject, and I encourage you to investigate it further, but knowing exactly <em>how</em> Rails works is not necessary when <em>using</em> Rails.<span epub:type="pagebreak" id="page_170"></span></p>
<p class="ex-title" id="ch04ex011"><strong>Listing 4.11:</strong> An annotated <strong><span class="green7"><code>title_helper</code></span></strong>.</p>
<pre class="pre2">app/helpers/application_helper.rb</pre>
<p class="codelink"><a id="pf0170-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0170-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">module</span></strong> <strong><span class="blue3">ApplicationHelper</span></strong>

  <span class="blue"># Returns the full title on a per-page basis.       # Documentation comment</span>
  <strong><span class="green">def</span></strong> <span class="blue3">full_title</span>(page_title <span class="ash">=</span> <span class="maroon">''</span>)                     <span class="blue"># Method def, optional arg</span>
    base_title <span class="ash">=</span> <span class="maroon">"Ruby on Rails Tutorial Sample App"</span>  <span class="blue"># Variable assignment</span>
    <strong><span class="green">if</span></strong> page_title<span class="ash">.</span>empty?                              <span class="blue"># Boolean test</span>
      base_title                                      <span class="blue"># Implicit return</span>
    <strong><span class="green">else</span></strong>
      page_title <span class="ash">+</span> <span class="maroon">" | "</span> <span class="ash">+</span> base_title                 <span class="blue"># String concatenation</span>
    <strong><span class="green">end</span></strong>
  <strong><span class="green">end</span></strong>
 <strong><span class="green">end</span></strong></pre>
</div>
<p class="indent">These elementsfunction definition (with an optional argument), variable assignment, boolean tests, control flow, and string concatenation<sup><a id="ch04fn10a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn10">10</a></sup>come together to make a compact helper method for use in our site layout. The final element is <strong><span class="green7"><code>module ApplicationHelper</code></span></strong>: Modules give us a way to package together related methods, which can then be <em>mixed in</em> to Ruby classes using <strong><span class="green7"><code>include</code></span></strong>. When writing ordinary Ruby, you often write modules and include them explicitly yourself, but in the case of a helper module Rails handles the inclusion for us. The result is that the <strong><span class="green7"><code>full_title</code></span></strong> method is automagically available in all our views.</p>
<p class="footnote"><a id="ch04fn10" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn10a">10</a>. Its tempting to use string interpolation insteadindeed, this was the technique used in all previous versions of the tutorialbut in fact the call to <strong><span class="green7"><code>provide</code></span></strong> converts the string into a so-called SafeBuffer object instead of an ordinary string. Interpolating and inserting into a view template then over-escapes any inserted HTML, so a title such as Helps on the way would be converted to Help&amp;amp;#39;s on the way. (Thanks to reader Jeremy Fleischman for pointing out this subtle issue.)</p>
</section>
</section>
<section>
<h3 class="h3" id="sec4_3">4.3 Other Data Structures</h3>
<p class="noindent">Although web apps are ultimately about strings, actually <em>making</em> those strings requires using other data structures as well. In this section, well learn about some Ruby data structures important for writing Rails applications.</p>
<section>
<h4 class="h4" id="sec4_3_1">4.3.1 Arrays and Ranges</h4>
<p class="noindent">An array is just a list of elements in a particular order. We havent discussed arrays yet in the Rails Tutorial, but understanding them gives a good foundation for understanding hashes (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_3_3">Section 4.3.3</a>) and for aspects of Rails data modeling (such as the <strong><span class="green7"><code>has_many</code></span></strong> association seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_3_3">Section 2.3.3</a> and covered more in depth in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch13.xhtml#sec13_1_3">Section 13.1.3</a>).<span epub:type="pagebreak" id="page_171"></span></p>
<p class="indent">So far weve spent a lot of time understanding strings, and theres a natural way to get from strings to arrays using the <strong><span class="green7"><code>split</code></span></strong> method:</p>
<p class="codelink"><a id="pf0171-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0171-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"foo bar baz"</span><span class="ash">.</span>split      <span class="blue"># Split a string into a three-element array.</span>
<span class="green">=&gt; ["foo", "bar", "baz"]</span></pre>
<p class="noindent">The result of this operation is an array of three strings. By default, <strong><span class="green7"><code>split</code></span></strong> divides a string into an array by splitting on whitespace, but you can split on nearly anything else as well:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"fooxbarxbaz"</span><span class="ash">.</span>split(<span class="maroon">'x'</span>)
<span class="green">=&gt; ["foo", "bar", "baz"]</span></pre>
<p class="indent">As is conventional in most computer languages, Ruby arrays are <em>zero-offset</em>, which means that the first element in the array has index 0, the second has index 1, and so on:</p>
<p class="codelink"><a id="pf0171-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0171-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> a <span class="ash">= [42</span>, <span class="ash">8</span>, <span class="ash">17]</span>
<span class="green">=&gt; [42, 8, 17]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">[0]</span>              <span class="blue"># Ruby uses square brackets for array access.</span>
<span class="green">=&gt; 42</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">[1]</span>
<span class="green">=&gt; 8</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">[2]</span>
<span class="green">=&gt; 17</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">[-1]</span>             <span class="blue"># Indices can even be negative!</span>
<span class="green">=&gt; 17</span></pre>
<p class="noindent">We see here that Ruby uses square brackets to access array elements. In addition to this bracket notation, Ruby offers synonyms for some commonly accessed elements:<sup><a id="ch04fn11a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn11">11</a></sup></p>
<p class="footnote"><a id="ch04fn11" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn11a">11</a>. The <strong><span class="green7"><code>second</code></span></strong> method used here isnt currently part of Ruby itself, but rather is added by Rails. It works in this case because the Rails console automatically includes the Rails extensions to Ruby.</p>
<p class="codelink"><a id="pf0172-01-z" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0172-01-za">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> a                  <span class="blue"># Just a reminder of what 'a' is</span>
<span class="green">=&gt; [42, 8, 17]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>first
<span class="green">=&gt; 42</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>second
<span class="green">=&gt; 8</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>last
<span class="green">=&gt; 17</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>last <span class="ash">==</span> a<span class="ash">[-1]</span>    <span class="blue"># Comparison using ==</span>
<span class="green">=&gt; true</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_172"></span>This last line introduces the equality comparison operator <strong><span class="green7"><code>==</code></span></strong>, which Ruby shares with many other languages, along with the associated <strong><span class="green7"><code>!=</code></span></strong> (not equal) and other operators:</p>
<p class="codelink"><a id="pf0172-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0172-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> x <span class="ash">=</span> a<span class="ash">.</span>length        <span class="blue"># Like strings, arrays respond to the 'length' method.</span>
<span class="green">=&gt; 3</span>
<strong><span class="navy">&gt;&gt;</span></strong> x <span class="ash">== 3</span>
<span class="green">=&gt; true</span>
<strong><span class="navy">&gt;&gt;</span></strong> x <span class="ash">== 1</span>
<span class="green">=&gt; false</span>
<strong><span class="navy">&gt;&gt;</span></strong> x <span class="ash">!= 1</span>
<span class="green">=&gt; true</span>
<strong><span class="navy">&gt;&gt;</span></strong> x <span class="ash">&gt;= 1</span>
<span class="green">=&gt; true</span>
<strong><span class="navy">&gt;&gt;</span></strong> x <span class="ash">&lt; 1</span>
<span class="green">=&gt; false</span></pre>
<p class="indent">In addition to <strong><span class="green7"><code>length</code></span></strong> (seen in the first line above), arrays respond to a wealth of other methods:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> a
<span class="green">=&gt; [42, 8, 17]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>empty?
<span class="green">=&gt; false</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>include?(<span class="ash">42</span>)
<span class="green">=&gt; true</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>sort
<span class="green">=&gt; [8, 17, 42]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>reverse
<span class="green">=&gt; [17, 8, 42]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>shuffle
<span class="green">=&gt; [17, 42, 8]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a
<span class="green">=&gt; [42, 8, 17]</span></pre>
<p class="noindent">Note that none of these methods changes <strong><span class="green7"><code>a</code></span></strong> itself. To <em>mutate</em> the array, use the corresponding bang methods (so called because the exclamation point is usually pronounced bang in this context):<span epub:type="pagebreak" id="page_173"></span></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> a
<span class="green">=&gt; [42, 8, 17]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>sort!
<span class="green">=&gt; [8, 17, 42]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a
<span class="green">=&gt; [8, 17, 42]</span></pre>
<p class="indent">You can also add to arrays with the <strong><span class="green7"><code>push</code></span></strong> method or its equivalent operator, <strong><span class="green7"><code>&lt;&lt;</code></span></strong>, called the shovel operator:</p>
<p class="codelink"><a id="pf0173-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0173-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>push(<span class="ash">6</span>)                  <span class="blue"># Pushing 6 onto an array</span>
<span class="green">=&gt; [42, 8, 17, 6]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a <span class="ash">&lt;&lt; 7</span>                     <span class="blue"># Pushing 7 onto an array</span>
<span class="green">=&gt; [42, 8, 17, 6, 7]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a <span class="ash">&lt;&lt;</span> <span class="maroon">"foo"</span> <span class="ash">&lt;&lt;</span> <span class="maroon">"bar"</span>        <span class="blue"># Chaining array pushes</span>
<span class="green">=&gt; [42, 8, 17, 6, 7, "foo", "bar"]</span></pre>
<p class="noindent">This last example shows that you can chain pushes together, and also that, unlike arrays in many other languages, Ruby arrays can contain a mixture of different types (in this case, integers and strings).</p>
<p class="indent">Earlier we saw <strong><span class="green7"><code>split</code></span></strong> convert a string to an array. We can also go the other way with the <strong><span class="green7"><code>join</code></span></strong> method:</p>
<p class="codelink"><a id="pf0173-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0173-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> a
<span class="green">=&gt; [42, 8, 17, 6, 7, "foo", "bar"]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>join                       <span class="blue"># Join on nothing.</span>
<span class="green">=&gt; "4281767foobar"</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">.</span>join(<span class="maroon">', '</span>)                 <span class="blue"># Join on comma-space.</span>
<span class="green">=&gt; "42, 8, 17, 6, 7, foo, bar"</span></pre>
<p class="indent">Closely related to arrays are <em>ranges</em>, which can probably most easily be understood by converting them to arrays using the <strong><span class="green7"><code>to_a</code></span></strong> method:</p>
<p class="codelink"><a id="pf0173-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0173-04a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="ash">0..9</span>
<span class="green">=&gt; 0..9</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="ash">0..9.</span>to_a              <span class="blue"># Oops, call to_a on 9.</span>
<span class="green">NoMethodError: undefined method `to_a' for 9:Fixnum</span>
<strong><span class="navy">&gt;&gt;</span></strong> (<span class="ash">0..9</span>)<span class="ash">.</span>to_a            <span class="blue"># Use parentheses to call to_a on the range.</span>
<span class="green">=&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></pre>
<p class="noindent">Though <strong><span class="green7"><code>0..9</code></span></strong> is a valid range, the second expression shows that we need to add parentheses to call a method on it.<span epub:type="pagebreak" id="page_174"></span></p>
<p class="indent">Ranges are useful for pulling out array elements:</p>
<p class="codelink"><a id="pf0174-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0174-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> a <span class="ash">=</span> <span class="green1">%w[foo bar baz quux]</span>         <span class="blue"># Use %w to make a string array.</span>
<span class="green">=&gt; ["foo", "bar", "baz", "quux"]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">[0..2]</span>
<span class="green">=&gt; ["foo", "bar", "baz"]</span></pre>
<p class="noindent">A particularly useful trick is to use the index -1 at the end of the range to select every element from the starting point to the end of the array without explicitly having to use the arrays length:</p>
<p class="codelink"><a id="pf0174-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0174-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> a <span class="ash">=</span> (<span class="ash">0..9</span>)<span class="ash">.</span>to_a
<span class="green">=&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">[2..</span>(a<span class="ash">.</span>length<span class="ash">-1</span>)<span class="ash">]</span>               <span class="blue"># Explicitly use the array's length.</span>
<span class="green">=&gt; [2, 3, 4, 5, 6, 7, 8, 9]</span>
<strong><span class="navy">&gt;&gt;</span></strong> a<span class="ash">[2..-1]</span>                         <span class="blue"># Use the index -1 trick.</span>
<span class="green">=&gt; [2, 3, 4, 5, 6, 7, 8, 9]</span></pre>
<p class="indent">Ranges also work with characters:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> (<span class="maroon">'a'</span><span class="ash">..</span><span class="maroon">'e'</span>)<span class="ash">.</span>to_a
<span class="green">=&gt; ["a", "b", "c", "d", "e"]</span></pre>
<section>
<h5 class="h5" id="lev33">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Assign <strong><span class="green7"><code>a</code></span></strong> to be to the result of splitting the string A man, a plan, a canal, Panama on comma-space.</p></li>
<li><p class="num">Assign <strong><span class="green7"><code>s</code></span></strong> to the string resulting from joining <strong><span class="green7"><code>a</code></span></strong> on nothing.</p></li>
<li><p class="num">Split <strong><span class="green7"><code>s</code></span></strong> on whitespace and rejoin on nothing. Use the palindrome test from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex010">Listing 4.10</a> to confirm that the resulting string <strong><span class="green7"><code>s</code></span></strong> is <em>not</em> a palindrome by the current definition. Using the <strong><span class="green7"><code>downcase</code></span></strong> method, show that <strong><span class="green7"><code>s.downcase</code></span></strong> <em>is</em> a palindrome.</p></li>
<li><p class="num">What is the result of selecting element 7 from the range of letters <strong><span class="green7"><code>a</code></span></strong> through <strong><span class="green7"><code>z</code></span></strong>? What about the same range reversed? <em>Hint</em>: In both cases you will have to convert the range to an array.<span epub:type="pagebreak" id="page_175"></span></p></li>
</ol>
</section>
</section>
<section>
<h4 class="h4" id="sec4_3_2">4.3.2 Blocks</h4>
<p class="noindent">Both arrays and ranges respond to a host of methods that accept <em>blocks</em>, which are simultaneously one of Rubys most powerful and most confusing features:</p>
<p class="codelink"><a id="pf0175-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0175-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> (<span class="ash">1..5</span>)<span class="ash">.</span>each { <span class="ash">|</span>i<span class="ash">|</span> <span class="green1">puts</span> <span class="ash">2 *</span> i }
<span class="green">2</span>
<span class="green">4</span>
<span class="green">6</span>
<span class="green">8</span>
<span class="green">10</span>
<span class="green">=&gt; 1..5</span></pre>
<p class="noindent">This code calls the <strong><span class="green7"><code>each</code></span></strong> method on the range <strong><span class="green7"><code>(1..5)</code></span></strong> and passes it the block <strong><span class="green7"><code>{ |i| puts 2 * i }</code></span></strong>. The vertical bars around the variable name in <strong><span class="green7"><code>|i|</code></span></strong> are Ruby syntax for a block variable, and its up to the method to know what to do with the block. In this case, the ranges <strong><span class="green7"><code>each</code></span></strong> method can handle a block with a single local variable, which weve called <strong><span class="green7"><code>i</code></span></strong>, and it just executes the block for each value in the range.</p>
<p class="indent">Curly braces are one way to indicate a block, but there is a second way as well:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> (<span class="ash">1..5</span>)<span class="ash">.</span>each <strong><span class="green">do</span></strong> <span class="ash">|</span>i<span class="ash">|</span>
<strong><span class="navy">?&gt;</span></strong>   <span class="green1">puts</span> <span class="ash">2 *</span> i
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">2</span>
<span class="green">4</span>
<span class="green">6</span>
<span class="green">8</span>
<span class="green">10</span>
<span class="green">=&gt; 1..5</span>
</pre>
<p class="indent">Blocks can be more than one line, and often are. In the Rails Tutorial well follow the common convention of using curly braces only for short one-line blocks and the <strong><span class="green7"><code>do..end</code></span></strong> syntax for longer one-liners and for multi-line blocks:</p>
<p class="codelink"><a id="pf0176-01-z" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0176-01-za">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> (<span class="ash">1..5</span>)<span class="ash">.</span>each <strong><span class="green">do</span></strong> <span class="ash">|</span>number<span class="ash">|</span>
<strong><span class="navy">?&gt;</span></strong>   <span class="green1">puts</span> <span class="ash">2 *</span> number
<strong><span class="navy">&gt;&gt;</span></strong>   <span class="green1">puts</span> <span class="maroon">'--'</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">2</span>
<span class="green">--</span>
<span class="green">4</span>
<span class="green">--</span>
<span class="green">6</span>
<span class="green">--</span>
<span class="green">8</span>
<span class="green">--</span>
<span class="green">10</span>
<span class="green">--</span>
<span class="green">=&gt; 1..5</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_176"></span>Here Ive used <strong><span class="green7"><code>number</code></span></strong> in place of <strong><span class="green7"><code>i</code></span></strong> just to emphasize that any variable name will do.</p>
<p class="indent">Unless you already have a substantial programming background, there is no shortcut to understanding blocks; you just have to see them a lot, and eventually youll get used to them.<sup><a id="ch04fn12a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn12">12</a></sup> Luckily, humans are quite good at making generalizations from concrete examples; here are a few more, including a couple using the <strong><span class="green7"><code>map</code></span></strong> method:</p>
<p class="footnote"><a id="ch04fn12" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn12a">12</a>. Programming experts, on the other hand, might benefit from knowing that blocks are <em>closures</em>, which are one-shot anonymous functions with data attached.</p>
<p class="codelink"><a id="pf0176-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0176-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="ash">3.</span>times { <span class="green1">puts</span> <span class="maroon">"Betelgeuse!"</span> }   <span class="blue"># 3.times takes a block with no variables.</span>
<span class="green">"Betelgeuse!"</span>
<span class="green">"Betelgeuse!"</span>
<span class="green">"Betelgeuse!"</span>
<span class="green">=&gt; 3</span>
<strong><span class="navy">&gt;&gt;</span></strong> (<span class="ash">1..5</span>)<span class="ash">.</span>map { <span class="ash">|</span>i<span class="ash">|</span> i<span class="ash">**2</span> }          <span class="blue"># The ** notation is for 'power'.</span>
<span class="green">=&gt; [1, 4, 9, 16, 25]</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">%w[a b c]</span>                        <span class="blue"># Recall that %w makes string arrays.</span>
<span class="green">=&gt; ["a", "b", "c"]</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">%w[a b c]</span><span class="ash">.</span>map { <span class="ash">|</span>char<span class="ash">|</span> char<span class="ash">.</span>upcase }
<span class="green">=&gt; ["A", "B", "C"]</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">%w[A B C]</span><span class="ash">.</span>map { <span class="ash">|</span>char<span class="ash">|</span> char<span class="ash">.</span>downcase }
<span class="green">=&gt; ["a", "b", "c"]</span></pre>
<p class="noindent">As you can see, the <strong><span class="green7"><code>map</code></span></strong> method returns the result of applying the given block to each element in the array or range. In the final two examples, the block inside <strong><span class="green7"><code>map</code></span></strong> calls a particular method on the block variable, and in this case theres a commonly used shorthand called symbol-to-proc:</p>
<p class="codelink"><a id="pf0176-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0176-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">%w[A B C]</span><span class="ash">.</span>map { <span class="ash">|</span>char<span class="ash">|</span> char<span class="ash">.</span>downcase }
<span class="green">=&gt; ["a", "b", "c"]</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">%w[A B C]</span><span class="ash">.</span>map(<span class="ash">&amp;</span><span class="violet">:downcase</span>)
<span class="green">=&gt; ["a", "b", "c"]</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_177"></span>(This strange-looking but compact code uses a <em>symbol</em>, which well discuss in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_3_3">Section 4.3.3</a>.) One interesting thing about this construction is that it was originally added to Ruby on Rails, and people liked it so much that it has now been incorporated into core Ruby.</p>
<p class="indent">As one final example of blocks, we can take a look at an individual test from the file in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex04">Listing 4.4</a>:</p>
<p class="codelink"><a id="pf0177-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0177-01a">Click here to view code image</a></p>
<pre class="pre1"><span class="mark"><span class="green3">test</span> <span class="red2">"should get home"</span> <strong><span class="green3">do</span></strong></span>
  get static_pages_home_url
  assert_response <span class="violet">:success</span>
  assert_select <span class="maroon">"title"</span>, <span class="maroon">"Ruby on Rails Tutorial Sample App"</span>
<strong><span class="green3">end</span></strong></pre>
<p class="noindent">Its not important to understand the details (and in fact <em>I</em> dont know the details offhand), but we can infer from the presence of the <strong><span class="green7"><code>do</code></span></strong> keyword that the body of the test is a block. The <strong><span class="green7"><code>test</code></span></strong> method takes in a string argument (the description) and a block, and then executes the body of the block as part of running the test suite.</p>
<p class="indent">By the way, were now in a position to understand the line of Ruby I threw into <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_4_2">Section 1.4.2</a> to generate random subdomains:<sup><a id="ch04fn13a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn13">13</a></sup></p>
<p class="footnote"><a id="ch04fn13" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn13a">13</a>. As noted in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01">Chapter 1</a>, in this case the code <strong><span class="green7"><code>('a'..'z').to_a.sample(8).join</code></span></strong> is an even more compact way of getting the same result.</p>
<p class="codelink"><a id="pf0177-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0177-02a">Click here to view code image</a></p>
<pre class="pre1">(<span class="maroon">'a'</span><span class="ash">..</span><span class="maroon">'z'</span>)<span class="ash">.</span>to_a<span class="ash">.</span>shuffle<span class="ash">[0..7].</span>join</pre>
<p class="indent">Lets build it up step-by-step:</p>
<p class="codelink"><a id="pf0177-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0177-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> (<span class="maroon">'a'</span><span class="ash">..</span><span class="maroon">'z'</span>)<span class="ash">.</span>to_a                     <span class="blue"># An alphabet array</span>
<span class="green">=&gt; ["a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o",</span>
<span class="green">"p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"]</span>
<strong><span class="navy">&gt;&gt;</span></strong> (<span class="maroon">'a'</span><span class="ash">..</span><span class="maroon">'z'</span>)<span class="ash">.</span>to_a<span class="ash">.</span>shuffle             <span class="blue"># Shuffle it.</span>
<span class="green">=&gt; ["c", "g", "l", "k", "h", "z", "s", "i", "n", "d", "y", "u", "t", "j", "q",</span>
<span class="green">"b", "r", "o", "f", "e", "w", "v", "m", "a", "x", "p"]</span>
<strong><span class="navy">&gt;&gt;</span></strong> (<span class="maroon">'a'</span><span class="ash">..</span><span class="maroon">'z'</span>)<span class="ash">.</span>to_a<span class="ash">.</span>shuffle<span class="ash">[0..7]</span>       <span class="blue"># Pull out the first eight elements.</span>
<span class="green">=&gt; ["f", "w", "i", "a", "h", "p", "c", "x"]</span>
<strong><span class="navy">&gt;&gt;</span></strong> (<span class="maroon">'a'</span><span class="ash">..</span><span class="maroon">'z'</span>)<span class="ash">.</span>to_a<span class="ash">.</span>shuffle<span class="ash">[0..7].</span>join  <span class="blue"># Join them together to make one string.</span>
<span class="green">=&gt; "mznpybuj"</span></pre>
<section>
<h5 class="h5" id="lev34"><span epub:type="pagebreak" id="page_178"></span>Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Using the range <strong><span class="green7"><code>0..16</code></span></strong>, print out the first 17 powers of 2.</p></li>
<li><p class="num">Define a method called <strong><span class="green7"><code>yeller</code></span></strong> that takes in an array of characters and returns a string with an ALLCAPS version of the input. Verify that <strong><span class="green7"><code>yeller(['o', 'l', 'd'])</code></span></strong> returns <strong><span class="green7"><code>"OLD"</code></span></strong>. <em>Hint</em>: Combine <strong><span class="green7"><code>map</code></span></strong>, <strong><span class="green7"><code>upcase</code></span></strong>, and <strong><span class="green7"><code>join</code></span></strong>.</p></li>
<li><p class="num">Define a method called <strong><span class="green7"><code>random_subdomain</code></span></strong> that returns a randomly generated string of eight letters.</p></li>
<li><p class="num">By replacing the question marks in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex012">Listing 4.12</a> with the appropriate methods, combine <strong><span class="green7"><code>split</code></span></strong>, <strong><span class="green7"><code>shuffle</code></span></strong>, and <strong><span class="green7"><code>join</code></span></strong> to write a function that shuffles the letters in a given string.</p></li>
</ol>
<p class="ex-title" id="ch04ex012"><strong>Listing 4.12:</strong> Skeleton for a string shuffle function.</p>
<div class="example">
<pre><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">def</span></strong> <span class="blue3">string_shuffle</span>(s)
<strong><span class="navy">&gt;&gt;</span></strong>   s<span class="ash">.</span><span class="maroon">?(''</span>)<span class="ash">.</span><span class="maroon">?.</span>?
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong> string_shuffle(<span class="maroon">"foobar"</span>)
<span class="green">=&gt; "oobfra"</span></pre>
</div>
</section>
</section>
<section>
<h4 class="h4" id="sec4_3_3">4.3.3 Hashes and Symbols</h4>
<p class="noindent">Hashes are essentially arrays that arent limited to integer indices. (In fact, some languages, especially Perl, sometimes call hashes <em>associative arrays</em> for this reason.) Instead, hash indices, or <em>keys</em>, can be almost any object. For example, we can use strings as keys:</p>
<p class="codelink"><a id="pf0179-01-z" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0179-01-za">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> user <span class="ash">=</span> {}                          <span class="blue"># {} is an empty hash.</span>
<span class="green">=&gt; {}</span>
<strong><span class="navy">&gt;&gt;</span></strong> user<span class="ash">[</span><span class="maroon">"first_name"</span><span class="ash">] =</span> <span class="maroon">"Michael"</span>     <span class="blue"># Key "first_name", value "Michael"</span>
<span class="green">=&gt; "Michael"</span>
<strong><span class="navy">&gt;&gt;</span></strong> user<span class="ash">[</span><span class="maroon">"last_name"</span><span class="ash">] =</span> <span class="maroon">"Hartl"</span>        <span class="blue"># Key "last_name", value "Hartl"</span>
<span class="green">=&gt; "Hartl"</span>
<strong><span class="navy">&gt;&gt;</span></strong> user<span class="ash">[</span><span class="maroon">"first_name"</span><span class="ash">]</span>                 <span class="blue"># Element access is like arrays.</span>
<span class="green">=&gt; "Michael"</span>
<strong><span class="navy">&gt;&gt;</span></strong> user                               <span class="blue"># A literal representation of the hash</span>
<span class="green">=&gt; {"last_name"=&gt;"Hartl", "first_name"=&gt;"Michael"}</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_179"></span>Hashes are indicated with curly braces containing key-value pairs; a pair of braces with no key-value pairsthat is, <strong><span class="green7"><code>{}</code></span></strong>is an empty hash. Its important to note that the curly braces for hashes have nothing to do with the curly braces for blocks. (Yes, this can be confusing.) Although hashes resemble arrays, one important difference is that hashes dont generally guarantee that they will keep their elements in a particular order.<sup><a id="ch04fn14a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn14">14</a></sup> If order matters, use an array.</p>
<p class="footnote"><a id="ch04fn14" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn14a">14</a>. Ruby versions 1.9 and later actually guarantee that hashes keep their elements in the same order entered, but it would be unwise ever to count on a particular ordering.</p>
<p class="indent">Instead of defining hashes one item at a time using square brackets, its easy to use a literal representation with keys and values separated by <strong><span class="green7"><code>=&gt;</code></span></strong>, called a hashrocket:</p>
<p class="codelink"><a id="pf0179-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0179-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> user <span class="ash">=</span> { <span class="maroon">"first_name"</span> <span class="ash">=&gt;</span> <span class="maroon">"Michael"</span>, <span class="maroon">"last_name"</span> <span class="ash">=&gt;</span> <span class="maroon">"Hartl"</span> }
<span class="green">=&gt; {"last_name"=&gt;"Hartl", "first_name"=&gt;"Michael"}</span></pre>
<p class="noindent">Here Ive used the usual Ruby convention of putting an extra space at the two ends of the hasha convention ignored by the console output. (Dont ask me why the spaces are conventional; probably some early influential Ruby programmer liked the look of the extra spaces, and the convention stuck.)</p>
<p class="indent">So far weve used strings as hash keys, but in Rails it is much more common to use <em>symbols</em> instead. Symbols look kind of like strings, but are prefixed with a colon instead of surrounded by quotes. For example, <strong><span class="green7"><code>:name</code></span></strong> is a symbol. You can think of symbols as basically strings without all the extra baggage.<sup><a id="ch04fn15a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn15">15</a></sup></p>
<p class="footnote"><a id="ch04fn15" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn15a">15</a>. As a result of having less baggage, symbols are easier to compare to each other; strings need to be compared character by character, while symbols can be compared all in one go. This makes them ideal for use as hash keys.</p>
<p class="codelink"><a id="pf0179-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0179-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"name"</span><span class="ash">.</span>split(<span class="maroon">''</span>)
<span class="green">=&gt; ["n", "a", "m", "e"]</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="violet">:name</span><span class="ash">.</span>split(<span class="maroon">''</span>)
<span class="green">NoMethodError: undefined method `split' for :name:Symbol</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"foobar"</span><span class="ash">.</span>reverse
<span class="green">=&gt; "raboof"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="violet">:foobar</span><span class="ash">.</span>reverse
<span class="green">NoMethodError: undefined method `reverse' for :foobar:Symbol</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_180"></span>Symbols are a special Ruby data type shared with very few other languages, so they may seem weird at first, but Rails uses them a lot, so youll get used to them fast. Unlike strings, not all characters are valid:</p>
<p class="codelink"><a id="pf0180-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0180-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="violet">:foo</span><span class="ash">-</span>bar
<span class="green">NameError: undefined local variable or method `bar' for main:Object</span>
<strong><span class="navy">&gt;&gt;</span></strong> :<span class="ash">2</span>foo
<span class="green">SyntaxError</span></pre>
<p class="noindent">As long as you start your symbols with a letter and stick to normal word characters, you should be fine.</p>
<p class="indent">In terms of symbols as hash keys, we can define a <strong><span class="green7"><code>user</code></span></strong> hash as follows:</p>
<p class="codelink"><a id="pf0180-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0180-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> user <span class="ash">=</span> { <span class="violet">:name</span> <span class="ash">=&gt;</span> <span class="maroon">"Michael Hartl"</span>, <span class="violet">:email</span> <span class="ash">=&gt;</span> <span class="maroon">"michael@example.com"</span> }
<span class="green">=&gt; {:name=&gt;"Michael Hartl", :email=&gt;"michael@example.com"}</span>
<strong><span class="navy">&gt;&gt;</span></strong> user<span class="ash">[</span><span class="violet">:name</span><span class="ash">]</span>              <span class="blue"># Access the value corresponding to :name.</span>
<span class="green">=&gt; "Michael Hartl"</span>
<strong><span class="navy">&gt;&gt;</span></strong> user<span class="ash">[</span><span class="violet">:password</span><span class="ash">]</span>          <span class="blue"># Access the value of an undefined key.</span>
<span class="green">=&gt; nil</span></pre>
<p class="noindent">We see here from the last example that the hash value for an undefined key is simply <strong><span class="green7"><code>nil</code></span></strong>.</p>
<p class="indent">Because its so common for hashes to use symbols as keys, version 1.9 Ruby supports a new syntax just for this special case:</p>
<p class="codelink"><a id="pf0180-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0180-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> h1 <span class="ash">=</span> { <span class="violet">:name</span> <span class="ash">=&gt;</span> <span class="maroon">"Michael Hartl"</span>, <span class="violet">:email</span> <span class="ash">=&gt;</span> <span class="maroon">"michael@example.com"</span> }
<span class="green">=&gt; {:name=&gt;"Michael Hartl", :email=&gt;"michael@example.com"}</span>
<strong><span class="navy">&gt;&gt;</span></strong> h2 <span class="ash">=</span> { <span class="green1">name</span>: <span class="maroon">"Michael Hartl"</span>, <span class="violet">email</span>: <span class="maroon">"michael@example.com"</span> }
<span class="green">=&gt; {:name=&gt;"Michael Hartl", :email=&gt;"michael@example.com"}</span>
<strong><span class="navy">&gt;&gt;</span></strong> h1 <span class="ash">==</span> h2
<span class="green">=&gt; true</span></pre>
<p class="noindent">The second syntax replaces the symbol/hashrocket combination with the name of the key followed by a colon and a value:</p>
<p class="codelink"><a id="pf0180-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0180-04a">Click here to view code image</a></p>
<pre class="pre1">{ <span class="green1">name</span>: <span class="maroon">"Michael Hartl"</span>, <span class="violet">email</span>: <span class="maroon">"michael@example.com"</span> }</pre>
<p class="noindent">This construction more closely follows the hash notation in other languages (such as JavaScript) and enjoys growing popularity in the Rails community. Because both<span epub:type="pagebreak" id="page_181"></span> hash syntaxes are still in common use, its essential to be able to recognize both of them. Unfortunately, this can be confusing, especially since <strong><span class="green7"><code>:name</code></span></strong> is valid on its own (as a stand-alone symbol) but <strong><span class="green7"><code>name:</code></span></strong> has no meaning by itself. The bottom line is that <strong><span class="green7"><code>:name =&gt;</code></span></strong> and <strong><span class="green7"><code>name:</code></span></strong> are effectively the same <em>only inside literal hashes</em>, so that</p>
<pre class="pre1">{ <span class="violet">:name</span> <span class="ash">=&gt;</span> <span class="maroon">"Michael Hartl"</span> }</pre>
<p class="noindent">and</p>
<pre class="pre1">{ <span class="green1">name</span>: <span class="maroon">"Michael Hartl"</span> }</pre>
<p class="noindent">are equivalent, but otherwise you need to use <strong><span class="green7"><code>:name</code></span></strong> (with the colon coming first) to denote a symbol.</p>
<p class="indent">Hash values can be virtually anything, even other hashes, as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex013">Listing 4.13</a>.</p>
<p class="ex-title" id="ch04ex013"><strong>Listing 4.13:</strong> Nested hashes.</p>
<p class="codelink"><a id="pf0181-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0181-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="navy">&gt;&gt;</span></strong> params <span class="ash">=</span> {}        <span class="blue"># Define a hash called 'params' (short for 'parameters').</span>
<span class="green">=&gt; {}</span>
<strong><span class="navy">&gt;&gt;</span></strong> params<span class="ash">[</span><span class="violet">:user</span><span class="ash">] =</span> { <span class="green1">name</span>: <span class="maroon">"Michael Hartl"</span>, <span class="violet">email</span>: <span class="maroon">"mhartl@example.com"</span> }
<span class="green">=&gt; {:name=&gt;"Michael Hartl", :email=&gt;"mhartl@example.com"}</span>
<strong><span class="navy">&gt;&gt;</span></strong> params
<span class="green">=&gt; {:user=&gt;{:name=&gt;"Michael Hartl", :email=&gt;"mhartl@example.com"}}</span>
<strong><span class="navy">&gt;&gt;</span></strong> params<span class="ash">[</span><span class="violet">:user</span><span class="ash">][</span><span class="violet">:email</span><span class="ash">]</span>
<span class="green">=&gt; "mhartl@example.com"</span></pre>
</div>
<p class="noindent">These sorts of hashes-of-hashes, or <em>nested hashes</em>, are heavily used by Rails, as well see starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_3">Section 7.3</a>.</p>
<p class="indent">Like arrays and ranges, hashes respond to the <strong><span class="green7"><code>each</code></span></strong> method. For example, consider a hash named <strong><span class="green7"><code>flash</code></span></strong> with keys for two conditions, <strong><span class="green7"><code>:success</code></span></strong> and <strong><span class="green7"><code>:danger</code></span></strong>:</p>
<p class="codelink"><a id="pf0181-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0181-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> flash <span class="ash">=</span> { <span class="violet">success</span>: <span class="maroon">"It worked!"</span>, <span class="violet">danger</span>: <span class="maroon">"It failed."</span> }
<span class="green">=&gt; {:success=&gt;"It worked!", :danger=&gt;"It failed."}</span>
<strong><span class="navy">&gt;&gt;</span></strong> flash<span class="ash">.</span>each <strong><span class="green">do</span></strong> <span class="ash">|</span>key, value<span class="ash">|</span>
<strong><span class="navy">?&gt;</span></strong>   <span class="green1">puts</span> <span class="maroon">"Key</span> <strong><span class="red6">#{</span></strong>key<span class="ash">.</span>inspect<strong><span class="pink">}</span></strong> <span class="maroon">has value</span> <strong><span class="pink">#{</span></strong>value<span class="ash">.</span>inspect<strong><span class="pink">}</span></strong><span class="maroon">"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">Key :success has value "It worked!"</span>
<span class="green">Key :danger has value "It failed."</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_182"></span>Note that, while the <strong><span class="green7"><code>each</code></span></strong> method for arrays takes a block with only one variable, <strong><span class="green7"><code>each</code></span></strong> for hashes takes two, a <em>key</em> and a <em>value</em>. Thus, the <strong><span class="green7"><code>each</code></span></strong> method for a hash iterates through the hash one key-value <em>pair</em> at a time.</p>
<p class="indent">The last example uses the useful <strong><span class="green7"><code>inspect</code></span></strong> method, which returns a string with a literal representation of the object its called on:</p>
<p class="codelink"><a id="pf0182-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0182-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> (<span class="ash">1..5</span>)<span class="ash">.</span>to_a             <span class="blue"># Put an array as a string.</span>
<span class="green">1</span>
<span class="green">2</span>
<span class="green">3</span>
<span class="green">4</span>
<span class="green">5</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> (<span class="ash">1..5</span>)<span class="ash">.</span>to_a<span class="ash">.</span>inspect     <span class="blue"># Put a literal array.</span>
<span class="green">[1, 2, 3, 4, 5]</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> <span class="violet">:name</span>, <span class="violet">:name</span><span class="ash">.</span>inspect
<span class="green">name</span>
<span class="green">:name</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">puts</span> <span class="maroon">"It worked!"</span>, <span class="maroon">"It worked!"</span><span class="ash">.</span>inspect
<span class="green">It worked!</span>
<span class="green">"It worked!"</span></pre>
<p class="noindent">By the way, using <strong><span class="green7"><code>inspect</code></span></strong> to print an object is common enough that theres a shortcut for it, the <strong><span class="green7"><code>p</code></span></strong> function:<sup><a id="ch04fn16a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn16">16</a></sup></p>
<p class="footnote"><a id="ch04fn16" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn16a">16</a>. Theres actually a subtle difference, which is that <strong><span class="green7"><code>p</code></span></strong> returns the object being printed while <strong><span class="green7"><code>puts</code></span></strong> always returns <strong><span class="green7"><code>nil</code></span></strong>. (Thanks to reader Katarzyna Siwek for pointing this out.)</p>
<p class="codelink"><a id="pf0182-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0182-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">p</span> <span class="violet">:name</span>     <span class="blue"># Same output as 'puts :name.inspect'</span>
<span class="green">:name</span></pre>
<section>
<h5 class="h5" id="lev35">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Define a hash with the keys <strong><span class="green7"><code>'one'</code></span></strong>, <strong><span class="green7"><code>'two'</code></span></strong>, and <strong><span class="green7"><code>'three'</code></span></strong>, and the values <strong><span class="green7"><code>'uno'</code></span></strong>, <strong><span class="green7"><code>'dos'</code></span></strong>, and <strong><span class="green7"><code>'tres'</code></span></strong>. Iterate over the hash, and for each key-value pair print out <strong><span class="green7"><code>"'#{key}' in Spanish is '#{value}'"</code></span></strong>.<span epub:type="pagebreak" id="page_183"></span></p></li>
<li><p class="num">Create three hashes called <strong><span class="green7"><code>person1</code></span></strong>, <strong><span class="green7"><code>person2</code></span></strong>, and <strong><span class="green7"><code>person3</code></span></strong>, with first and last names under the keys <strong><span class="green7"><code>:first</code></span></strong> and <strong><span class="green7"><code>:last</code></span></strong>. Then create a <strong><span class="green7"><code>params</code></span></strong> hash so that <strong><span class="green7"><code>params[:father]</code></span></strong> is <strong><span class="green7"><code>person1</code></span></strong>, <strong><span class="green7"><code>params[:mother]</code></span></strong> is <strong><span class="green7"><code>person2</code></span></strong>, and <strong><span class="green7"><code>params[:child]</code></span></strong> is <strong><span class="green7"><code>person3</code></span></strong>. Verify that, for example, <strong><span class="green7"><code>params[:father][:first]</code></span></strong> has the right value.</p></li>
<li><p class="num">Define a hash with symbol keys corresponding to name, email, and a password digest, and values equal to your name, your email address, and a random string of 16 lowercase letters.</p></li>
<li><p class="num">Find an online version of the Ruby API and read about the Hash method <strong><span class="green7"><code>merge</code></span></strong>. What is the value of the following expression?</p>
<p class="codelink"><a id="pf0183-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0183-01a">Click here to view code image</a></p>
<pre class="pre1">{ <span class="maroon">"a"</span> <span class="ash">=&gt; 100</span>, <span class="maroon">"b"</span> <span class="ash">=&gt; 200</span> }<span class="ash">.</span>merge({ <span class="maroon">"b"</span> <span class="ash">=&gt; 300</span> })</pre></li>
</ol>
</section>
</section>
<section>
<h4 class="h4" id="sec4_3_4">4.3.4 CSS Revisited</h4>
<p class="noindent">Its time now to revisit the line from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex01">Listing 4.1</a> used in the layout to include the Cascading Style Sheets:</p>
<p class="codelink"><a id="pf0183-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0183-02a">Click here to view code image</a></p>
<pre class="pre1"><span class="red5">&lt;%=</span> stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                       <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span> <span class="red5">%&gt;</span></pre>
<p class="indent">We are now nearly in a position to understand this. As mentioned briefly in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_1">Section 4.1</a>, Rails defines a special function to include stylesheets, and</p>
<p class="codelink"><a id="pf0183-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0183-03a">Click here to view code image</a></p>
<pre class="pre1">stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                   <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span></pre>
<p class="noindent">is a call to this function. But there are several mysteries. First, where are the parentheses? In Ruby, they are optional, so these two are equivalent:</p>
<p class="codelink"><a id="pf0183-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0183-04a">Click here to view code image</a></p>
<pre class="pre1"><span class="blue"># Parentheses on function calls are optional.</span>
<span class="blue"># This:</span>
stylesheet_link_tag(<span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                   <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span>)
<span class="blue"># is the same as this:</span>
stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                   <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span></pre>
<p class="indent"><span epub:type="pagebreak" id="page_184"></span>Second, the <strong><span class="green7"><code>media</code></span></strong> argument sure looks like a hash, but where are the curly braces? When hashes are the <em>last</em> argument in a function call, the curly braces are optional, so these two are equivalent:</p>
<p class="codelink"><a id="pf0184-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0184-01a">Click here to view code image</a></p>
<pre class="pre1"><span class="blue"># Curly braces on final hash arguments are optional.</span>
<span class="blue"># This:</span>
stylesheet_link_tag <span class="maroon">'application'</span>, { <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                     <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span> }
<span class="blue"># is the same as this:</span>
  stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                     <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span></pre>
<p class="indent">Finally, why does Ruby correctly interpret the lines</p>
<p class="codelink"><a id="pf0184-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0184-02a">Click here to view code image</a></p>
<pre class="pre1">stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                   <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span></pre>
<p class="noindent">even with a line break between the final elements? The answer is that Ruby doesnt distinguish between newlines and other whitespace in this context.<sup><a id="ch04fn17a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn17">17</a></sup> The <em>reason</em> I chose to break the code into pieces is that I prefer to keep lines of source code to fewer than 80 characters for legibility.<sup><a id="ch04fn18a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn18">18</a></sup></p>
<p class="footnote"><a id="ch04fn17" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn17a">17</a>. A newline is what comes at the end of a line, thereby starting a new line. As noted in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_2_1">Section 4.2.1</a>, it is typically represented by the character <strong><span class="green7"><code>\n</code></span></strong>.</p>
<p class="footnote"><a id="ch04fn18" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn18a">18</a>. Constantly having to check the column number is rather inconvenient, so many text editors have a visual aid to help you. For example, if you take a look back at <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01fig012">Figure 1.12</a>, you may be able to make out the small vertical line on the right side of the screen, which is designed to help keep code under 80 characters. (Its very subtle, so you may not be able to see it in the screenshot.) The cloud IDE (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_1_1">Section 1.1.1</a>) includes such a line by default. In Sublime Text, you can use <code>View &gt; Ruler &gt; 78</code> or <code>View &gt; Ruler &gt; 80</code>.</p>
<p class="indent">So, we see now that the line</p>
<p class="codelink"><a id="pf0184-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0184-03a">Click here to view code image</a></p>
<pre class="pre1">stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                   <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span></pre>
<p class="noindent">calls the <strong><span class="green7"><code>stylesheet_link_tag</code></span></strong> function with two arguments: a string, indicating the path to the stylesheet, and a hash with two elements, indicating the media type and telling Rails to use the turbolinks feature added in Rails 4.0. Because of the <strong><span class="green7"><code>&lt;%= ... %&gt;</code></span></strong> brackets, the results are inserted into the template by ERb, and if you view the source of the page in your browser you should see the HTML needed to include a stylesheet (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex014">Listing 4.14</a>). (The extra stuff in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex014">Listing 4.14</a>, like <strong><span class="green7"><code>?body=1</code></span></strong> and the long string of hexadecimal digits are, inserted by Rails to ensure that browsers reload the CSS when it changes on the server. Because the hex string is by design unique, your exact version of <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex014">Listing 4.14</a> will differ.)<span epub:type="pagebreak" id="page_185"></span></p>
<p class="ex-title" id="ch04ex014"><strong>Listing 4.14:</strong> The HTML source produced by the CSS includes.</p>
<p class="codelink"><a id="pf0185-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0185-01a">Click here to view code image</a></p>
<div class="example">
<pre>&lt;<strong><span class="green">link</span></strong> <span class="ash3">rel</span><span class="ash">=</span><span class="maroon">"stylesheet"</span> <span class="ash3">media</span><span class="ash">=</span><span class="maroon">"all"</span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"/assets/application.self-</span>
<span class="maroon">f0d704deea029cf000697e2c0181ec173a1b474645466ed843eb5ee7bb215794.</span><span class="maroon">css?body=1"</span>
<span class="ash3">data-turbolinks-track</span><span class="ash">=</span><span class="maroon">"reload"</span> /&gt;</pre>
</div>
</section>
</section>
<section>
<h3 class="h3" id="sec4_4">4.4 Ruby Classes</h3>
<p class="noindent">Weve said before that everything in Ruby is an object, and in this section well finally get to define some of our own. Ruby, like many object-oriented languages, uses <em>classes</em> to organize methods; these classes are then <em>instantiated</em> to create objects. If youre new to object-oriented programming, this may sound like gibberish, so lets look at some concrete examples.</p>
<section>
<h4 class="h4" id="sec4_4_1">4.4.1 Constructors</h4>
<p class="noindent">Weve seen lots of examples of using classes to instantiate objects, but we have yet to do so explicitly. For example, we instantiated a string using the double quote characters, which is a <em>literal constructor</em> for strings:</p>
<p class="codelink"><a id="pf0185-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0185-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> s <span class="ash">=</span> <span class="maroon">"foobar"</span>             <span class="blue"># A literal constructor for strings using double quotes</span>
<span class="green">=&gt; "foobar"</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>class
<span class="green">=&gt; String</span></pre>
<p class="noindent">We see here that strings respond to the method <strong><span class="green7"><code>class</code></span></strong>, and simply return the class they belong to.</p>
<p class="indent">Instead of using a literal constructor, we can use the equivalent <em>named constructor</em>, which involves calling the <strong><span class="green7"><code>new</code></span></strong> method on the class name:<sup><a id="ch04fn19a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn19">19</a></sup></p>
<p class="footnote"><a id="ch04fn19" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn19a">19</a>. These results will vary based on the version of Ruby you are using. This example assumes you are using Ruby 1.9.3 or later.<span epub:type="pagebreak" id="page_186"></span></p>
<p class="codelink"><a id="pf0186-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0186-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> s <span class="ash">=</span> <span class="green1">String</span><span class="ash">.</span>new(<span class="maroon">"foobar"</span>)   <span class="blue"># A named constructor for a string</span>
<span class="green">=&gt; "foobar"</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>class
<span class="green">=&gt; String</span>
<strong><span class="navy">&gt;&gt;</span></strong> s <span class="ash">==</span> <span class="maroon">"foobar"</span>
<span class="green">=&gt; true</span></pre>
<p class="noindent">This is equivalent to the literal constructor, but its more explicit about what were doing.</p>
<p class="indent">Arrays work the same way as strings:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> a <span class="ash">=</span> <span class="green1">Array</span><span class="ash">.</span>new(<span class="ash">[1</span>, <span class="ash">3</span>, <span class="ash">2]</span>)
<span class="green">=&gt; [1, 3, 2]</span></pre>
<p class="noindent">Hashes, in contrast, are different. While the array constructor <strong><span class="green7"><code>Array.new</code></span></strong> takes an initial value for the array, <strong><span class="green7"><code>Hash.new</code></span></strong> takes a <em>default</em> value for the hash, which is the value of the hash for a nonexistent key:</p>
<p class="codelink"><a id="pf0186-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0186-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> h <span class="ash">=</span> <span class="red">Hash</span><span class="ash">.</span>new
<span class="green">=&gt; {}</span>
<strong><span class="navy">&gt;&gt;</span></strong> h<span class="ash">[</span><span class="violet">:foo</span><span class="ash">]</span>             <span class="blue"># Try to access the value for the nonexistent key :foo.</span>
<span class="green">=&gt; nil</span>
<strong><span class="navy">&gt;&gt;</span></strong> h <span class="ash">=</span> <span class="red">Hash</span><span class="ash">.</span>new(<span class="ash">0</span>)     <span class="blue"># Arrange for nonexistent keys to return 0 instead of nil.</span>
<span class="green">=&gt; {}</span>
<strong><span class="navy">&gt;&gt;</span></strong> h<span class="ash">[</span><span class="violet">:foo</span><span class="ash">]</span>
<span class="green">=&gt; 0</span></pre>
<p class="indent">When a method gets called on the class itself, as in the case of <strong><span class="green7"><code>new</code></span></strong>, its called a <em>class method</em>. The result of calling <strong><span class="green7"><code>new</code></span></strong> on a class is an object of that class, also called an <em>instance</em> of the class. A method called on an instance, such as <strong><span class="green7"><code>length</code></span></strong>, is called an <em>instance method</em>.</p>
<section>
<h5 class="h5" id="lev36">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">What is the literal constructor for the range of integers from 1 to 10?</p></li>
<li><p class="num">What is the constructor using the <strong><span class="green7"><code>Range</code></span></strong> class and the <strong><span class="green7"><code>new</code></span></strong> method? <em>Hint</em>: <strong><span class="green7"><code>new</code></span></strong> takes two arguments in this context.<span epub:type="pagebreak" id="page_187"></span></p></li>
<li><p class="num">Confirm using the <strong><span class="green7"><code>==</code></span></strong> operator that the literal and named constructors from the previous two exercises are identical.</p></li>
</ol></section>
</section>
<section>
<h4 class="h4" id="sec4_4_2">4.4.2 Class Inheritance</h4>
<p class="noindent">When learning about classes, its useful to find out the <em>class hierarchy</em> using the <strong><span class="green7"><code>superclass</code></span></strong> method:</p>
<p class="codelink"><a id="pf0187-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0187-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> s <span class="ash">=</span> <span class="green1">String</span><span class="ash">.</span>new(<span class="maroon">"foobar"</span>)
<span class="green">=&gt; "foobar"</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>class                        <span class="blue"># Find the class of s.</span>
<span class="green">=&gt; String</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>class<span class="ash">.</span>superclass             <span class="blue"># Find the superclass of String.</span>
<span class="green">=&gt; Object</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>class<span class="ash">.</span>superclass<span class="ash">.</span>superclass  <span class="blue"># Ruby has a BasicObject base class as of 1.9</span>
<span class="green">=&gt; BasicObject</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>class<span class="ash">.</span>superclass<span class="ash">.</span>superclass<span class="ash">.</span>superclass
<span class="green">=&gt; nil</span></pre>
<p class="noindent">A diagram of this inheritance hierarchy appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fig01">Figure 4.1</a>. We see here that the superclass of <strong><span class="green7"><code>String</code></span></strong> is <strong><span class="green7"><code>Object</code></span></strong> and the superclass of <strong><span class="green7"><code>Object</code></span></strong> is <strong><span class="green7"><code>BasicObject</code></span></strong>, but<span epub:type="pagebreak" id="page_188"></span> <strong><span class="green7"><code>BasicObject</code></span></strong> has no superclass. This pattern is true of every Ruby object: Trace back the class hierarchy far enough and every class in Ruby ultimately inherits from <strong><span class="green7"><code>BasicObject</code></span></strong>, which has no superclass itself. This is the technical meaning of everything in Ruby is an object.</p>
<figure id="ch04fig01" class="image-l">
<img src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/fig04_01.jpg" alt="Image" width="361" height="425" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig04_01.jpg">
<figcaption><p><strong>Figure 4.1:</strong> The inheritance hierarchy for the <strong><span class="green7"><code>String</code></span></strong> class.</p></figcaption>
</figure>
<p class="indent">To understand classes a little more deeply, theres no substitute for making one of our own. Lets make a <strong><span class="green7"><code>Word</code></span></strong> class with a <strong><span class="green7"><code>palindrome?</code></span></strong> method that returns <strong><span class="green7"><code>true</code></span></strong> if the word is the same spelled forward and backward:</p>
<p class="codelink"><a id="pf0188-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0188-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">class</span></strong> <strong><span class="blue3">Word</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">def</span></strong> <span class="blue3">palindrome?</span>(string)
<strong><span class="navy">&gt;&gt;</span></strong>     string <span class="ash">==</span> string<span class="ash">.</span>reverse
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">end</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">=&gt; :palindrome?</span></pre>
<p class="noindent">We can use it as follows:</p>
<p class="codelink"><a id="pf0188-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0188-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> w <span class="ash">=</span> <span class="red">Word</span><span class="ash">.</span>new              <span class="blue"># Make a new Word object.</span>
<span class="green">=&gt; #&lt;Word:0x22d0b20&gt;</span>
<strong><span class="navy">&gt;&gt;</span></strong> w<span class="ash">.</span>palindrome?(<span class="maroon">"foobar"</span>)
<span class="green">=&gt; false</span>
<strong><span class="navy">&gt;&gt;</span></strong> w<span class="ash">.</span>palindrome?(<span class="maroon">"level"</span>)
<span class="green">=&gt; true</span></pre>
<p class="indent">If this example strikes you as a bit contrived, goodthis is by design. Its odd to create a new class just to create a method that takes a string as an argument. Since a word <em>is a</em> string, its more natural to have our <strong><span class="green7"><code>Word</code></span></strong> class <em>inherit</em> from <strong><span class="green7"><code>String</code></span></strong>, as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex015">Listing 4.15</a>. (You should exit the console and re-enter it to clear out the old definition of <strong><span class="green7"><code>Word</code></span></strong>.)</p>
<p class="ex-title" id="ch04ex015"><strong>Listing 4.15:</strong> Defining a <strong><span class="green7"><code>Word</code></span></strong> class in the console.</p>
<p class="codelink"><a id="pf0188-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0188-03a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">class</span></strong> <strong><span class="blue3">Word</span></strong> <span class="ash">&lt;</span> <span class="green1">String</span>             <span class="blue"># Word inherits from String.</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <span class="blue"># Returns true if the string is its own reverse.</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">def</span></strong> <span class="blue3">palindrome?</span>
<strong><span class="navy">&gt;&gt;</span></strong>     <span class="green1">self</span> <span class="ash">==</span> <span class="green1">self</span><span class="ash">.</span>reverse        <span class="blue"># self is the string itself.</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">end</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">=&gt; nil</span></pre>
</div>
<p class="noindent"><span epub:type="pagebreak" id="page_189"></span>Here <strong><span class="green7"><code>Word &lt; String</code></span></strong> is the Ruby syntax for inheritance (discussed briefly in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_2">Section 3.2</a>), which ensures that, in addition to the new <strong><span class="green7"><code>palindrome?</code></span></strong> method, words have all the same methods as strings:</p>
<p class="codelink"><a id="pf0189-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0189-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> s <span class="ash">=</span> <span class="red">Word</span><span class="ash">.</span>new(<span class="maroon">"level"</span>)            <span class="blue"># Make a new Word, initialized with "level".</span>
<span class="green">=&gt; "level"</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>palindrome?                    <span class="blue"># Words have the palindrome? method.</span>
<span class="green">=&gt; true</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>length                         <span class="blue"># Words also inherit all the normal string methods.</span>
<span class="green">=&gt; 5</span></pre>
<p class="noindent">Since the <strong><span class="green7"><code>Word</code></span></strong> class inherits from <strong><span class="green7"><code>String</code></span></strong>, we can use the console to see the class hierarchy explicitly:</p>
<p class="codelink"><a id="pf0189-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0189-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>class
<span class="green">=&gt; Word</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>class<span class="ash">.</span>superclass
<span class="green">=&gt; String</span>
<strong><span class="navy">&gt;&gt;</span></strong> s<span class="ash">.</span>class<span class="ash">.</span>superclass<span class="ash">.</span>superclass
<span class="green">=&gt; Object</span></pre>
<p class="noindent">This hierarchy is illustrated in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fig02">Figure 4.2</a>.</p>
<figure id="ch04fig02" class="image-l">
<img src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/fig04_02.jpg" alt="Image" width="361" height="578" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig04_02.jpg">
<figcaption><p><strong>Figure 4.2:</strong> The inheritance hierarchy for the (non-built-in) <strong><span class="green7"><code>Word</code></span></strong> class from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex015">Listing 4.15</a>.</p></figcaption>
</figure>
<p class="indent">In <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex015">Listing 4.15</a>, note that checking that the word is its own reverse involves accessing the word inside the <strong><span class="green7"><code>Word</code></span></strong> class. Ruby allows us to do this using the <strong><span class="green7"><code>self</code></span></strong> keyword: Inside the <strong><span class="green7"><code>Word</code></span></strong> class, <strong><span class="green7"><code>self</code></span></strong> is the object itself, which means we can use</p>
<pre class="pre1"><span class="green1">self</span> <span class="ash">==</span> <span class="green1">self</span><span class="ash">.</span>reverse</pre>
<p class="noindent">to check if the word is a palindrome. In fact, inside the String class the use of <strong><span class="green7"><code>self.</code></span></strong> is optional on a method or attribute (unless were making an assignment), so</p>
<pre class="pre1"><span class="green1">self</span> <span class="ash">==</span> reverse</pre>
<p class="noindent">would work as well.</p>
<section>
<h5 class="h5" id="lev37">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.<span epub:type="pagebreak" id="page_190"></span></p>
<ol class="num">
<li><p class="num">What is the class hierarchy for a range? For a hash? For a symbol?</p></li>
<li><p class="num">Confirm that the method shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex015">Listing 4.15</a> works even if we replace <strong><span class="green7"><code>self.reverse</code></span></strong> with just <strong><span class="green7"><code>reverse</code></span></strong>.</p></li>
</ol></section>
</section>
<section>
<h4 class="h4" id="sec4_4_3">4.4.3 Modifying Built-in Classes</h4>
<p class="noindent">While inheritance is a powerful idea, in the case of palindromes it might be even more natural to add the <strong><span class="green7"><code>palindrome?</code></span></strong> method to the <strong><span class="green7"><code>String</code></span></strong> class itself, so that (among other things) we can call <strong><span class="green7"><code>palindrome?</code></span></strong> on a string literal, which we currently cant do:<span epub:type="pagebreak" id="page_191"></span></p>
<p class="codelink"><a id="pf0191-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0191-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"level"</span><span class="ash">.</span>palindrome?
<span class="green">NoMethodError: undefined method `palindrome?' for "level":String</span></pre>
<p class="noindent">Amazingly, Ruby lets you do just this. Ruby classes can be <em>opened</em> and modified, allowing ordinary mortals such as ourselves to add methods to them:</p>
<p class="codelink"><a id="pf0191-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0191-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">class</span></strong> <strong><span class="blue3">String</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong>   <span class="blue"># Returns true if the string is its own reverse.</span>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">def</span></strong> <span class="blue3">palindrome?</span>
<strong><span class="navy">&gt;&gt;</span></strong>     <span class="green1">self</span> <span class="ash">==</span> <span class="green1">self</span><span class="ash">.</span>reverse
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">end</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<span class="green">=&gt; nil</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"deified"</span><span class="ash">.</span>palindrome?
<span class="green">=&gt; true</span></pre>
<p class="noindent">(I dont know which is cooler: that Ruby lets you add methods to built-in classes, or that <strong><span class="green7"><code>"deified"</code></span></strong> is a palindrome.)</p>
<p class="indent">Modifying built-in classes is a powerful technique, but with great power comes great responsibility, and its considered bad form to add methods to built-in classes without having a <em>really</em> good reason for doing so. Rails does have some good reasons. For example, in web applications we often want to prevent variables from being <em>blank</em>for instance, a users name should be something other than spaces and other whitespaceso Rails adds a <strong><span class="green7"><code>blank?</code></span></strong> method to Ruby. Since the Rails console automatically includes the Rails extensions, we can see an example here (this wont work in plain <strong><span class="green7"><code>irb</code></span></strong>):</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">""</span><span class="ash">.</span>blank?
<span class="green">=&gt; true</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"      "</span><span class="ash">.</span>empty?
<span class="green">=&gt; false</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"      "</span><span class="ash">.</span>blank?
<span class="green">=&gt; true</span>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">nil</span></strong><span class="ash">.</span>blank?
<span class="green">=&gt; true</span></pre>
<p class="noindent">We see that a string of spaces is not <em>empty</em>, but it is <em>blank</em>. Note also that <strong><span class="green7"><code>nil</code></span></strong> is blank; since <strong><span class="green7"><code>nil</code></span></strong> isnt a string, this is a hint that Rails actually adds <strong><span class="green7"><code>blank?</code></span></strong> to <strong><span class="green7"><code>String</code></span></strong>s base class, which (as we saw at the beginning of this section) is <strong><span class="green7"><code>Object</code></span></strong> itself. Well see some other examples of Rails additions to Ruby classes in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch09.xhtml#sec9_1">Section 9.1</a>.<span epub:type="pagebreak" id="page_192"></span></p>
<section>
<h5 class="h5" id="lev38">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Verify that racecar is a palindrome and onomatopoeia is not. What about the name of the South Indian language Malayalam? <em>Hint</em>: Downcase it first.</p></li>
<li><p class="num">Using <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex016">Listing 4.16</a> as a guide, add a <strong><span class="green7"><code>shuffle</code></span></strong> method to the <strong><span class="green7"><code>String</code></span></strong> class. <em>Hint</em>: Refer to <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex012">Listing 4.12</a>.</p></li>
<li><p class="num">Verify that <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex016">Listing 4.16</a> works even if you remove <strong><span class="green7"><code>self.</code></span></strong>.</p></li>
</ol>
<p class="ex-title" id="ch04ex016"><strong>Listing 4.16:</strong> Skeleton for a <strong><span class="green7"><code>shuffle</code></span></strong> method attached to the <strong><span class="green7"><code>String</code></span></strong> class.</p>
<div class="example">
<pre><strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">class</span></strong> <strong><span class="blue3">String</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">def</span></strong> <span class="blue3">shuffle</span>
<strong><span class="navy">&gt;&gt;</span></strong>     <span class="green1">self</span><span class="ash">.</span><span class="maroon">?(''</span>)<span class="ash">.</span><span class="maroon">?.</span>?
<strong><span class="navy">&gt;&gt;</span></strong>   <strong><span class="green">end</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong> <strong><span class="green">end</span></strong>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="maroon">"foobar"</span><span class="ash">.</span>shuffle
<span class="green">=&gt; "borafo"</span></pre>
</div>
</section>
</section>
<section>
<h4 class="h4" id="sec4_4_4">4.4.4 A Controller Class</h4>
<p class="noindent">All this talk about classes and inheritance may have triggered a flash of recognition, because we have seen both before, in the Static Pages controller (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex020">Listing 3.20</a>):</p>
<p class="codelink"><a id="pf0192-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0192-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="green">class</span></strong> <strong><span class="blue3">StaticPagesController</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationController</span>

  <strong><span class="green">def</span></strong> <span class="blue3">home</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">help</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">about</span>
  <strong><span class="green">end</span></strong>
<strong><span class="green">end</span></strong></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_193"></span>Youre now in a position to appreciate, at least vaguely, what this code means: <strong><span class="green7"><code>StaticPagesController</code></span></strong> is a class that inherits from <strong><span class="green7"><code>ApplicationController</code></span></strong>, and comes equipped with <strong><span class="green7"><code>home</code></span></strong>, <strong><span class="green7"><code>help</code></span></strong>, and <strong><span class="green7"><code>about</code></span></strong> methods. Since each Rails console session loads the local Rails environment, we can even create a controller explicitly and examine its class hierarchy:<sup><a id="ch04fn20a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn20">20</a></sup></p>
<p class="footnote"><a id="ch04fn20" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fn20a">20</a>. You dont have to know what each class in this hierarchy does. <em>I</em> dont know what they all do, and Ive been programming in Ruby on Rails since 2005. This means either that (a) Im grossly incompetent or (b) you can be a skilled Rails developer without knowing all its innards. I hope for both our sakes that its the latter.</p>
<p class="codelink"><a id="pf0193-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0193-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> controller <span class="ash">=</span> <span class="red">StaticPagesController</span><span class="ash">.</span>new
<span class="green">=&gt; #&lt;StaticPagesController:0x22855d0&gt;</span>
<strong><span class="navy">&gt;&gt;</span></strong> controller<span class="ash">.</span>class
<span class="green">=&gt; StaticPagesController</span>
<strong><span class="navy">&gt;&gt;</span></strong> controller<span class="ash">.</span>class<span class="ash">.</span>superclass
<span class="green">=&gt; ApplicationController</span>
<strong><span class="navy">&gt;&gt;</span></strong> controller<span class="ash">.</span>class<span class="ash">.</span>superclass<span class="ash">.</span>superclass
<span class="green">=&gt; ActionController::Base</span>
<strong><span class="navy">&gt;&gt;</span></strong> controller<span class="ash">.</span>class<span class="ash">.</span>superclass<span class="ash">.</span>superclass<span class="ash">.</span>superclass
<span class="green">=&gt; ActionController::Metal</span>
<strong><span class="navy">&gt;&gt;</span></strong> controller<span class="ash">.</span>class<span class="ash">.</span>superclass<span class="ash">.</span>superclass<span class="ash">.</span>superclass<span class="ash">.</span>superclass
<span class="green">=&gt; AbstractController::Base</span>
<strong><span class="navy">&gt;&gt;</span></strong> controller<span class="ash">.</span>class<span class="ash">.</span>superclass<span class="ash">.</span>superclass<span class="ash">.</span>superclass<span class="ash">.</span>superclass<span class="ash">.</span>superclass
<span class="green">=&gt; Object</span></pre>
<p class="noindent">A diagram of this hierarchy appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04fig03">Figure 4.3</a>.</p>
<figure id="ch04fig03" class="image-l">
<img src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/fig04_03.jpg" alt="Image" width="373" height="1038" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig04_03.jpg">
<figcaption><p><strong>Figure 4.3:</strong> The inheritance hierarchy for the Static Pages.</p></figcaption>
</figure>
<p class="indent">We can even call the controller actions inside the console, which are just methods:</p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> controller<span class="ash">.</span>home
<span class="green">=&gt; nil</span></pre>
<p class="noindent">Here the return value is <strong><span class="green7"><code>nil</code></span></strong> because the <strong><span class="green7"><code>home</code></span></strong> action is blank.</p>
<p class="indent">But waitactions dont have return values, at least not ones that matter. The point of the <strong><span class="green7"><code>home</code></span></strong> action, as we saw in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03">Chapter 3</a>, is to render a web page, not to return a value. And I sure dont remember ever calling <strong><span class="green7"><code>StaticPagesController.new</code></span></strong> anywhere. Whats going on?</p>
<p class="indent">Whats going on is that Rails is <em>written in</em> Ruby, but Rails isnt Ruby. Some Rails classes are used like ordinary Ruby objects, but some are just grist for Rails magic mill. Rails is <em>sui generis</em>, and should be studied and understood separately from Ruby.<span epub:type="pagebreak" id="page_194"></span><span epub:type="pagebreak" id="page_195"></span></p>
<section>
<h5 class="h5" id="lev39">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">By running the Rails console in the toy apps directory from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">Chapter 2</a>, confirm that you can create a <strong><span class="green7"><code>user</code></span></strong> object using <strong><span class="green7"><code>User.new</code></span></strong>.</p></li>
<li><p class="num">Determine the class hierarchy of the <strong><span class="green7"><code>user</code></span></strong> object.</p></li>
</ol></section>
</section>
<section>
<h4 class="h4" id="sec4_4_5">4.4.5 A User Class</h4>
<p class="noindent">We end our tour of Ruby with a complete class of our own, a <strong><span class="green7"><code>User</code></span></strong> class that anticipates the User model coming up in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">Chapter 6</a>.</p>
<p class="indent">So far weve entered class definitions at the console, but this quickly becomes tiresome; instead, create the file <strong><span class="green7"><code>example_user.rb</code></span></strong> in your application root directory and fill it with the contents of <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex017">Listing 4.17</a>.</p>
<p class="ex-title" id="ch04ex017"><strong>Listing 4.17:</strong> Code for an example user.</p>
<pre class="pre2">example_user.rb</pre>
<p class="codelink"><a id="pf0195-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0195-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">User</span></strong>
  <strong><span class="green">attr_accessor</span></strong> <span class="violet">:name</span>, <span class="violet">:email</span>

  <strong><span class="green">def</span></strong> <span class="blue3">initialize</span>(attributes <span class="ash">=</span> {})
    <span class="violet">@name</span> <span class="ash">=</span> attributes<span class="ash">[</span><span class="violet">:name</span><span class="ash">]</span>
    <span class="violet">@email</span> <span class="ash">=</span> attributes<span class="ash">[</span><span class="violet">:email</span><span class="ash">]</span>
  <strong><span class="green">end</span></strong>
  <strong><span class="green">def</span></strong> <span class="blue3">formatted_email</span>
    <span class="maroon">"</span><strong><span class="pink">#{</span></strong><span class="violet">@name</span><strong><span class="pink">}</span></strong> <span class="maroon">&lt;</span><strong><span class="pink">#{</span></strong><span class="violet">@email</span><strong><span class="pink">}</span></strong><span class="maroon">&gt;"</span>
  <strong><span class="green">end</span></strong>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent">Theres quite a bit going on here, so lets take it step by step. The first line,</p>
<pre class="pre1"><strong><span class="green">attr_accessor</span></strong> <span class="violet">:name</span>, <span class="violet">:email</span></pre>
<p class="noindent">creates <em>attribute accessors</em> corresponding to a users name and email address. This creates getter and setter methods that allow us to retrieve (get) and assign (set) <strong><span class="green7"><code>@name</code></span></strong><span epub:type="pagebreak" id="page_196"></span> and <strong><span class="green7"><code>@email</code></span></strong> <em>instance variables</em>, which were mentioned briefly in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2_2">Section 2.2.2</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_4_2">Section 3.4.2</a>. In Rails, the principal importance of instance variables is that they are automatically available in the views, but in general they are used for variables that need to be available throughout a Ruby class. (Well have more to say about this in a moment.) Instance variables always begin with an <strong><span class="green7"><code>@</code></span></strong> sign, and are <strong><span class="green7"><code>nil</code></span></strong> when undefined.</p>
<p class="indent">The first method, <strong><span class="green7"><code>initialize</code></span></strong>, is special in Ruby: Its the method called when we execute <strong><span class="green7"><code>User.new</code></span></strong>. This particular <strong><span class="green7"><code>initialize</code></span></strong> takes one argument, <strong><span class="green7"><code>attributes</code></span></strong>:</p>
<p class="codelink"><a id="pf0196-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0196-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="green">def</span></strong> <span class="blue3">initialize</span>(attributes <span class="ash">=</span> {})
  <span class="violet">@name</span> <span class="ash">=</span> attributes<span class="ash">[</span><span class="violet">:name</span><span class="ash">]</span>
  <span class="violet">@email</span> <span class="ash">=</span> attributes<span class="ash">[</span><span class="violet">:email</span><span class="ash">]</span>
<strong><span class="green">end</span></strong></pre>
<p class="noindent">Here the <strong><span class="green7"><code>attributes</code></span></strong> variable has a <em>default value</em> equal to the empty hash, so that we can define a user with no name or email address. (Recall from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_3_3">Section 4.3.3</a> that hashes return <strong><span class="green7"><code>nil</code></span></strong> for nonexistent keys, so <strong><span class="green7"><code>attributes[:name]</code></span></strong> will be <strong><span class="green7"><code>nil</code></span></strong> if there is no <strong><span class="green7"><code>:name</code></span></strong> key, and similarly for <strong><span class="green7"><code>attributes[:email]</code></span></strong>.)</p>
<p class="indent">Finally, our class defines a method called <strong><span class="green7"><code>formatted_email</code></span></strong> that uses the values of the assigned <strong><span class="green7"><code>@name</code></span></strong> and <strong><span class="green7"><code>@email</code></span></strong> variables to build up a nicely formatted version of the users email address using string interpolation (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_2_1">Section 4.2.1</a>):</p>
<pre class="pre1"><strong><span class="green">def</span></strong> <span class="blue3">formatted_email</span>
  <span class="maroon">"</span><strong><span class="pink">#{</span></strong><span class="violet">@name</span><strong><span class="pink">}</span></strong> <span class="maroon">&lt;</span><strong><span class="pink">#{</span></strong><span class="violet">@email</span><strong><span class="pink">}</span></strong><span class="maroon">&gt;"</span>
<strong><span class="green">end</span></strong></pre>
<p class="noindent">Because <strong><span class="green7"><code>@name</code></span></strong> and <strong><span class="green7"><code>@email</code></span></strong> are both instance variables (as indicated with the <strong><span class="green7"><code>@</code></span></strong> sign), they are automatically available in the <strong><span class="green7"><code>formatted_email</code></span></strong> method.</p>
<p class="indent">Lets fire up the console, <strong><span class="green7"><code>require</code></span></strong> the example user code, and take our User class out for a spin:</p>
<p class="codelink"><a id="pf0197-01-z" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0197-01-za">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">require</span> <span class="maroon">'./example_user'</span>     <span class="blue"># This is how you load the example_user code.</span>
 <span class="green">=&gt; true</span>
<strong><span class="navy">&gt;&gt;</span></strong> example <span class="ash">=</span> <span class="red">User</span><span class="ash">.</span>new
<span class="green">=&gt; #&lt;User:0x224ceec @email=nil, @name=nil&gt;</span>
<strong><span class="navy">&gt;&gt;</span></strong> example<span class="ash">.</span>name                 <span class="blue"># nil since attributes[:name] is nil</span>
<span class="green">=&gt; nil</span>
<strong><span class="navy">&gt;&gt;</span></strong> example<span class="ash">.</span>name <span class="ash">=</span> <span class="maroon">"Example User"</span>           <span class="blue"># Assign a non-nil name</span>

<span class="green">=&gt; "Example User"</span>
<strong><span class="navy">&gt;&gt;</span></strong> example<span class="ash">.</span>email <span class="ash">=</span> <span class="maroon">"user@example.com"</span>      <span class="blue"># and a non-nil email address</span>
<span class="green">=&gt; "user@example.com"</span>
<strong><span class="navy">&gt;&gt;</span></strong> example<span class="ash">.</span>formatted_email
<span class="green">=&gt; "Example User &lt;user@example.com&gt;"</span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_197"></span>Here the <strong><span class="green7"><code>'.'</code></span></strong> is Unix for current directory, and <strong><span class="green7"><code>'./example_user'</code></span></strong> tells Ruby to look for an example user file relative to that location. The subsequent code creates an empty example user and then fills in the name and email address by assigning directly to the corresponding attributes (assignments made possible by the <strong><span class="green7"><code>attr_accessor</code></span></strong> line in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04ex017">Listing 4.17</a>). When we write</p>
<pre class="pre1">example<span class="ash">.</span>name <span class="ash">=</span> <span class="maroon">"Example User"</span></pre>
<p class="noindent">Ruby is setting the <strong><span class="green7"><code>@name</code></span></strong> variable to <strong><span class="green7"><code>"Example User"</code></span></strong> (and similarly for the <strong><span class="green7"><code>email</code></span></strong> attribute), which we then use in the <strong><span class="green7"><code>formatted_email</code></span></strong> method.</p>
<p class="indent">Recalling from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_3_4">Section 4.3.4</a> that we can omit the curly braces for final hash arguments, we can create another user by passing a hash to the <strong><span class="green7"><code>initialize</code></span></strong> method to create a user with predefined attributes:</p>
<p class="codelink"><a id="pf0197-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0197-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">&gt;&gt;</span></strong> user <span class="ash">=</span> <span class="red">User</span><span class="ash">.</span>new(<span class="green1">name</span>: <span class="maroon">"Michael Hartl"</span>, <span class="violet">email</span>: <span class="maroon">"mhartl@example.com"</span>)
<span class="green">=&gt; #&lt;User:0x225167c @email="mhartl@example.com", @name="Michael Hartl"&gt;</span>
<strong><span class="navy">&gt;&gt;</span></strong> user<span class="ash">.</span>formatted_email
<span class="green">=&gt; "Michael Hartl &lt;mhartl@example.com&gt;"</span></pre>
<p class="noindent">We will see starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#ch07">Chapter 7</a> that initializing objects using a hash argument, a technique known as <em>mass assignment</em>, is common in Rails applications.</p>
<section>
<h5 class="h5" id="lev40">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other peoples answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">In the example User class, change from <strong><span class="green7"><code>name</code></span></strong> to separate first and last name attributes, and then add a method called <strong><span class="green7"><code>full_name</code></span></strong> that returns the first and last names separated by a space. Use it to replace the use of <strong><span class="green7"><code>name</code></span></strong> in the formatted email method.<span epub:type="pagebreak" id="page_198"></span></p></li>
<li><p class="num">Add a method called <strong><span class="green7"><code>alphabetical_name</code></span></strong> that returns the last name and first name separated by comma-space.</p></li>
<li><p class="num">Verify that <strong><span class="green7"><code>full_name.split</code></span></strong> is the same as <strong><span class="green7"><code>alphabetical_name.split(', ').reverse</code></span></strong>.</p></li>
</ol>
</section>
</section>
</section>
<section>
<h3 class="h3" id="sec4_5">4.5 Conclusion</h3>
<p class="noindent">This concludes our overview of the Ruby language. In <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch05.xhtml#ch05">Chapter 5</a>, well start putting it to good use in developing the sample application.</p>
<p class="indent">We wont be using the <strong><span class="green7"><code>example_user.rb</code></span></strong> file from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_4_5">Section 4.4.5</a>, so I suggest removing it:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> rm example_user.rb</pre>
<p class="noindent">Then commit the other changes to the main source code repository and merge into the <strong><span class="green7"><code>master</code></span></strong> branch, push up to GitHub, and deploy to Heroku:</p>
<p class="codelink"><a id="pf0198-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04_images.xhtml#pf0198-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git commit -am <span class="maroon">"Add a full_title helper"</span>
<strong><span class="navy">$</span></strong> git checkout master
<strong><span class="navy">$</span></strong> git merge rails-flavored-ruby</pre>
<p class="noindent">As a reality check, its a good practice to run the test suite before pushing or deploying:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> rails <span class="green1">test</span></pre>
<p class="noindent">Then push up to GitHub:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git push</pre>
<p class="noindent">Finally, deploy to Heroku:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git push heroku</pre>
<section>
<h4 class="h4" id="sec4_5_1">4.5.1 What We Learned in this Chapter</h4>
<p class="bullet"> Ruby has a large number of methods for manipulating strings of characters.</p>
<p class="bullet"> Everything in Ruby is an object.<span epub:type="pagebreak" id="page_199"></span></p>
<p class="bullet"> Ruby supports method definition via the <strong><span class="green7"><code>def</code></span></strong> keyword.</p>
<p class="bullet"> Ruby supports class definition via the <strong><span class="green7"><code>class</code></span></strong> keyword.</p>
<p class="bullet"> Rails views can contain static HTML or embedded Ruby (ERb).</p>
<p class="bullet"> Built-in Ruby data structures include arrays, ranges, and hashes.</p>
<p class="bullet"> Ruby blocks are a flexible construct that (among other things) allow natural iteration over enumerable data structures.</p>
<p class="bullet"> Symbols are labels, like strings without any additional structure.</p>
<p class="bullet"> Ruby supports object inheritance.</p>
<p class="bullet"> It is possible to open up and modify built-in Ruby classes.</p>
<p class="bullet"> The word deified is a palindrome.<span epub:type="pagebreak" id="page_200"></span></p>
</section>
</section>
</section>
<div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-4" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders">
		
		<li class="copy"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#">Add Highlight</a></li>
		<li class="add-note"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#">
			Add Note
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Chapter 3. Mostly Static Pages</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch05.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Chapter 5. Filling in the Layout</div>
        </a>
    
  
  </div>

</section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag collapsed slideUp">
        
        
          <p class="usage-data">Find answers on the fly, or master something new. Subscribe today. <a href="https://learning.oreilly.com/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
        

        
        

      </div>

    
    



        
      </div>
      
        

<footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
  <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" class="icon-up" onclick="window.Appcues.track(&#39;JumpTop_HeronBook&#39;)" style="display: block; opacity: 0.890215;"><div class="visuallyhidden">Back to top</div></a>
  <ul class="js-footer-nav">
  
    
    <li><a href="https://learning.oreilly.com/public/support/">Support</a></li>
    
    <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
    
  
  
  </ul>
  <span class="copyright"> 2020 <a href="https://learning.oreilly.com/" target="_blank">O'Reilly Media, Inc</a>.</span>
  
    
    <a href="https://www.oreilly.com/terms/">Terms of Service</a> 
     / 
    
    <a href="https://learning.oreilly.com/privacy">Privacy Policy</a> 
    
    
  
</footer>

      
    
    <script src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(1)" charset="utf-8"></script><script type="text/javascript" id="">(function(){window.medalliaUserIdentifier=document.documentElement.dataset.userUuid;window.medalliaUserName=document.documentElement.dataset.username})();</script>
<script type="text/javascript" id="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/embed.js.download"></script>
    <script src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(2)" charset="utf-8"></script>
  

<div></div><div></div><div class="selection_bubble_root" style="display: none;"></div><div class="annotator-notice"></div><div class="font-flyout" style="top: 201.006px; left: 1194.34px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#">Reset</a>
</div>
</div><script type="text/javascript" async="" src="./Chapter 4. Rails-Flavored Ruby - Ruby on Rails Tutorial, 6th Edition_files/generic1604331345324.js.download" charset="UTF-8"></script><script type="text/javascript" id="">function forceInputUppercase(a){var b=a.target.selectionStart,c=a.target.selectionEnd;a.target.value=a.target.value.toUpperCase();a.target.setSelectionRange(b,c)}void 0!=document.getElementById("id_promotion")&&null!=document.getElementById("id_promotion")&&document.getElementById("id_promotion").addEventListener("keyup",forceInputUppercase,!1);
void 0!=document.getElementsByName("promotionCode")[0]&&null!=document.getElementsByName("promotionCode")[0]&&document.getElementsByName("promotionCode")[0].addEventListener("keyup",forceInputUppercase,!1);</script><script type="text/javascript" id="">var nonwExpandable=document.querySelectorAll(".orm-ff-NavigationSubnav-headerListItem a, .orm-ff-NavigationView-headerListItem a");nonwExpandable.forEach(function(a,b){b+1!=nonwExpandable.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):b+1==nonwExpandable.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var nonwExpandableFo=document.querySelectorAll(".drop-content li:not(.flyout-parent) a");
nonwExpandableFo.forEach(function(a,b){"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1!=nonwExpandableFo.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1==nonwExpandableFo.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var expandable=document.querySelectorAll(".orm-ff-NavigationSubnav-toggleControls a, .orm-ff-NavigationView-toggleControls a");expandable.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.parentNode.parentNode.parentNode.querySelectorAll(".orm-Button-btnContentWrap span")[0].childNodes[1].textContent+" | "+a.textContent})})});var flyoutLinks=document.querySelectorAll(".flyout a");
flyoutLinks.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.closest("li.flyout-parent").getElementsByTagName("a")[0].textContent+" | "+a.textContent})})});</script><span></span><script type="text/javascript" id="">dataLayer.push({"ld.experiment":void 0,"ld.variation":void 0});</script></body></html>