<!DOCTYPE html>
<!-- saved from url=(0080)https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml -->
<html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage no-applicationcache svg inlinesvg zoom" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/ruby-on-rails/9780136702726/ch10.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="10224494" data-user-uuid="66943332-5511-462c-876e-5d5b720c7edf" data-username="czjtgu3dkobug4zdmolfga2wembsmu" data-account-type="Trial" data-activated-trial-date="12/02/2020" data-archive="9780136702726" data-publishers="Addison-Wesley Professional" data-htmlfile-name="ch10.xhtml" data-epub-title="Ruby on Rails Tutorial, 6th Edition" data-debug="0" data-testing="0" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="O&#39;Reilly Media"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9780136702726"><link rel="shortcut icon" href="https://www.oreilly.com/favicon.ico"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/css" rel="stylesheet" type="text/css"><title>Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition</title><link rel="stylesheet" href="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/output.731fc84c4f9a.css" type="text/css"><link rel="stylesheet" type="text/css" href="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/annotator.e3b0c44298fc.css"><link rel="stylesheet" href="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/font-awesome.min.css"><style type="text/css" title="ibis-book">@page{margin:1em 2em}#sbo-rt-content div{margin-top:1em;margin-bottom:1em;margin-left:1em;margin-right:1em;text-align:justify}#sbo-rt-content div.cover img{max-width:99%;max-height:99%}#sbo-rt-content .att{text-align:right}#sbo-rt-content .cover{margin-top:.5em;margin-bottom:.5em;text-align:center}#sbo-rt-content .h1{margin-top:1.5em;margin-bottom:.5em;font-weight:bold;font-size:210%;page-break-after:avoid;border-bottom:solid .1em;text-align:center}#sbo-rt-content .halftitle{margin-top:1em;margin-bottom:2em;font-weight:bold;font-size:210%;page-break-after:avoid;text-align:center}#sbo-rt-content .h2{margin-top:1em;margin-bottom:.1em;font-weight:bold;font-size:180%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content .h2f{margin-top:1em;margin-bottom:2.5em;font-weight:bold;font-size:190%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content .h2t{margin-top:1em;margin-bottom:2em;font-weight:bold;font-size:190%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content .center{text-align:center}#sbo-rt-content .h3{margin-top:.5em;margin-bottom:.001em;font-weight:bold;font-size:160%;page-break-after:avoid;text-align:left}#sbo-rt-content .h4{margin-top:.5em;margin-bottom:.001em;font-weight:bold;font-size:130%;page-break-after:avoid;text-align:left}#sbo-rt-content .h5{margin-top:.5em;margin-bottom:.001em;font-weight:bold;font-size:120%;page-break-after:avoid;text-align:left}#sbo-rt-content ul{margin-top:1em;margin-bottom:1em;margin-left:.2em}#sbo-rt-content ul.sq{list-style-type:square}#sbo-rt-content ul.sq li p,#sbo-rt-content ul.sq li p.noindent{margin-top:.5em;margin-left:1em;margin-bottom:.5em;text-indent:.002em}#sbo-rt-content .left{text-align:left}#sbo-rt-content .ex-title{margin-top:.8em;margin-bottom:.5em;text-indent:.1em;font-size:100%}#sbo-rt-content code{font-family:Courier,Courier New,monospace;font-size:small}#sbo-rt-content pre{font-family:Courier,Courier New,monospace;margin-top:.6em;margin-bottom:1em;margin-left:.1em;line-height:1.3em;font-size:small}#sbo-rt-content .pre3{font-family:Courier,Courier New,monospace;margin-top:1em;margin-bottom:1em;margin-left:2.9em;background-color:#E6E6E6}#sbo-rt-content .equ{margin-top:.8em;margin-bottom:.5em;text-align:center}#sbo-rt-content .footnum{margin-top:.7em;margin-bottom:.5em;text-indent:-1em;margin-left:3.3em}#sbo-rt-content .footnotep{margin-top:.8em;margin-left:.8em;margin-bottom:.5em;text-indent:.8em}#sbo-rt-content .mark1{background-color:#F4F7F9}#sbo-rt-content .codelink{margin-top:.2em;margin-bottom:.5em}#sbo-rt-content .middle img{vertical-align:middle}#sbo-rt-content .box{margin-top:.6em;margin-bottom:1em;margin-left:.1em;margin-right:.8em;padding:.8em;background-color:#E6E6E6}#sbo-rt-content .box-bq{font-size:.8em;margin-top:.8em;margin-bottom:.5em;margin-left:1.6em;text-indent:.1em;background-color:#E6E6E6}#sbo-rt-content .boxip{margin-top:.5em;margin-left:.1em;margin-bottom:.5em;text-indent:.8em;background-color:#E6E6E6}#sbo-rt-content ol.num{list-style-type:number;font-weight:normal}#sbo-rt-content ol.num li p{list-style-type:number;font-weight:normal}#sbo-rt-content ol.num li p,#sbo-rt-content ol.num li p.number{margin-top:.5em;margin-left:.2em;margin-bottom:.5em;text-indent:.002em}#sbo-rt-content .num-p{margin-top:.5em;margin-bottom:.5em;margin-left:0}#sbo-rt-content .bullet{margin-top:.7em;margin-bottom:.5em;text-indent:-.8em;margin-left:2em}#sbo-rt-content .credit{margin-top:.1em;margin-bottom:.1em;text-indent:-1.5em;margin-left:2em}#sbo-rt-content .box-caption{margin-top:.1em;margin-bottom:1em;font-size:125%;font-weight:bold;text-indent:.02em;text-align:left}#sbo-rt-content .example{font-family:Courier,Courier New,monospace;margin-top:.6em;margin-bottom:1em;margin-left:.1em;line-height:1.3em;font-size:small;border-top:.02em solid black;border-bottom:.02em solid black}#sbo-rt-content .image-l{margin-top:.8em;margin-left:1em;text-align:center}#sbo-rt-content .topbot{margin-top:.8em;margin-bottom:.5em;border-bottom:solid black .1em;border-top:solid black .1em;text-indent:.1em}#sbo-rt-content .uln{margin-top:.7em;margin-bottom:.7em;margin-left:2em}#sbo-rt-content .fdash{margin-top:.7em;margin-bottom:.7em;margin-left:2em}#sbo-rt-content .fdash1{margin-top:.7em;margin-bottom:.7em;margin-left:3em}#sbo-rt-content .tr{border-bottom:.1em solid black}#sbo-rt-content th{text-align:left}#sbo-rt-content td{padding-left:.1em;padding-top:0;padding-bottom:0;vertical-align:top;text-align:left}#sbo-rt-content .mark{background-color:#E6E6E6}#sbo-rt-content .pre1{font-family:Courier,Courier New,monospace;margin-top:.2em;margin-bottom:1em;margin-left:0;padding:.8em;background-color:#E6E6E6}#sbo-rt-content .pre2{font-family:Courier,Courier New,monospace;margin-top:.2em;margin-bottom:1em;margin-left:.2em}#sbo-rt-content .tab-thc{margin-top:.1em;margin-bottom:.1em;border-bottom:solid black .1em;text-align:center}#sbo-rt-content .tab-th{margin-top:.1em;border-bottom:solid black .1em;border-top:solid black .1em;text-align:left}#sbo-rt-content .author{margin-top:2.5em;margin-bottom:5.5em;text-align:center;font-size:120%}#sbo-rt-content .pub{margin-top:1.5em;margin-bottom:.5em;text-align:center}#sbo-rt-content .pub1{font-weight:bold;font-size:.9em;margin-top:.1em;margin-bottom:.5em;text-align:center}#sbo-rt-content .copy{margin-top:.9em;margin-bottom:.5em;text-indent:.02em}#sbo-rt-content .copy1{margin-top:.9em;margin-bottom:.2em;text-indent:.02em}#sbo-rt-content .copy2{margin-top:.2em;margin-bottom:.5em;text-indent:.02em}#sbo-rt-content .title{margin-top:1em;margin-bottom:.2em;font-size:125%;font-weight:bold;text-indent:.02em;text-align:center}#sbo-rt-content .noindent{margin-top:.5em;margin-bottom:.5em;text-indent:.1em}#sbo-rt-content .tab-para{margin-top:.1em;margin-bottom:.1em;margin-left:.1em;text-indent:0}#sbo-rt-content .tab-parai{margin-top:.1em;margin-bottom:.1em;margin-left:1.1em;text-indent:-1.1em}#sbo-rt-content .boxnp{margin-top:.5em;margin-bottom:.5em;text-indent:.1em}#sbo-rt-content .toc-intro{margin-top:.1em;margin-bottom:.5em;margin-left:1.5em;text-align:left}#sbo-rt-content .tocchap{margin-top:1.5em;margin-bottom:.4em;margin-left:3.4em;text-indent:-4em}#sbo-rt-content .toclev1{margin-top:.4em;margin-bottom:.4em;margin-left:1em}#sbo-rt-content .toclev2{margin-top:.4em;margin-bottom:.4em;margin-left:2.6em}#sbo-rt-content .toclev1a{margin-top:.4em;margin-bottom:.4em;margin-left:.5em}#sbo-rt-content .toc-index{margin-top:2em;margin-bottom:.4em;margin-left:.7em}#sbo-rt-content .indexmain{margin-top:.4em;margin-bottom:.2em;margin-left:.8em;text-indent:-.8em}#sbo-rt-content .indexsub{margin-top:.4em;margin-bottom:.2em;margin-left:1.7em;text-indent:-.7em}#sbo-rt-content .indexsubsub{margin-top:.4em;margin-bottom:.2em;font-style:italic;margin-left:3em;text-indent:-.9em}#sbo-rt-content figcaption{margin-top:.8em;margin-bottom:.5em;color:black;text-align:left;text-indent:.1em}#sbo-rt-content .subtitle{margin-top:.1em;margin-bottom:1em;font-weight:bold;font-size:150%;page-break-after:avoid;text-align:center}#sbo-rt-content .edition{margin-top:2em;margin-bottom:3em;font-weight:bold;font-size:150%;page-break-after:avoid;text-align:center}#sbo-rt-content .indent{margin-top:.5em;margin-left:.1em;margin-bottom:.5em;text-indent:1.5em}#sbo-rt-content .h2a{margin-top:.1em;margin-bottom:2em;font-weight:bold;font-size:190%;page-break-after:avoid;text-align:left}#sbo-rt-content figure>img{max-width:99%;max-height:99%}#sbo-rt-content figure{margin-top:1em;margin-bottom:1em;margin-left:.5em;margin-right:1.5em}#sbo-rt-content none{list-style-type:none}#sbo-rt-content a{text-decoration:none}#sbo-rt-content .footnote{font-size:.8em;margin-top:.1em;margin-bottom:.5em;margin-left:.8em}#sbo-rt-content .none{margin-top:.5em;margin-left:1em;margin-bottom:.5em;list-style-type:none}#sbo-rt-content div.image-p img{width:80%}#sbo-rt-content .image-p{page-break-before:always;text-align:center}#sbo-rt-content table{border-collapse:collapse;border-spacing:0;background:transparent;vertical-align:top;margin-top:.1em;margin-right:.1em;margin-bottom:.9em;margin-left:0;width:100%}#sbo-rt-content .tab-parar{margin-top:.1em;margin-bottom:.1em;text-indent:.1em;text-align:right}#sbo-rt-content .h2i{margin-top:1em;margin-bottom:2.1em;font-weight:bold;font-size:190%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content pre{overflow:auto;-ms-overflow:auto;-moz-overflow:auto;-webkit-overflow:auto;-ms-padding-bottom:5pt;-moz-padding-bottom:5pt;-webkit-padding-bottom:5pt}#sbo-rt-content .maroon{color:#BB2121}#sbo-rt-content .green{color:#005A00}#sbo-rt-content .green1{color:#48785D}#sbo-rt-content .navy{color:#504B72}#sbo-rt-content .ash{color:#666}#sbo-rt-content .blue{color:#408080}#sbo-rt-content .green3{color:#00A100}#sbo-rt-content .blue1{color:#0000B8}#sbo-rt-content .violet{color:#1A177D}#sbo-rt-content .pink{color:#A131A1}#sbo-rt-content .pink1{color:#A131A1}#sbo-rt-content .red{color:#800}#sbo-rt-content .blue3{color:#2E3192}#sbo-rt-content .red2{color:#B80000}#sbo-rt-content .green4{color:#269200}#sbo-rt-content .ash1{color:#666}#sbo-rt-content .ash2{color:#33484A}#sbo-rt-content .red2{color:#640000}#sbo-rt-content .ash3{color:#7D8F29}#sbo-rt-content .red5{color:#BD7B00}#sbo-rt-content .maroon1{color:#B66600}#sbo-rt-content .blue5{color:#1F3BFF}#sbo-rt-content .red6{color:#B68}#sbo-rt-content .green7{color:#14B600}#sbo-rt-content .maroon2{color:#B66600}#sbo-rt-content .pink2{color:#AC21FF}#sbo-rt-content .pink3{color:#AC21FF}#sbo-rt-content .lighgreen{color:#5FA100}#sbo-rt-content .lighblue{color:#269271}#sbo-rt-content .darkmaroon{color:#269271}#sbo-rt-content .maroon5{color:#A10000}#sbo-rt-content .blue6{color:#0000B9}#sbo-rt-content .marko{background-color:#FAF9CE}#sbo-rt-content .green5{color:#1C8B43}#sbo-rt-content .colork1{color:#136433;font-weight:bold}#sbo-rt-content .colork2{color:#504C72}#sbo-rt-content .colork3{color:#51785D}#sbo-rt-content .colork4{color:#303192}#sbo-rt-content .colork5{color:#955744}#sbo-rt-content .colork6{color:#5C70BA}#sbo-rt-content .colork7{color:#487864}#sbo-rt-content .colork8{color:#5C5778}#sbo-rt-content .colork9{color:#666}#sbo-rt-content .colork10{color:#48785D}#sbo-rt-content .colork11{color:#BC654D}#sbo-rt-content .colork12{color:#3E8185}#sbo-rt-content .colork13{color:#C62425}#sbo-rt-content .colork14{color:#1D8C43}#sbo-rt-content .colork15{color:#0D8140}#sbo-rt-content .colork16{color:#BB2425}#sbo-rt-content .colork17{color:#985744}#sbo-rt-content .colork18{color:#6C8896}#sbo-rt-content .colork19{color:#2A2C80}#sbo-rt-content .colork20{color:#BD2425}#sbo-rt-content .redk1{color:#EE1C25}#sbo-rt-content .colork21{color:#2A2C77}#sbo-rt-content .colork22{color:#955744}#sbo-rt-content .colork23{color:#BC6561}#sbo-rt-content .colork24{color:#BE7D2B}#sbo-rt-content .colork25{color:#8E7C5D}#sbo-rt-content .colork26{color:#7C5778}#sbo-rt-content .colork27{color:#9D1C1F}#sbo-rt-content .colork28{color:#AA5744}#sbo-rt-content .colork29{color:#C59861}#sbo-rt-content .grayk1{color:#C0908E}#sbo-rt-content .pd_green{color:#48785d}#sbo-rt-content .dark-green{color:#146333}#sbo-rt-content .mark1{background-color:#faf9ce}#sbo-rt-content .mark{background-color:#faf9ce}#sbo-rt-content .pd_ash{color:#666}#sbo-rt-content .pd_blue7{color:#6c8896}#sbo-rt-content .pd_blue1{color:#504b72}#sbo-rt-content .pd_red{color:#965744}#sbo-rt-content .pd_red2{color:#bb654e}#sbo-rt-content .pd_red5{color:#ed1c24}#sbo-rt-content .pd_blue5{color:#2e3192}#sbo-rt-content .pd_green4{color:#269200}#sbo-rt-content .pd_green5{color:#1c8b43}#sbo-rt-content .pd_blue3{color:#2c2c78}#sbo-rt-content .pd_orange{color:#c49847}</style><script type="text/javascript" async="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/cool-2.1.15.min.js.download"></script><script type="text/javascript" async="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/ec.js.download"></script><script type="text/javascript" async="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/analytics.js.download"></script><script type="text/javascript" async="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/f.txt"></script><script type="text/javascript" async="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/js"></script><script crossorigin="anonymous" integrity="sha256-NiDMmov61Y536X/eLXLiDGzFVFmNLtPyu4b5aFB54ks=" type="text/javascript" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/appcues.main.11e38ef4746fd64ab30c11794299d10b30bcb704.js.download" async=""></script><script async="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/gtm.js.download"></script><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9780136702726/chapter/ch10.xhtml",
          "book_id": "9780136702726",
          "chapter_uri": "ch10.xhtml",
          "position": 27.4567491080775,
          "user_uuid": "66943332-5511-462c-876e-5d5b720c7edf",
          "next_chapter_uri": "/library/view/ruby-on-rails/9780136702726/ch11.xhtml"
        
      },
      title: "Ruby on Rails Tutorial, 6th Edition",
      author_list: "Michael Hartl",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: true
    };
    // ]]></script><script src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/modernizr.8e35451ddb64.js.download"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><meta name="description" content=" Chapter 10 Updating, Showing, and Deleting Users In this chapter, we complete the REST actions for the Users resource (Table 7.1) by adding edit, update, index ... "><meta property="og:title" content="Chapter 10. Updating, Showing, and Deleting Users"><meta itemprop="isPartOf" content="/library/view/ruby-on-rails/9780136702726/"><meta itemprop="name" content="Chapter 10. Updating, Showing, and Deleting Users"><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9780136702726/"><meta property="og:description" itemprop="description" content=" Chapter 10 Updating, Showing, and Deleting Users In this chapter, we complete the REST actions for the Users resource (Table 7.1) by adding edit, update, index ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Addison-Wesley Professional"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9780136702726"><meta property="og:book:author" itemprop="author" content="Michael Hartl"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@OReillyMedia"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = '66943332-5511-462c-876e-5d5b720c7edf';
      dataLayer.push({userIdentifier: '66943332-5511-462c-876e-5d5b720c7edf'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = 'ba5f3401-307d-4b66-90a6-a97047c63525';
        

        window.medalliaVsgIsIndividual = true;
        
          
          dataLayer.push({learningAccountType: 'free trial'});
          
        

        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/vendor.3eecedff6f59.js.download"></script><script defer="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/reader.772cf1e31d6c.js.download"></script><iframe src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/saved_resource.html"></iframe><iframe src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(3).html"></iframe><iframe src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(4).html"></iframe><link rel="stylesheet" type="text/css" integrity="sha256-q9sKb2HpA5fJjN1cK9LjLaEXff5ix81Rv1Y3xJFptPE=" crossorigin="anonymous" href="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/container.11e38ef4746fd64ab30c11794299d10b30bcb704.css"><iframe src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(5).html"></iframe><script src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/f(1).txt"></script><script async="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/MathJax.js.download"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
</style><style type="text/css" id="kampyleStyle">.noOutline{outline: none !important;}.wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}</style></head>


<body class="reading sidenav  scalefonts subscribe-panel library nav-collapsed"><div id="MathJax_Message" style="display: none;"></div>

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="working hide" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  


<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li><a href="https://learning.oreilly.com/home/" class="l0 nav-icn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z"></path></svg><span>Home</span></a></li><li class="search"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M8,8 C6.34321755,8 5.00013,6.65691245 5.00013,5.00013 C5.00013,3.34334755 6.34321755,2.00026001 8,2.00026001 C9.65678245,2.00026001 10.99987,3.34334755 10.99987,5.00013 C10.99987,6.65691245 9.65678245,8 8,8 Z M2.33024571,11.3523547 L2.33774538,11.3523547 C3.7622187,9.70968996 5.82947484,8.76608166 8.00374984,8.76608166 C10.1780248,8.76608166 12.245281,9.70968996 13.6697543,11.3523547 C13.8892083,11.6177474 14.0062813,11.9530021 13.99974,12.2973138 L13.99974,13.99974 L2.00026001,13.99974 L2.00026001,12.2973138 C1.99371867,11.9530021 2.11079172,11.6177474 2.33024571,11.3523547 Z" id="path-1"></path></svg><span>Your O'Reilly</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/profile/" class="l2 nav-icn"><span>Profile</span></a></li><li><a href="https://learning.oreilly.com/history/" class="l2 nav-icn"><span>History</span></a></li><li><a href="https://learning.oreilly.com/playlists/" class="l2 nav-icn"><span>Playlists</span></a></li><li><a href="https://learning.oreilly.com/u/66943332-5511-462c-876e-5d5b720c7edf/" class="l2 nav-icn"><span>Highlights</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Featured</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/featured/navigating-21st-century/" class="l2 nav-icn"><span>Navigating Change</span></a></li><li><a href="https://learning.oreilly.com/recommendations/" class="l2 nav-icn"><span>Recommended</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"></path></g></svg><span>Explore</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/topics/" class="l2 nav-icn"><span>All Topics</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;sort=publication_date&amp;facet_json=true&amp;page=0" class="l2 nav-icn"><span>Early Releases</span></a></li><li><a href="https://learning.oreilly.com/playlists/discover/" class="l2 nav-icn"><span>Shared Playlists</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;formats=case%20study&amp;formats=learning%20path&amp;formats=live%20online%20training&amp;formats=notebook&amp;formats=oriole&amp;formats=video&amp;sort=popularity&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Most Popular Titles</span></a></li><li><a href="https://learning.oreilly.com/resource-centers/" class="l2 nav-icn"><span>Resource Centers</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M12.8 3.2A1.2 1.2 0 0 1 14 4.4v8.4a1.2 1.2 0 0 1-1.2 1.2H3.2A1.2 1.2 0 0 1 2 12.8V4.4a1.2 1.2 0 0 1 1.2-1.2h1.2V2h1.2v1.2h4.8V2h1.2v1.2h1.2zm-9.6 9.6h9.6V6.2H3.2v6.6zM8 9.5a1.35 1.35 0 1 1 0-2.7 1.35 1.35 0 0 1 0 2.7zm2.7 2.148v.552H5.3v-.552c0-.321.124-.634.355-.858a3.358 3.358 0 0 1 4.69 0c.23.224.355.537.355.858z"></path></svg><span>Attend</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/live-training/" class="l2 nav-icn"><span>Live Trainings</span></a></li><li><a href="https://learning.oreilly.com/featured/architectural-katas" class="l2 nav-icn"><span>Architectural Katas</span></a></li><li><a href="https://learning.oreilly.com/featured/strata/" class="l2 nav-icn"><span>Strata</span></a></li><li><a href="https://learning.oreilly.com/featured/oscon/" class="l2 nav-icn"><span>Open Source</span></a></li><li><a href="https://learning.oreilly.com/featured/infrastructure-ops/" class="l2 nav-icn"><span>Infra &amp; Ops</span></a></li><li><a href="https://learning.oreilly.com/featured/software-architecture/" class="l2 nav-icn"><span>Software Arch</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="l1 nav-icn "><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.6467109,4.35328907 L14.7964612,7.51003884 C15.0678463,7.78304342 15.0678463,8.22395603 14.7964612,8.49696061 L11.6467109,11.6467109 L10.6597892,10.6597892 L13.3055794,8 L10.6597892,5.34021084 L11.6467109,4.35328907 Z M4.35328907,11.6467109 L1.20353875,8.48996116 C0.932153749,8.21695658 0.932153749,7.77604397 1.20353875,7.50303939 L4.35328907,4.35328907 L5.34021084,5.34021084 L2.69442057,8 L5.34021084,10.6597892 L4.35328907,11.6467109 Z M5.84417089,11.4997226 L8.67194674,4.50027742 L10.1838269,4.50027742 L7.35605105,11.4997226 L5.84417089,11.4997226 Z" id="Mask"></path></svg><span>Interact</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/?classification=content-scenario" class="l2 nav-icn"><span>Scenarios</span></a></li><li><a href="https://learning.oreilly.com/scenarios/?classification=sandbox-scenario" class="l2 nav-icn"><span>Sandboxes</span></a></li><li><a href="https://learning.oreilly.com/interactive/?classification=jupyter-notebook" class="l2 nav-icn"><span>Jupyter Notebooks</span></a></li></ul></li><li><a href="https://learning.oreilly.com/answers/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M2.31032699,3.75609006 C4.65421571,1.41371359 8.45302454,1.41472092 10.7955702,3.75860838 C13.1381158,6.10249583 13.1369405,9.90130261 10.7930518,12.243847 C8.44916311,14.5863913 4.65018639,14.5852161 2.30780867,12.2413286 C-0.0346204845,9.89749489 -0.0334929936,6.09853298 2.31032699,3.75609006 Z M8.8198605,4.98016308 C7.34193969,3.86924672 5.23410194,3.98609692 3.88914868,5.33104946 C3.12814393,6.09032122 2.72818176,7.13880077 2.79015179,8.21201133 C2.79115912,8.23064692 2.79233434,8.24928252 2.79350956,8.26791811 L2.79350956,8.26791811 C2.83179539,8.8307976 2.9944077,9.37404287 3.26947292,9.86201677 L3.26947292,9.86201677 L2.77621706,11.7027432 C2.7699968,11.7259241 2.77662063,11.7506624 2.79359185,11.7676337 C2.8105631,11.7846049 2.83530144,11.7912287 2.85848233,11.7850085 L2.85848233,11.7850085 L4.69400524,11.2922565 C5.26306363,11.6167344 5.90703177,11.786885 6.56209849,11.7858479 C8.64827865,11.7858479 10.3395879,10.094542 10.3395879,8.00836292 C10.3405204,6.84135608 9.80105674,5.73967784 8.87862141,5.02482134 L8.87862141,5.02482134 L8.82825492,4.98654283 Z M13.7933062,2 C14.7073496,2.00009863 15.4482759,2.74110484 15.4482759,3.65514822 C15.4482759,4.32460943 15.0449926,4.92814782 14.4264842,5.18432286 C13.8079757,5.44049789 13.096053,5.29885769 12.6226979,4.82545158 C12.1493429,4.35204547 12.0077795,3.64010743 12.2640213,3.02162665 C12.5202631,2.40314587 13.123845,1.99992776 13.7933062,2 Z"></path></svg><span>Answers</span></a></li><li><a href="https://learning.oreilly.com/certifications/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M12.912 9.18L14 8.014l-1.088-1.18a.304.304 0 01-.075-.268L13.195 5l-1.535-.463a.313.313 0 01-.194-.194l-.462-1.537-1.565.358c-.09.03-.194 0-.269-.074L8.007 2 6.845 3.09a.303.303 0 01-.269.074l-1.565-.358-.462 1.537a.313.313 0 01-.194.194L2.82 5l.358 1.567a.26.26 0 01-.075.269L2 8.015l1.088 1.164c.075.075.09.18.075.269l-.358 1.567 1.535.463c.09.03.164.104.194.194l.462 1.537 1.565-.358c.015 0 .045-.015.075-.015.075 0 .15.03.209.074L8.007 14l1.163-1.09a.303.303 0 01.269-.074l1.565.358.462-1.537a.313.313 0 01.194-.194L13.195 11l-.358-1.567a.338.338 0 01.075-.254zm-6.046 1.37L4.41 8.26l1.16-1.244 1.767 1.649L10.4 5.6l1.202 1.202-4.242 4.243-.495-.495z"></path></svg><span>Certifications</span></a></li><li><a href="https://learning.oreilly.com/preferences/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://learning.oreilly.com/public/support/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.363 6.656a2.692 2.692 0 0 1-2.681-2.703c0-1.493 1.2-2.703 2.681-2.703a2.692 2.692 0 0 1 2.682 2.703c0 1.493-1.2 2.703-2.682 2.703zm4.023 2.027c-1.852 0-3.352 1.513-3.352 3.379H2v-1.534c-.006-.31.099-.612.295-.852a6.666 6.666 0 0 1 9.09-.993zm-.543.676h1.12v.304c.003.284.16.543.408.676a.766.766 0 0 0 .77 0l.303-.176.556.966-.302.176a.772.772 0 0 0-.362.676v.08a.772.772 0 0 0 .362.677l.302.21-.556.965-.302-.175a.766.766 0 0 0-.771 0 .778.778 0 0 0-.409.675v.352h-1.106v-.372a.778.778 0 0 0-.409-.676.766.766 0 0 0-.77 0l-.303.176-.556-.912.302-.176a.772.772 0 0 0 .362-.676v-.04-.04a.772.772 0 0 0-.362-.676l-.302-.176.556-.966.289.155a.766.766 0 0 0 .77 0 .778.778 0 0 0 .41-.676V9.36zm1.562 2.703c0-.271-.108-.531-.3-.722a1.001 1.001 0 0 0-.72-.292 1.01 1.01 0 0 0-.992 1.023 1.01 1.01 0 0 0 1.01 1.004 1.01 1.01 0 0 0 1.002-1.013z"></path></svg><span>Support</span></a></li><li><a href="https://get.oreilly.com/email-signup.html" class="l1 nav-icn " target="&quot;_blank&quot;"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Newsletters</span></a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.613 12.63A.607.607 0 0 1 2 12.03V3.602C2 3.269 2.274 3 2.613 3h5.515v1.204H3.226v7.223h4.902v1.203H2.613zM5.677 9.02V6.611h4.903V4.926a.301.301 0 0 1 .19-.274.31.31 0 0 1 .33.063l2.722 2.673a.594.594 0 0 1 0 .849L11.1 10.909a.31.31 0 0 1-.331.063.301.301 0 0 1-.19-.274V9.02H5.677z"></path></svg><span>Sign Out</span></a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Ruby on Rails Tutorial, 6th Edition
      
    </h1></span></a><div class="toc-contents" style="max-height: 0px;">
  <div class="sbo-toc">
    <button type="button" class="sbo-toc-thumb close"><div class="visuallyhidden">Close</div></button>
      <section class="ios-app-teaser">
        <ul>
            <li><a class="js-toc-link toc-link" href="https://itunes.apple.com/gb/app/safari-queue-library-over/id881697395?mt=8" role="button">Install App</a></li>
            <li><a class="js-toc-link toc-link" href="safaridetail://9780136702726" role="button">Open in App</a></li>
        </ul>
      </section>
      <div class="sbo-book-meta">
        
        <span class="cover">
         <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/">
          <img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/saved_resource" alt="Cover image for Ruby on Rails Tutorial, 6th Edition" height="184" width="141">
        </a>
        </span>
        <span class="title">
          
            
                <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/publisher/addison-wesley-professional/">
                  <img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/addison-wesley.png" class="publisher-logo video" alt="publisher logo">
                </a>
            
          

          <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/">Ruby on Rails Tutorial, 6th Edition</a>
        </span>
        
        <span class="authors">by Michael Hartl</span>
        

        
        <span class="publishers t-publishers">Published by
          <!-- Show publisher page link if publisher pages switch is on -->
          
            <a class="t-publisher-link toc-link js-toc-link" href="https://learning.oreilly.com/library/publisher/addison-wesley-professional/">
              Addison-Wesley Professional</a>, 2020
          
        </span>
        

    

    </div>
  <ol class="tocList">
    
    
    
     

     <li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/cover.xhtml">
        Cover Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref00.xhtml">
        About This eBook <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/halftitle.xhtml">
        Halftitle Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/title.xhtml">
        Title Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/copy.xhtml">
        Copyright Page <span class="minutes">(02:18 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/toc.xhtml#toc">
        Contents <span class="minutes">(05:45 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref02.xhtml#pref02">
        Foreword <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref03.xhtml#pref03">
        Acknowledgments <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref04.xhtml#pref04">
        About the Author <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01">
        Chapter 1. From Zero to Deploy <span class="minutes">(77:03 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">
        Chapter 2. A Toy App <span class="minutes">(50:36 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03">
        Chapter 3. Mostly Static Pages <span class="minutes">(63:15 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04">
        Chapter 4. Rails-Flavored Ruby <span class="minutes">(57:30 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch05.xhtml#ch05">
        Chapter 5. Filling in the Layout <span class="minutes">(60:57 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">
        Chapter 6. Modeling Users <span class="minutes">(67:51 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#ch07">
        Chapter 7. Sign Up <span class="minutes">(79:21 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch08.xhtml#ch08">
        Chapter 8. Basic Login <span class="minutes">(66:42 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch09.xhtml#ch09">
        Chapter 9. Advanced Login <span class="minutes">(52:54 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1 currently-reading">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml#ch10">
        Chapter 10. Updating, Showing, and Deleting Users <span class="minutes">(73:36 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch11.xhtml#ch11">
        Chapter 11. Account Activation <span class="minutes">(55:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch12.xhtml#ch12">
        Chapter 12. Password Reset <span class="minutes">(48:18 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch13.xhtml#ch13">
        Chapter 13. User Microposts <span class="minutes">(106:57 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch14.xhtml#ch14">
        Chapter 14. Following Users <span class="minutes">(78:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/index.xhtml#index">
        Index <span class="minutes">(55:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/credits.xhtml#credits">
        Credits <span class="minutes">(19:33 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01_images.xhtml#ch01_images">
        Code Snippets <span class="minutes">(09:12 mins)</span>
       </a>
      
        
      
   </li></ol>
 </div>



</div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" title="Search in archive" class="js-search-controls search-controls" onclick="window.Appcues.track(&#39;SearchBook_HeronBook&#39;)"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9780136702726/chapter/ch10.xhtml"><div class="js-collections-dropdown collections-dropdown menu-bit-cards" onclick="window.Appcues.track(&#39;AddPlaylist_HeronBook&#39;)"><div data-reactroot="" class="menu-dropdown-wrapper js-menu-dropdown-wrapper align-right"><img class="hidden" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/ajax-transp.gif" alt="loading spinner"><div class="menu-control"><div class="control "><div class="js-playlists-menu"><button class="js-playlist-icon"><svg class="icon-add-to-playlist-sml" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><g transform="translate(-1.000000, 0.000000)"><rect x="5" y="0" width="12" height="2"></rect><title>Playlists</title><path d="M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"></path><circle cx="2" cy="5" r="1"></circle><circle cx="1.94117647" cy="1" r="1"></circle><rect x="5" y="4" width="12" height="2"></rect><rect x="9" y="8" width="8" height="2"></rect><rect x="9" y="12" width="8" height="2"></rect></g></g></g></svg><div class="js-playlist-addto-label">Add&nbsp;To</div></button></div></div></div></div></div></div></li><li class="js-font-control-panel font-control-activator"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size" onclick="window.Appcues.track(&#39;ChangeFont_HeronBook&#39;)"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="trigger" data-push-state="false" title="Share" aria-label="Share" onclick="window.Appcues.track(&#39;Share_HeronBook&#39;)"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li class="currently-reading"><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml&amp;text=Ruby%20on%20Rails%20Tutorial%2C%206th%20Edition&amp;via=OReillyMedia"><span>Twitter</span></a></li><li class="currently-reading"><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><span>Facebook</span></a></li><li class="currently-reading"><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><span>Google Plus</span></a></li><li class="currently-reading"><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%20Chapter%2010.%20Updating%2C%20Showing%2C%20and%20Deleting%20Users&amp;body=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml%0D%0Afrom%20Ruby%20on%20Rails%20Tutorial%2C%206th%20Edition%0D%0A"><span>Email</span></a></li></ul></li><!-- endif request.user.is_authenticated -->
      </ul>
    </div>

      
          
      

    <section role="document"><script src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/48743.js.download"></script>
<script>
  var userId = "66943332-5511-462c-876e-5d5b720c7edf";

  var userObject = {
    firstName: "Trần",
    segment: "Trial",
    admin: "False",
    profileCreatedOn: "2020-12-01",
    academic: ""
  };
  window.Appcues.identify(userId, userObject);
  window.Appcues.page();

  setTimeout(function () {
    window.Appcues.track('ViewingBook_HeronBook')
  }, 20000);
</script>


	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Chapter 2. A Toy App</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Chapter 4. Rails-Flavored Ruby</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section epub:type="chapter">
<h2 class="h2" id="ch03"><span epub:type="pagebreak" id="page_101"></span>Chapter 3</h2>
<h2 class="h2a">Mostly Static Pages</h2>
<p class="noindent">In this chapter, we will begin developing the professional-grade sample application that will serve as our example throughout the rest of this tutorial. Although the sample app will eventually have users, microposts, and a full login and authentication framework, we will begin with a seemingly limited topic: the creation of static pages. Despite its apparent simplicity, making static pages is a highly instructive exercise, rich in implications—a perfect start for our nascent application.</p>
<p class="indent">Although Rails is designed for making database-backed dynamic websites, it also excels at making the kind of static pages we might create using raw HTML files. In fact, even using Rails for static pages yields a distinct advantage: We can easily add just a <em>small</em> amount of dynamic content. In this chapter we’ll learn how. Along the way, we’ll get our first taste of <em>automated testing</em>, which will help us be more confident that our code is correct. Moreover, having a good test suite will allow us to <em>refactor</em> our code with confidence, changing its form without changing its function.</p>
<section>
<h3 class="h3" id="sec3_1">3.1 Sample App Setup</h3>
<p class="noindent">As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">Chapter 2</a>, before getting started we need to create a new Rails project, this time called <span class="dark-green"><strong><code>sample_app</code></strong></span>, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex01">Listing 3.1</a>.<sup><a id="ch03fn1a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn1" class="totri-footnote">1</a></sup></p>
<p class="footnote"><a id="ch03fn1" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn1a" class="totri-footnote">1</a>. If you’re using the cloud IDE, it’s often useful to use the “Go to Anything” command (under the “Go” menu), which makes it easy to navigate the filesystem by typing in partial filenames. In this context, having the hello, toy, and sample apps present in the same project can be inconvenient due to the many common filenames. For example, when searching for a file called “Gemfile”, six possibilities will show up, because each project has matching files called <span class="dark-green"><strong><code>Gemfile</code></strong></span> and <span class="dark-green"><strong><code>Gemfile.lock</code></strong></span>. Thus, you may want to consider removing the first two apps before proceeding, which you can do by navigating to the <span class="dark-green"><strong><code>environment</code></strong></span> directory and running <span class="dark-green"><strong><code>rm -rf hello_app/ toy_app/</code></strong></span> (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01tab01">Table 1.1</a>). (As long as you pushed the corresponding repositories up to GitHub, you can always recover them later.)<span epub:type="pagebreak" id="page_102"></span></p>
<p class="ex-title" id="ch03ex01"><strong>Listing 3.1:</strong> Generating a new sample app.</p>
<p class="codelink"><a id="pf0102-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0102-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="navy">$</span></strong> <span class="green1">cd</span> ~/environment
<strong><span class="navy">$</span></strong> rails _6.0.2.1_ new sample_app
<strong><span class="navy">$</span></strong> <span class="green1">cd</span> sample_app/</pre>
</div>
<p class="noindent">(As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_1">Section 2.1</a>, note that users of the cloud IDE can create this project in the same environment as the applications from the previous two chapters. It is not necessary to create a new environment.)</p>
<p class="indent"><em>Note</em>: For convenience, a reference implementation of the sample app is available at GitHub,<sup><a id="ch03fn2a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn2" class="totri-footnote">2</a></sup> with a separate branch for each chapter in the tutorial.</p>
<p class="footnote"><a id="ch03fn2" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn2a" class="totri-footnote">2</a>. <a href="https://github.com/mhartl/sample_app_6th_ed"><span class="maroon">https://github.com/</span>mhartl/sample_app_6th_ed</a></p>
<p class="indent">As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_1">Section 2.1</a>, our next step is to use a text editor to update the <span class="dark-green"><strong><code>Gemfile</code></strong></span> with the gems needed by our application. <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex02">Listing 3.2</a> is identical to <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01ex06">Listing 1.6</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex01">Listing 2.1</a> apart from the gems in the <span class="dark-green"><strong><code>test</code></strong></span> group, which are needed for the optional advanced testing setup (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_6">Section 3.6</a>) and integration testing starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch05.xhtml#sec5_3_4">Section 5.3.4</a>. <em>Note</em>: If you would like to install <em>all</em> the gems needed for the sample application, you should use the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch13.xhtml#ch13ex072">Listing 13.72</a> at this time.</p>
<p class="indent"><strong>Important note: For all the Gemfiles in this book, you should use the version numbers listed at gemfiles-6th-ed.railstutorial.org instead of the ones listed below (although they should be identical if you are reading this online).</strong></p>
<p class="ex-title" id="ch03ex02"><strong>Listing 3.2:</strong> A <span class="dark-green"><strong><code>Gemfile</code></strong></span> for the sample app.</p>
<p class="codelink"><a id="pf0102-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0102-02a">Click here to view code image</a></p>
<div class="example">
<pre>source <span class="maroon">'https://rubygems.org'</span>
git_source(<span class="violet">:github</span>) { <span class="ash">|</span>repo<span class="ash">|</span> <span class="maroon">"https://github.com/</span><strong><span class="pink">#{</span></strong>repo<strong><span class="pink">}</span></strong><span class="maroon">.git"</span> }

gem <span class="maroon">'rails'</span>,       <span class="maroon">'6.0.2.1'</span>
gem <span class="maroon">'puma'</span>,        <span class="maroon">'3.12.2'</span>
gem <span class="maroon">'sass-rails'</span>,  <span class="maroon">'5.1.0'</span>
gem <span class="maroon">'webpacker'</span>,   <span class="maroon">'4.0.7'</span>
gem <span class="maroon">'turbolinks'</span>,  <span class="maroon">'5.2.0'</span>
gem <span class="maroon">'jbuilder'</span>,    <span class="maroon">'2.9.1'</span>
gem <span class="maroon">'bootsnap'</span>,    <span class="maroon">'1.4.5'</span>, <span class="green1">require</span>: <strong><span class="green">false</span></strong>

group <span class="violet">:development</span>, <span class="violet">:test</span> <strong><span class="green">do</span></strong>
<span epub:type="pagebreak" id="page_103"></span>  gem <span class="maroon">'sqlite3'</span>, <span class="maroon">'1.4.1'</span>
  gem <span class="maroon">'byebug'</span>,  <span class="maroon">'11.0.1'</span>, <span class="violet">platforms</span>: <span class="ash">[</span><span class="violet">:mri</span>, <span class="violet">:mingw</span>, <span class="violet">:x64_mingw</span><span class="ash">]</span>
<strong><span class="green">end</span></strong>

group <span class="violet">:development</span> <strong><span class="green">do</span></strong>
  gem <span class="maroon">'web-console'</span>,           <span class="maroon">'4.0.1'</span>
  gem <span class="maroon">'listen'</span>,                <span class="maroon">'3.1.5'</span>
  gem <span class="maroon">'spring'</span>,                <span class="maroon">'2.1.0'</span>
  gem <span class="maroon">'spring-watcher-listen'</span>, <span class="maroon">'2.0.1'</span>
<strong><span class="green">end</span></strong>

group <span class="violet">:test</span> <strong><span class="green">do</span></strong>
  gem <span class="maroon">'capybara'</span>,                 <span class="maroon">'3.28.0'</span>
  gem <span class="maroon">'selenium-webdriver'</span>,       <span class="maroon">'3.142.4'</span>
  gem <span class="maroon">'webdrivers'</span>,               <span class="maroon">'4.1.2'</span>
  gem <span class="maroon">'rails-controller-testing'</span>, <span class="maroon">'1.0.4'</span>
  gem <span class="maroon">'minitest'</span>,                 <span class="maroon">'5.11.3'</span>
  gem <span class="maroon">'minitest-reporters'</span>,       <span class="maroon">'1.3.8'</span>
  gem <span class="maroon">'guard'</span>,                    <span class="maroon">'2.15.0'</span>
  gem <span class="maroon">'guard-minitest'</span>,           <span class="maroon">'2.4.6'</span>
<strong><span class="green">end</span></strong>

group <span class="violet">:production</span> <strong><span class="green">do</span></strong>
  gem <span class="maroon">'pg'</span>, <span class="maroon">'1.1.4'</span>
<strong><span class="green">end</span></strong>

<span class="blue"># Windows does not include zoneinfo files, so bundle the tzinfo-data gem</span>
gem <span class="maroon">'tzinfo-data'</span>, <span class="violet">platforms</span>: <span class="ash">[</span><span class="violet">:mingw</span>, <span class="violet">:mswin</span>, <span class="violet">:x64_mingw</span>, <span class="violet">:jruby</span><span class="ash">]</span></pre>
</div>
<p class="indent">As in the previous two chapters, we run <span class="dark-green"><strong><code>bundle install</code></strong></span> to install and include the gems specified in the <span class="dark-green"><strong><code>Gemfile</code></strong></span>, while skipping the installation of production gems using the option <span class="dark-green"><strong><code>--without production</code></strong></span>:<sup><a id="ch03fn3a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn3" class="totri-footnote">3</a></sup></p>
<p class="footnote"><a id="ch03fn3" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn3a" class="totri-footnote">3</a>. It’s worth noting that <span class="dark-green"><strong><code>--without production</code></strong></span> is a “remembered option,” which means it will be included automatically the next time we run <span class="dark-green"><strong><code>bundle install</code></strong></span>.</p>
<p class="codelink"><a id="pf0103-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0103-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> bundle install --without production</pre>
<p class="noindent">This arranges to skip the <code>pg</code> gem for PostgreSQL in development and use SQLite for development and testing. Heroku recommends against using different databases in development and production, but for the sample application it won’t make any <span epub:type="pagebreak" id="page_104"></span>difference, and SQLite is <em>much</em> easier than PostgreSQL to install and configure locally.<sup><a id="ch03fn4a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn4" class="totri-footnote">4</a></sup> In case you’ve previously installed a version of a gem (such as Rails itself) other than the one specified by the <span class="dark-green"><strong><code>Gemfile</code></strong></span>, it’s a good idea to <em>update</em> the gems with <span class="dark-green"><strong><code>bundle update</code></strong></span> to make sure the versions match:</p>
<p class="footnote"><a id="ch03fn4" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn4a" class="totri-footnote">4</a>. Generally speaking, it’s a good idea for the development and production environments to match as closely as possible, which includes using the same database, so I recommend eventually learning how to install and configure PostgreSQL in development—but now is not that time. When the time comes, Google “install configure postgresql &lt;your system&gt;” and “rails postgresql setup”, and prepare for a challenge. (On the cloud IDE, &lt;your system&gt; is Linux.)</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> bundle update</pre>
<p class="noindent">With that, all we have left is to initialize the Git repository:</p>
<p class="codelink"><a id="pf0104-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0104-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git init
<strong><span class="navy">$</span></strong> git add -A
<strong><span class="navy">$</span></strong> git commit -m <span class="maroon">"Initialize repository"</span></pre>
<p class="indent">As with the first application, I suggest updating the README file to be more helpful and descriptive by replacing the default contents of <span class="dark-green"><strong><code>README.md</code></strong></span> with the Markdown shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex03">Listing 3.3</a>. The README includes instructions for getting started with the application.<sup><a id="ch03fn5a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn5" class="totri-footnote">5</a></sup> (We won’t actually need to run <span class="dark-green"><strong><code>rails db:migrate</code></strong></span> until <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">Chapter 6</a>, but it does no harm to include it now.)</p>
<p class="footnote"><a id="ch03fn5" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn5a" class="totri-footnote">5</a>. The README also makes reference to a LICENSE file, which I’ve added by hand to the official reference implementation, but it isn’t present by default. You can download a copy from the reference implementation repository if you want it for completeness, but it’s not necessary for completing the tutorial.</p>
<p class="indent"><em>Note</em>: For convenience, the full reference app README contains additional advanced information not present in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex03">Listing 3.3</a>.</p>
<p class="ex-title" id="ch03ex03"><strong>Listing 3.3:</strong> An improved README file for the sample app.</p>
<pre class="pre2">README.md</pre>
<p class="codelink"><a id="pf0104-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0104-02a">Click here to view code image</a></p>
<div class="example">
<pre># Ruby on Rails Tutorial sample application

This is the sample application for
[*Ruby on Rails Tutorial:
Learn Web Development with Rails*](https://www.railstutorial.org/)
(6th Edition)
by [Michael Hartl](https://www.michaelhartl.com/).

<span epub:type="pagebreak" id="page_105"></span>## License

All source code in the [Ruby on Rails Tutorial](https://www.railstutorial.org/)
is available jointly under the MIT License and the Beerware License. See
[LICENSE.md](LICENSE.md) for details.

## Getting started

To get started with the app, clone the repo and then install the needed gems:

```
$ bundle install --without production
```

Next, migrate the database:

```
$ rails db:migrate
```

Finally, run the test suite to verify that everything is working correctly:

```
$ rails test
```

If the test suite passes, you'll be ready to run the app in a local server:

```
$ rails server
```

For more information, see the
[*Ruby on Rails Tutorial* book](https://www.railstutorial.org/book).</pre>
</div>
<p class="noindent">Then commit the changes as follows:</p>
<p class="codelink"><a id="pf0105-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0105-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git commit -am <span class="maroon">"Improve the README"</span></pre>
<p class="noindent">You may recall from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_3_4">Section 1.3.4</a> that we used the Git command <span class="dark-green"><strong><code>git commit -a -m "Message"</code></strong></span>, with flags for “all changes” (<span class="dark-green"><strong><code>-a</code></strong></span>) and a message (<span class="dark-green"><strong><code>-m</code></strong></span>). As shown in the second command above, Git also lets us roll the two flags into one using <span class="dark-green"><strong><code>git commit -am "Message"</code></strong></span>.<span epub:type="pagebreak" id="page_106"></span></p>
<p class="indent">You should also create a new repository at GitHub by following the same steps as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_3_3">Section 1.3.3</a> (taking care to make it private, as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig01">Figure 3.1</a>), and then push up to the remote repository:</p>
<figure id="ch03fig01" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_01.jpg" alt="Image" width="677" height="523" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_01.jpg">
<figcaption><p><strong>Figure 3.1:</strong> Creating the main sample app repository at GitHub.</p></figcaption>
</figure>
<p class="codelink"><a id="pf0106-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0106-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git remote add origin https://github.com/&lt;username&gt;/sample_app.git
<strong><span class="navy">$</span></strong> git push -u origin master</pre>
<p class="indent">If you’re using the cloud IDE, you’ll need to prepare the application to be served locally by editing the <span class="dark-green"><strong><code>development.rb</code></strong></span> file as in the previous two chapters (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex04">Listing 3.4</a>).</p>
<p class="ex-title" id="ch03ex04"><strong>Listing 3.4:</strong> Allowing connections to the local webserver.</p>
<pre class="pre2">config/environments/development.rb</pre>
<p class="codelink"><a id="pf0106-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0106-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>configure <strong><span class="green">do</span></strong>
  <span class="ash">.
  .
  .</span>
<span epub:type="pagebreak" id="page_107"></span><span class="mark">  <span class="green3"># Allow connections to local server.</span></span>
<span class="mark">  config.hosts.clear</span>
end</pre>
</div>
<p class="indent">To avoid integration headaches later on, it’s also a good idea to deploy the app to Heroku even at this early stage. As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01">Chapter 1</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">Chapter 2</a>, I suggest following the “hello, world!” steps in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex05">Listing 3.5</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex06">Listing 3.6</a>. (The main reason for this is that the default Rails page typically breaks at Heroku, which makes it hard to tell whether the deployment was successful.)</p>
<p class="ex-title" id="ch03ex05"><strong>Listing 3.5:</strong> Adding a <span class="dark-green"><strong><code>hello</code></strong></span> action to the Application controller.</p>
<pre class="pre2">app/controllers/application_controller.rb</pre>
<p class="codelink"><a id="pf0107-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0107-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green"><strong>class</strong></span> <strong><span class="blue3">ApplicationController</span></strong> <span class="ash">&lt;</span> <span class="red">ActionController</span><span class="ash">::</span><span class="red">Base</span>

  <strong><span class="green">def</span></strong> <span class="blue3">hello</span>
<span class="mark">    render <span class="blue1">text</span>: <span class="red2">"hello, world!"</span></span>
  <strong><span class="green">end</span></strong>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="ex-title" id="ch03ex06"><strong>Listing 3.6:</strong> Setting the root route.</p>
<pre class="pre2">config/routes.rb</pre>
<p class="codelink"><a id="pf0107-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0107-03a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>routes<span class="ash">.</span>draw <strong><span class="green">do</span></strong>
  root <span class="maroon">'application#hello'</span>
<span class="green"><strong>end</strong></span></pre>
</div>
<p class="noindent">Then commit the changes and push up to GitHub and Heroku:</p>
<p class="codelink"><a id="pf0107-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0107-04a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git commit -am <span class="maroon">"Add hello"</span>
<strong><span class="navy">$</span></strong> git push
<strong><span class="navy">$</span></strong> heroku create
<strong><span class="navy">$</span></strong> git push heroku master</pre>
<p class="noindent">As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_4">Section 1.4</a>, you may see some warning messages, which you should ignore for now. We’ll deal with them in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_5">Section 7.5</a>. Apart from the address of the Heroku app, the result should be the same as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01fig031">Figure 1.31</a>.<span epub:type="pagebreak" id="page_108"></span></p>
<p class="indent">As you proceed through the rest of the book, I recommend pushing and deploying the application regularly, which automatically makes remote backups and lets you catch any production errors as soon as possible. If you run into problems at Heroku, make sure to take a look at the production logs to try to diagnose the problem:</p>
<p class="codelink"><a id="pf0108-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0108-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> heroku logs         <span class="blue"># to see the most recent events</span>
<strong><span class="navy">$</span></strong> heroku logs --tail  <span class="blue"># to see events as they happen, Ctrl-C to quit</span></pre>
<p class="noindent"><em>Note</em>: If you do end up using Heroku for a real-life application, be sure to follow the production webserver configuration in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_5">Section 7.5</a>.</p>
<section>
<h5 class="h5" id="lev23">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Confirm that GitHub renders the Markdown for the README in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex03">Listing 3.3</a> as HTML (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig02">Figure 3.2</a>).</p>
<figure id="ch03fig02" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_02.jpg" alt="Image" width="677" height="523" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_02.jpg">
<figcaption><p><strong>Figure 3.2:</strong> The sample app README at GitHub.</p></figcaption>
</figure></li>
<li><p class="num">By visiting the root route on the production server, verify that the deployment to Heroku succeeded.</p></li>
</ol>
</section>
</section>
<section>
<h3 class="h3" id="sec3_2">3.2 Static Pages</h3>
<p class="noindent">With all the preparation from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_1">Section 3.1</a> finished, we’re ready to get started developing the sample application. In this section, we’ll take a first step toward making dynamic pages by creating a set of Rails <em>actions</em> and <em>views</em> containing only static HTML.<sup><a id="ch03fn6a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn6" class="totri-footnote">6</a></sup> Rails actions come bundled together inside <em>controllers</em> (the C in MVC from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_3">Section 1.2.3</a>), which contain sets of actions related by a common purpose. We got a glimpse of controllers in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">Chapter 2</a>, and will come to a deeper understanding once we explore the REST architecture more fully (starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">Chapter 6</a>). To <span epub:type="pagebreak" id="page_109"></span>get our bearings, it’s helpful to recall the Rails directory structure from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2">Section 1.2</a> (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01fig011">Figure 1.11</a>). In this section, we’ll be working mainly in the <span class="dark-green"><strong><code>app/controllers</code></strong></span> and <span class="dark-green"><strong><code>app/views</code></strong></span> directories.</p>
<p class="footnote"><a id="ch03fn6" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn6a" class="totri-footnote">6</a>. Our method for making static pages is probably the simplest, but it’s not the only way. The optimal method really depends on your needs; if you expect a <em>large</em> number of static pages, using a Static Pages controller can get quite cumbersome, but in our sample app we’ll need only need a few. If you do need a lot of static pages, take a look at the <code>high_voltage</code> gem from thoughtbot.</p>
<p class="indent">Recall from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_3_4">Section 1.3.4</a> that, when using Git, it’s a good practice to do our work on a separate topic branch rather than the master branch. If you’re using Git for version control, you should run the following command to check out a topic branch for static pages:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git checkout -b static-pages</pre>
<section>
<h4 class="h4" id="sec3_2_1">3.2.1 Generated Static Pages</h4>
<p class="noindent">To get started with static pages, we’ll first generate a controller using the same Rails <span class="dark-green"><strong><code>generate</code></strong></span> script we used in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">Chapter 2</a> to generate scaffolding. Since we’ll be making <span epub:type="pagebreak" id="page_110"></span>a controller to handle static pages, we’ll call it the Static Pages controller, designated by the CamelCase name <span class="dark-green"><strong><code>StaticPages</code></strong></span>. We’ll also plan to make actions for a Home page, a Help page, and an About page, designated by the lowercase action names <span class="dark-green"><strong><code>home</code></strong></span>, <span class="dark-green"><strong><code>help</code></strong></span>, and <span class="dark-green"><strong><code>about</code></strong></span>. The <span class="dark-green"><strong><code>generate</code></strong></span> script takes an optional list of actions, so we’ll include actions for the Home and Help pages directly on the command line, while intentionally leaving off the action for the About page so that we can see how to add it (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_3">Section 3.3</a>). The resulting command to generate the Static Pages controller appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex07">Listing 3.7</a>.</p>
<p class="ex-title" id="ch03ex07"><strong>Listing 3.7:</strong> Generating a Static Pages controller.</p>
<p class="codelink"><a id="pf0110-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0110-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="mark">$ rails generate controller StaticPages home help</span>
      create  app/controllers/static_pages_controller.rb
       route  get 'static_pages/home'
get 'static_pages/help'
      invoke  erb
      create    app/views/static_pages
      create    app/views/static_pages/home.html.erb
      create    app/views/static_pages/help.html.erb
      invoke  test_unit
      create    test/controllers/static_pages_controller_test.rb
      invoke  helper
      create    app/helpers/static_pages_helper.rb
      invoke    test_unit
      invoke  assets
      invoke    scss
      create      app/assets/stylesheets/static_pages.scss</pre>
</div>
<p class="noindent">Incidentally, it’s worth noting that <span class="dark-green"><strong><code>rails g</code></strong></span> is a shortcut for <span class="dark-green"><strong><code>rails generate</code></strong></span>, which is only one of several shortcuts supported by Rails (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03tab01">Table 3.1</a>). For clarity, this tutorial always uses the full command, but in real life most Rails developers use one or more of the shortcuts shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03tab01">Table 3.1</a>.<sup><a id="ch03fn7a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn7" class="totri-footnote">7</a></sup></p>
<p class="footnote"><a id="ch03fn7" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn7a" class="totri-footnote">7</a>. In fact, many Rails developers add an <em>alias</em> (as described in <em>Learn Enough Text Editor to Be Dangerous</em>, <a href="http://www.learnenough.com/text-editor">www.learnenough.com/text-editor</a>) for the <span class="dark-green"><strong><code>rails</code></strong></span> command, typically shortening it to just <span class="dark-green"><strong><code>r</code></strong></span>. This allows us to run, for example, a Rails server using the compact command <span class="dark-green"><strong><code>r s</code></strong></span>.</p>
<p class="indent">Before moving on, if you’re using Git it’s a good idea to add the files for the Static Pages controller to the remote repository:<span epub:type="pagebreak" id="page_111"></span></p>
<figure id="ch03tab01">
<figcaption><p><strong>Table 3.1:</strong> Some Rails shortcuts.</p></figcaption>
<table class="topbot">
<thead>
<tr>
<th class="tab-th"><p class="tab-para">Full command</p></th>
<th class="tab-th"><p class="tab-para">Shortcut</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ rails server</code></strong></span></p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ rails s</code></strong></span></p></td>
</tr>
<tr>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ rails console</code></strong></span></p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ rails c</code></strong></span></p></td>
</tr>
<tr>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ rails generate</code></strong></span></p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ rails g</code></strong></span></p></td>
</tr>
<tr>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ rails test</code></strong></span></p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ rails t</code></strong></span></p></td>
</tr>
<tr>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ bundle install</code></strong></span></p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>$ bundle</code></strong></span></p></td>
</tr>
</tbody>
</table>
</figure>
<p class="codelink"><a id="pf0111-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0111-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git add -A
<strong><span class="navy">$</span></strong> git commit -m <span class="maroon">"Add a Static Pages controller"</span>
<strong><span class="navy">$</span></strong> git push -u origin static-pages</pre>
<p class="noindent">The final command here arranges to push the <span class="dark-green"><strong><code>static-pages</code></strong></span> topic branch up to GitHub. Subsequent pushes can omit the other arguments and write simply</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git push</pre>
<p class="noindent">This commit and push sequence represents the kind of pattern I would ordinarily follow in real-life development, but for simplicity I’ll typically omit such intermediate commits from now on. (When following this tutorial, a good rule of thumb is to make a Git commit at the end of each section.)</p>
<p class="indent">In <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex07">Listing 3.7</a>, note that we have passed the controller name as CamelCase (so called because it resembles the humps of a Bactrian camel), which leads to the creation of a controller file written in snake case, so that a controller called StaticPages yields a file called <span class="dark-green"><strong><code>static_pages_controller.rb</code></strong></span>. This is merely a convention, and in fact using snake case at the command line also works: the command</p>
<p class="codelink"><a id="pf0111-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0111-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> rails generate controller static_pages ...</pre>
<p class="noindent">also generates a controller called <span class="dark-green"><strong><code>static_pages_controller.rb</code></strong></span>. Because Ruby uses CamelCase for class names (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_4">Section 4.4</a>), my preference is to refer to controllers using their CamelCase names, but this is a matter of taste. (Since Ruby filenames typically use snake case, the Rails generator converts CamelCase to snake case using the <code>underscore</code> method.)<span epub:type="pagebreak" id="page_112"></span></p>
<p class="indent">By the way, if you ever make a mistake when generating code, it’s useful to know how to reverse the process. See <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#box3_1">Box 3.1</a> for some techniques on how to undo things in Rails.</p>
<div class="box">
<p class="box-caption" id="box3_1">Box 3.1: Undoing Things</p>
<p class="boxnp">Even when you’re very careful, things can sometimes go wrong when developing Rails applications. Happily, Rails has some facilities to help you recover.</p>
<p class="boxip">One common scenario is wanting to undo code generation—for example, when you change your mind about the name of a controller and want to eliminate the generated files. Because Rails creates a substantial number of auxiliary files along with the controller (as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex07">Listing 3.7</a>), this isn’t as easy as removing the controller file itself; undoing the generation means removing not only the principal generated file, but all the ancillary files as well. (In fact, as we saw in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2">Section 2.2</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_3">Section 2.3</a>, <code>rails generate</code> can make automatic edits to the <code>routes.rb</code> file, which we also want to undo automatically.) In Rails, this can be accomplished with <code>rails destroy</code> followed by the name of the generated element. In particular, these two commands cancel each other out:</p>
<p class="codelink"><a id="pf0112-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0112-01a">Click here to view code image</a></p>
<pre class="pre1">$ rails generate controller StaticPages home help
$ rails destroy  controller StaticPages home help</pre>
<p class="boxnp">Similarly, in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">Chapter 6</a> we’ll generate a <em>model</em> as follows:</p>
<p class="codelink"><a id="pf0112-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0112-02a">Click here to view code image</a></p>
<pre class="pre1">$ rails generate model User name:string email:string</pre>
<p class="boxnp">This can be undone using</p>
<pre class="pre1">$ rails destroy model User</pre>
<p class="boxnp">(In this case, it turns out we can omit the other command-line arguments. When you get to <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">Chapter 6</a>, see if you can figure out why.)</p>
<p class="boxip">Another technique related to models involves undoing <em>migrations</em>, which we saw briefly in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">Chapter 2</a> and will see much more frequently starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">Chapter 6</a>. Migrations change the state of the database using the command</p>
<pre class="pre1">$ rails db:migrate</pre>
<p class="boxnp">We can undo a single migration step using</p>
<pre class="pre1">$ rails db:rollback</pre>
<p class="boxnp"><span epub:type="pagebreak" id="page_113"></span>To go all the way back to the beginning, we can use</p>
<pre class="pre1">$ rails db:migrate VERSION=0</pre>
<p class="boxnp">As you might guess, substituting any other number for 0 migrates to that version number, where the version numbers come from listing the migrations sequentially.</p>
<p class="boxip">With these techniques in hand, we are well equipped to recover from the inevitable development snafus.</p>
</div>
<p class="indent">The Static Pages controller generation in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex07">Listing 3.7</a> automatically updates the routes file (<span class="dark-green"><strong><code>config/routes.rb</code></strong></span>), which we first saw in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_4">Section 1.2.4</a> when we edited the root route for the hello app (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01ex011">Listing 1.11</a>), and which we most recently saw in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex06">Listing 3.6</a>. The routes file is responsible for implementing the router (seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig011">Figure 2.11</a>) that defines the correspondence between URLs and web pages. The routes file is located in the <span class="dark-green"><strong><code>config</code></strong></span> directory, where Rails collects files needed for the application configuration (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig03">Figure 3.3</a>).</p>
<figure id="ch03fig03" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_03.jpg" alt="Image" width="677" height="492" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_03.jpg">
<figcaption><p><strong>Figure 3.3:</strong> Contents of the sample app’s <span class="dark-green"><strong><code>config</code></strong></span> directory.</p></figcaption>
</figure>
<p class="indent">Since we included the <span class="dark-green"><strong><code>home</code></strong></span> and <span class="dark-green"><strong><code>help</code></strong></span> actions in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex07">Listing 3.7</a>, the routes file already has a rule for each one, as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex08">Listing 3.8</a>.<span epub:type="pagebreak" id="page_114"></span></p>
<p class="ex-title" id="ch03ex08"><strong>Listing 3.8:</strong> The routes for the <span class="dark-green"><strong><code>home</code></strong></span> and <span class="dark-green"><strong><code>help</code></strong></span> actions in the Static Pages controller.</p>
<pre class="pre2">config/routes.rb</pre>
<p class="codelink"><a id="pf0114-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0114-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>routes<span class="ash">.</span>draw <strong><span class="green">do</span></strong>
<span class="mark">  get  <span class="red2">'static_pages/home'</span></span>
<span class="mark">  get  <span class="red2">'static_pages/help'</span></span>
  root <span class="maroon">'application#hello'</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="noindent">Here the rule</p>
<pre class="pre1">get <span class="maroon">'static_pages/home'</span></pre>
<p class="noindent">maps requests for the URL /static_pages/home to the <span class="dark-green"><strong><code>home</code></strong></span> action in the Static Pages controller. Moreover, by using <span class="dark-green"><strong><code>get</code></strong></span> we arrange for the route to respond to a <code>GET</code> request, which is one of the fundamental <em>HTTP verbs</em> supported by the Hypertext Transfer Protocol (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#box3_2">Box 3.2</a>). In our case, this means that when we generate a <span class="dark-green"><strong><code>home</code></strong></span> action inside the Static Pages controller, we automatically get a page at the address /static_pages/home. To see the result, start a Rails development server as described in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_2">Section 1.2.2</a>:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> rails server</pre>
<p class="noindent">Then navigate to /static_pages/home (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig04">Figure 3.4</a>).</p>
<figure id="ch03fig04" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_04.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_04.jpg">
<figcaption><p><strong>Figure 3.4:</strong> The raw home view (/static_pages/home).</p></figcaption>
</figure>
<div class="box">
<p class="box-caption" id="box3_2">Box 3.2: <code>GET</code>, et cet.</p>
<p class="boxnp">The Hypertext Transfer Protocol (HTTP) defines the basic operations <code>GET</code>, <code>POST</code>, <code>PATCH</code>, and <code>DELETE</code>. These refer to operations between a <em>client</em> computer (typically running a web browser such as Chrome, Firefox, or Safari) and a <em>server</em> (typically running a webserver such as Apache or Nginx). (It’s important to understand that, when developing Rails applications on a local computer, the client and the server are the same physical machine, but in general they are different.) An emphasis on HTTP verbs is typical of web frameworks (including Rails) influenced by the <em>REST architecture</em>, which we saw briefly in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">Chapter 2</a> and will start learning more about in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#ch07">Chapter 7</a>.<span epub:type="pagebreak" id="page_115"></span></p>
<p class="boxip"><code>GET</code> is the most common HTTP operation, used for <em>reading</em> data on the web; it just means “get a page.” Every time you visit a site like <code><a href="https://www.google.com/">https://www.google.com/</a></code> or <code><a href="https://www.wikipedia.org/">https://www.wikipedia.org/</a></code> your browser is submitting a <code>GET</code> request. <code>POST</code> is the next most common operation; it is the request sent by your browser when you submit a form. In Rails applications, <code>POST</code> requests are typically used for <em>creating</em> things (although HTTP also allows <code>POST</code> to perform updates). For example, the <code>POST</code> request sent when you submit a registration form creates a new user on the remote site. The other two verbs, <code>PATCH</code> and <code>DELETE</code>, are designed for <em>updating</em> and <em>destroying</em> things on the remote server. These requests are less common than <code>GET</code> and <code>POST</code> since browsers are incapable of sending them natively, but some web frameworks (including Ruby on Rails) have clever ways of making it <em>seem</em> like browsers are issuing such requests. As a result, Rails supports all four of the request types <code>GET</code>, <code>POST</code>, <code>PATCH</code>, and <code>DELETE</code>.</p>
</div>
<p class="indent">To understand where this page comes from, let’s start by examining the Static Pages controller in a text editor, which should look something like <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex09">Listing 3.9</a>. You <span epub:type="pagebreak" id="page_116"></span>may note that, unlike the demo Users and Microposts controllers from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">Chapter 2</a>, the Static Pages controller does not use the standard REST actions. This is normal for a collection of static pages: The REST architecture isn’t the best solution to every problem.</p>
<p class="ex-title" id="ch03ex09"><strong>Listing 3.9:</strong> The Static Pages controller made by <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex07">Listing 3.7</a>.</p>
<pre class="pre2">app/controllers/static_pages_controller.rb</pre>
<p class="codelink"><a id="pf0116-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0116-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green"><strong>class</strong></span> <strong><span class="blue3">StaticPagesController</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationController</span>
  <strong><span class="green">def</span></strong> <span class="blue3">home</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">help</span>
  <strong><span class="green">end</span></strong>
<span class="green"><strong>end</strong></span></pre>
</div>
<p class="indent">We see from the <span class="dark-green"><strong><code>class</code></strong></span> keyword in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex09">Listing 3.9</a> that <span class="dark-green"><strong><code>static_pages_controller.rb</code></strong></span> defines a <em>class</em>, in this case called <span class="dark-green"><strong><code>StaticPagesController</code></strong></span>. Classes are simply a convenient way to organize <em>functions</em> (also called <em>methods</em>) like the <span class="dark-green"><strong><code>home</code></strong></span> and <span class="dark-green"><strong><code>help</code></strong></span> actions, which are defined using the <span class="dark-green"><strong><code>def</code></strong></span> keyword. As discussed in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_3_4">Section 2.3.4</a>, the angle bracket <span class="dark-green"><strong><code>&lt;</code></strong></span> indicates that <span class="dark-green"><strong><code>StaticPagesController</code></strong></span> <em>inherits</em> from the Rails class <span class="dark-green"><strong><code>ApplicationController</code></strong></span>; as we’ll see in a moment, this means that our pages come equipped with a large amount of Rails-specific functionality. (We’ll learn more about both classes and inheritance in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_4">Section 4.4</a>.)</p>
<p class="indent">In the case of the Static Pages controller, both of its methods are initially empty:</p>
<pre class="pre1"><strong><span class="green">def</span></strong> <span class="blue3">home</span>
<strong><span class="green">end</span></strong>

<strong><span class="green">def</span></strong> <span class="blue3">help</span>
<strong><span class="green">end</span></strong></pre>
<p class="noindent">In plain Ruby, these methods would simply do nothing. In Rails, the situation is different. <span class="dark-green"><strong><code>StaticPagesController</code></strong></span> is a Ruby class, but because it inherits from <span class="dark-green"><strong><code>ApplicationController</code></strong></span> the behavior of its methods is specific to Rails: When visiting the URL /static_pages/home, Rails looks in the Static Pages controller and <span epub:type="pagebreak" id="page_117"></span>executes the code in the <span class="dark-green"><strong><code>home</code></strong></span> action, and then renders the <em>view</em> (the V in MVC from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_3">Section 1.2.3</a>) corresponding to the action. In the present case, the <span class="dark-green"><strong><code>home</code></strong></span> action is empty, so all visiting /static_pages/home does is render the view. So, what does a view look like, and how do we find it?</p>
<p class="indent">If you take another look at the output in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex07">Listing 3.7</a>, you might be able to guess the correspondence between actions and views: An action like <span class="dark-green"><strong><code>home</code></strong></span> has a corresponding view called <span class="dark-green"><strong><code>home.html.erb</code></strong></span>. We’ll learn in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_4">Section 3.4</a> what the <span class="dark-green"><strong><code>.erb</code></strong></span> part means; from the <span class="dark-green"><strong><code>.html</code></strong></span> part you probably won’t be surprised that it basically looks like HTML (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex010">Listing 3.10</a>).</p>
<p class="ex-title" id="ch03ex010"><strong>Listing 3.10:</strong> The generated view for the Home page.</p>
<pre class="pre2">app/views/static_pages/home.html.erb</pre>
<p class="codelink"><a id="pf0117-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0117-01a">Click here to view code image</a></p>
<div class="example">
<pre>&lt;<span class="green"><strong>h1</strong></span>&gt;StaticPages#home&lt;/<span class="green"><strong>h1</strong></span>&gt;
&lt;<span class="green"><strong>p</strong></span>&gt;Find me in app/views/static_pages/home.html.erb&lt;/<span class="green"><strong>p</strong></span>&gt;</pre>
</div>
<p class="indent">The view for the <span class="dark-green"><strong><code>help</code></strong></span> action is analogous (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex011">Listing 3.11</a>).</p>
<p class="ex-title" id="ch03ex011"><strong>Listing 3.11:</strong> The generated view for the Help page.</p>
<pre class="pre2">app/views/static_pages/help.html.erb</pre>
<p class="codelink"><a id="pf0117-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0117-02a">Click here to view code image</a></p>
<div class="example">
<pre>&lt;<span class="green"><strong>h1</strong></span>&gt;StaticPages#help&lt;/<span class="green"><strong>h1</strong></span>&gt;
&lt;<span class="green"><strong>p</strong></span>&gt;Find me in app/views/static_pages/help.html.erb&lt;/<span class="green"><strong>p</strong></span>&gt;</pre>
</div>
<p class="noindent">Both of these views are just placeholders: They have a top-level heading (inside the <span class="dark-green"><strong><code>h1</code></strong></span> tag) and a paragraph (<span class="dark-green"><strong><code>p</code></strong></span> tag) with the full path to the corresponding file.</p>
<section>
<h5 class="h5" id="lev24">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Generate a controller called <span class="dark-green"><strong><code>Foo</code></strong></span> with actions <span class="dark-green"><strong><code>bar</code></strong></span> and <span class="dark-green"><strong><code>baz</code></strong></span>.</p></li>
<li><p class="num">By applying the techniques described in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#box3_1">Box 3.1</a>, destroy the <span class="dark-green"><strong><code>Foo</code></strong></span> controller and its associated actions.<span epub:type="pagebreak" id="page_118"></span></p></li>
</ol>
</section>
</section>
<section>
<h4 class="h4" id="sec3_2_2">3.2.2 Custom Static Pages</h4>
<p class="noindent">We’ll add some (very slightly) dynamic content starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_4">Section 3.4</a>, but as they stand the files shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex010">Listing 3.10</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex011">Listing 3.11</a> underscore an important point: Rails views can simply contain static HTML. This means we can begin customizing the Home and Help pages even with no knowledge of Rails, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex012">Listing 3.12</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex013">Listing 3.13</a>.</p>
<p class="ex-title" id="ch03ex012"><strong>Listing 3.12:</strong> Custom HTML for the Home page.</p>
<pre class="pre2">app/views/static_pages/home.html.erb</pre>
<p class="codelink"><a id="pf0118-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0118-01a">Click here to view code image</a></p>
<div class="example">
<pre>&lt;<span class="green"><strong>h1</strong></span>&gt;Sample App&lt;/<span class="green"><strong>h1</strong></span>&gt;
&lt;<span class="green"><strong>p</strong></span>&gt;
  This is the home page for the
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;Ruby on Rails Tutorial&lt;/<span class="green"><strong>a</strong></span>&gt;
  sample application.
&lt;/<span class="green"><strong>p</strong></span>&gt;</pre>
</div>
<p class="ex-title" id="ch03ex013"><strong>Listing 3.13:</strong> Custom HTML for the Help page.</p>
<pre class="pre2">app/views/static_pages/help.html.erb</pre>
<p class="codelink"><a id="pf0118-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0118-02a">Click here to view code image</a></p>
<div class="example">
<pre>&lt;<span class="green"><strong>h1</strong></span>&gt;Help&lt;/<span class="green"><strong>h1</strong></span>&gt;
&lt;<span class="green"><strong>p</strong></span>&gt;
  Get help on the Ruby on Rails Tutorial at the
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/help"</span>&gt;Rails Tutorial Help page&lt;/<span class="green"><strong>a</strong></span>&gt;.
  To get help on this sample app, see the
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/book"</span>&gt;&lt;<span class="green"><strong>em</strong></span>&gt;Ruby on Rails Tutorial&lt;/<span class="green"><strong>em</strong></span>&gt;
  book&lt;/<span class="green"><strong>a</strong></span>&gt;.
&lt;/<span class="green"><strong>p</strong></span>&gt;</pre>
</div>
<p class="indent">The results of <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex012">Listing 3.12</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex013">Listing 3.13</a> are shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig05">Figure 3.5</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig06">Figure 3.6</a>.</p>
<figure id="ch03fig05" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_05.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_05.jpg">
<figcaption><p><strong>Figure 3.5:</strong> A custom Home page.</p></figcaption>
</figure>
<figure id="ch03fig06" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_06.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_06.jpg">
<figcaption><p><strong>Figure 3.6:</strong> A custom Help page.</p></figcaption>
</figure>
</section>
</section>
<section>
<h3 class="h3" id="sec3_3">3.3 Getting Started with Testing</h3>
<p class="noindent">Having created and filled in the Home and Help pages for our sample app (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_2_2">Section 3.2.2</a>), now we’re going to add an About page as well. When making a change of this nature, it’s a good practice to write an <em>automated test</em> to verify that the feature is implemented correctly. Developed over the course of building an application, the <span epub:type="pagebreak" id="page_119"></span>resulting <em>test suite</em> serves as a safety net and as executable documentation of the application source code. When done right, writing tests also allows us to develop <em>faster</em> despite requiring extra code, because we’ll end up wasting less time trying to track down bugs. This is true only once we get good at writing tests, though, which is one reason it’s important to start practicing as early as possible.</p>
<p class="indent">Although virtually all Rails developers agree that testing is a good idea, there is a diversity of opinion on the details. There is an especially lively debate over the use of test-driven development (TDD),<sup><a id="ch03fn8a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn8" class="totri-footnote">8</a></sup> a testing technique in which the programmer writes failing tests first, and then writes the application code to get the tests to pass. The <em>Ruby on Rails Tutorial</em> takes a lightweight, intuitive approach to testing, employing TDD when convenient without being dogmatic about it (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#box3_3">Box 3.3</a>).</p>
<p class="footnote"><a id="ch03fn8" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn8a" class="totri-footnote">8</a>. See, for example, “TDD is dead. Long live testing.” by Rails creator David Heinemeier Hansson.<span epub:type="pagebreak" id="page_120"></span></p>
<div class="box">
<p class="box-caption" id="box3_3">Box 3.3: When to Test</p>
<p class="boxnp">When deciding when and how to test, it’s helpful to understand <em>why</em> to test. In my view, writing automated tests has three main benefits:</p>
<ol class="num">
<li><p class="num">Tests protect against <em>regressions</em>, where a functioning feature stops working for some reason.</p></li>
<li><p class="num">Tests allow code to be <em>refactored</em> (i.e., changing its form without changing its function) with greater confidence.</p></li>
<li><p class="num">Tests act as a <em>client</em> for the application code, thereby helping determine its design and its interface with other parts of the system.</p></li>
</ol>
<p class="boxip">Although none of these benefits <em>requires</em> that tests be written first, there are many circumstances where test-driven development (TDD) is a valuable tool to have in your kit. Deciding when and how to test depends in part on how <span epub:type="pagebreak" id="page_121"></span>comfortable you are writing tests; many developers find that, as they get better at writing tests, they are more inclined to write them first. It also depends on how difficult the test is relative to the application code, how precisely the desired features are known, and how likely the feature is to break in the future.</p>
<p class="boxip">In this context, it’s helpful to have a set of guidelines on when we should test first (or test at all). Here are some suggestions based on my own experience:</p>
<p class="bullet">• When a test is especially short or simple compared to the application code it tests, lean toward writing the test first.</p>
<p class="bullet">• When the desired behavior isn’t yet crystal clear, lean toward writing the application code first, then write a test to codify the result.</p>
<p class="bullet">• Because security is a top priority, err on the side of writing tests of the security model first.</p>
<p class="bullet">• Whenever a bug is found, write a test to reproduce it and protect against regressions, then write the application code to fix it.</p>
<p class="bullet">• Lean against writing tests for code (such as detailed HTML structure) likely to change in the future.</p>
<p class="bullet">• Write tests before refactoring code, focusing on testing error-prone code that’s especially likely to break.</p>
<p class="boxip">In practice, these guidelines mean that we’ll usually write controller and model tests first and integration tests (which test functionality across models, views, and controllers) second. And when we’re writing application code that isn’t particularly brittle or error-prone, or is likely to change (as is often the case with views), we’ll often skip testing altogether.</p>
</div>
<p class="indent">Our main testing tools will be <em>controller tests</em> (starting in this section), <em>model tests</em> (starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">Chapter 6</a>), and <em>integration tests</em> (starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#ch07">Chapter 7</a>). Integration tests are especially powerful, as they allow us to simulate the actions of a user interacting with our application using a web browser. Integration tests will eventually be our primary testing technique, but controller tests give us an easier place to start.</p>
<section>
<h4 class="h4" id="sec3_3_1">3.3.1 Our First Test</h4>
<p class="noindent">Now it’s time to add an About page to our application. As we’ll see, the test is short and simple, so we’ll follow the guidelines from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#box3_3">Box 3.3</a> and write the test first. We’ll then use the failing test to drive the writing of the application code.<span epub:type="pagebreak" id="page_122"></span></p>
<p class="indent">Getting started with testing can be challenging, requiring extensive knowledge of both Rails and Ruby. At this early stage, writing tests might thus seem hopelessly intimidating. Luckily, Rails has already done the hardest part for us, because <span class="dark-green"><strong><code>rails generate controller</code></strong></span> (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex07">Listing 3.7</a>) automatically generated a test file to get us started:</p>
<p class="codelink"><a id="pf0122-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0122-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> ls test/controllers/
<span class="green">static_pages_controller_test.rb</span></pre>
<p class="noindent">Let’s take a look at it (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex014">Listing 3.14</a>).</p>
<p class="ex-title" id="ch03ex014"><strong>Listing 3.14:</strong> The default tests for the StaticPages controller. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">test/controllers/static_pages_controller_test.rb</pre>
<p class="codelink"><a id="pf0122-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0122-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green1">require</span> <span class="maroon">'test_helper'</span>

<span class="green"><strong>class</strong></span> <strong><span class="blue3">StaticPagesControllerTest</span></strong> <span class="ash">&lt;</span> <span class="red">ActionDispatch</span><span class="ash">::</span><span class="red">IntegrationTest</span>

  <span class="green1">test</span> <span class="maroon">"should get home"</span> <strong><span class="green">do</span></strong>
    get static_pages_home_url
    assert_response <span class="violet">:success</span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get help"</span> <strong><span class="green">do</span></strong>
    get static_pages_help_url
    assert_response <span class="violet">:success</span>
  <strong><span class="green">end</span></strong>
<span class="green"><strong>end</strong></span></pre>
</div>
<p class="noindent">It’s not important at this point to understand the syntax in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex014">Listing 3.14</a> in detail, but we can see that there are two tests, one for each controller action we included on the command line in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex07">Listing 3.7</a>. Each test simply gets a URL and verifies (via an <em>assertion</em>) that the result is a success. Here the use of <span class="dark-green"><strong><code>get</code></strong></span> indicates that our tests expect the Home and Help pages to be ordinary web pages, accessed using a <code>GET</code> request (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#box3_2">Box 3.2</a>). The response <span class="dark-green"><strong><code>:success</code></strong></span> is an abstract representation of the underlying HTTP status code (in this case, 200 OK). In other words, a test like</p>
<p class="codelink"><a id="pf0122-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0122-03a">Click here to view code image</a></p>
<pre class="pre1"><span class="green1">test</span> <span class="maroon">"should get home"</span> <strong><span class="green">do</span></strong>
  get static_pages_home_url
  assert_response <span class="violet">:success</span>
<span class="green"><strong>end</strong></span></pre>
<p class="noindent"><span epub:type="pagebreak" id="page_123"></span>says, “Let’s test the Home page by issuing a <code>GET</code> request to the Static Pages <span class="dark-green"><strong><code>home</code></strong></span> URL and then making sure we receive a ‘success’ status code in response.”</p>
<p class="indent">To begin our testing cycle, we need to run our test suite to verify that the tests currently pass. We can do this with the <span class="dark-green"><strong><code>rails</code></strong></span> command as follows:</p>
<p class="ex-title" id="ch03ex015"><strong>Listing 3.15:</strong> <span class="green5"><code>GREEN</code></span></p>
<p class="codelink"><a id="pf0123-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0123-01a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails db:migrate     # Necessary on some systems
$ rails test
2 tests, 2 assertions, 0 failures, 0 errors, 0 skips</pre>
</div>
<p class="noindent">As required, initially our test suite is passing (<span class="green5"><small>GREEN</small></span>). (Some systems won’t actually display the color green unless you add the minitest reporters from the optional <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_6_1">Section 3.6.1</a>, but the terminology is common even when literal colors aren’t involved.) Note that here and throughout this tutorial, I’ll generally omit some lines from the test output to highlight only the most imporant parts.</p>
<p class="indent">By the way, on some systems you may see generated files of the form</p>
<pre class="pre1"><span class="green">/db/test.sqlite3-0</span></pre>
<p class="noindent">show up in the <span class="dark-green"><strong><code>db</code></strong></span> directory. To prevent these generated files from being added to the repository, I suggest adding a rule to the <span class="dark-green"><strong><code>.gitignore</code></strong></span> file (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_3_1">Section 1.3.1</a>) to ignore them, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex016">Listing 3.16</a>.</p>
<p class="ex-title" id="ch03ex016"><strong>Listing 3.16:</strong> Ignoring generated database files.</p>
<pre class="pre2">.gitignore</pre>
<div class="example">
<pre>.
.
.
# Ignore db test files.
db/test.*</pre>
</div>
</section>
<section>
<h4 class="h4" id="sec3_3_2">3.3.2 Red</h4>
<p class="noindent">As noted in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#box3_3">Box 3.3</a>, test-driven development involves writing a failing test first, writing the application code needed to get it to pass, and then refactoring the code <span epub:type="pagebreak" id="page_124"></span>if necessary. Because many testing tools represent failing tests with the color red and passing tests with the color green, this sequence is sometimes known as the “Red, Green, Refactor” cycle. In this section, we’ll complete the first step in this cycle, getting to <span class="red5"><small>RED</small></span> by writing a failing test. Then we’ll get to <span class="green5"><small>GREEN</small></span> in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_3_3">Section 3.3.3</a>, and refactor in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_4_3">Section 3.4.3</a>.<sup><a id="ch03fn9a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn9" class="totri-footnote">9</a></sup></p>
<p class="footnote"><a id="ch03fn9" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn9a" class="totri-footnote">9</a>. On some systems, <span class="dark-green"><strong><code>rails test</code></strong></span> shows red when the tests fail but doesn’t show green when the tests pass. To arrange for a true Red–Green cycle, see <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_6_1">Section 3.6.1</a>.</p>
<p class="indent">Our first step is to write a failing test for the About page. By following the models from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex014">Listing 3.14</a>, can you guess what it should be? The answer appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex017">Listing 3.17</a>.</p>
<p class="ex-title" id="ch03ex017"><strong>Listing 3.17:</strong> A test for the About page. <span class="red5"><small><code>RED</code></small></span></p>
<pre class="pre2">test/controllers/static_pages_controller_test.rb</pre>
<p class="codelink"><a id="pf0124-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0124-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green1">require</span> <span class="maroon">'test_helper'</span>

<span class="green"><strong>class</strong></span> <strong><span class="blue3">StaticPagesControllerTest</span></strong> <span class="ash">&lt;</span> <span class="red">ActionDispatch</span><span class="ash">::</span><span class="red">IntegrationTest</span>

  <span class="green1">test</span> <span class="maroon">"should get home"</span> <strong><span class="green">do</span></strong>
    get static_pages_home_url
    assert_response <span class="violet">:success</span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get help"</span> <strong><span class="green">do</span></strong>
    get static_pages_help_url
    assert_response <span class="violet">:success</span>
  <strong><span class="green">end</span></strong>

<span class="mark">  <span class="green3">test</span> <span class="red2">"should get about"</span> <strong><span class="green3">do</span></strong></span>
<span class="mark">    get static_pages_about_url</span>
<span class="mark">    assert_response <span class="blue1">:success</span></span>
<span class="mark">  <strong><span class="green3">end</span></strong></span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="noindent">We see from the highlighted lines in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex017">Listing 3.17</a> that the test for the About page is the same as the Home and Help tests with the word “about” in place of “home” or “help”.</p>
<p class="indent">As required, the test initially fails:<span epub:type="pagebreak" id="page_125"></span></p>
<p class="ex-title" id="ch03ex018"><strong>Listing 3.18:</strong> <span class="red5"><small><code>RED</code></small></span></p>
<p class="codelink"><a id="pf0125-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0125-01a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails test
3 tests, 2 assertions, 0 failures, 1 errors, 0 skips</pre>
</div>
</section>
<section>
<h4 class="h4" id="sec3_3_3">3.3.3 Green</h4>
<p class="noindent">Now that we have a failing test (<span class="red5"><small>RED</small></span>), we’ll use the failing test’s error messages to guide us to a passing test (<span class="green5"><small>GREEN</small></span>), thereby implementing a working About page.</p>
<p class="indent">We can get started by examining the error message output by the failing test:</p>
<p class="ex-title" id="ch03ex019"><strong>Listing 3.19:</strong> <span class="red5"><small><code>RED</code></small></span></p>
<p class="codelink"><a id="pf0125-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0125-02a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails test
NameError: undefined local variable or method `static_pages_about_url'</pre>
</div>
<p class="noindent">The error message here says that the Rails code for the About page URL is undefined, which is a hint that we need to add a line to the routes file. We can accomplish this by following the pattern in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex08">Listing 3.8</a>, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex020">Listing 3.20</a>.</p>
<p class="ex-title" id="ch03ex020"><strong>Listing 3.20:</strong> Adding the <span class="dark-green"><strong><code>about</code></strong></span> route. <span class="red5"><small><code>RED</code></small></span></p>
<pre class="pre2">config/routes.rb</pre>
<p class="codelink"><a id="pf0125-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0125-03a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>routes<span class="ash">.</span>draw <strong><span class="green">do</span></strong>
  get  <span class="maroon">'static_pages/home'</span>
  get  <span class="maroon">'static_pages/help'</span>
<span class="mark">  get <span class="red2">'static_pages/about'</span></span>
  root <span class="maroon">'application#hello'</span>
<span class="green"><strong>end</strong></span></pre>
</div>
<p class="noindent">The highlighted line in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex020">Listing 3.20</a> tells Rails to route a <code>GET</code> request for the URL /static_pages/about to the <span class="dark-green"><strong><code>about</code></strong></span> action in the Static Pages controller. This automatically creates a helper called</p>
<pre class="pre1">static_pages_about_url</pre>
<p class="indent"><span epub:type="pagebreak" id="page_126"></span>Running our test suite again, we see that it is still <span class="red5"><small>RED</small></span>, but now the error message has changed:</p>
<p class="ex-title" id="ch03ex021"><strong>Listing 3.21:</strong> <span class="red5"><small><code>RED</code></small></span></p>
<p class="codelink"><a id="pf0126-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0126-01a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails test
AbstractController::ActionNotFound:
The action 'about' could not be found for StaticPagesController</pre>
</div>
<p class="noindent">The error message now indicates a missing <span class="dark-green"><strong><code>about</code></strong></span> action in the Static Pages controller, which we can add by following the model provided by <span class="dark-green"><strong><code>home</code></strong></span> and <span class="dark-green"><strong><code>help</code></strong></span> in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex09">Listing 3.9</a>, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex022">Listing 3.22</a>.</p>
<p class="ex-title" id="ch03ex022"><strong>Listing 3.22:</strong> The Static Pages controller with added <span class="dark-green"><strong><code>about</code></strong></span> action. <span class="red5"><small><code>RED</code></small></span></p>
<pre class="pre2">app/controllers/static_pages_controller.rb</pre>
<p class="codelink"><a id="pf0126-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0126-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green"><strong>class</strong></span> <strong><span class="blue3">StaticPagesController</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationController</span>

  <strong><span class="green">def</span></strong> <span class="blue3">home</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">help</span>
  <strong><span class="green">end</span></strong>

<span class="mark">  <strong><span class="green3">def</span></strong> <span class="blue5">about</span></span>
<span class="mark">  <strong><span class="green3">end</span></strong></span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent">As before, our test suite is still <span class="red5"><small>RED</small></span>, but the error message has changed again:</p>
<p class="codelink"><a id="pf0126-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0126-03a">Click here to view code image</a></p>
<pre class="pre1">$ rails test
ActionController::UnknownFormat: StaticPagesController#about is missing
a template for this request format and variant.</pre>
<p class="noindent">This indicates a missing template, which in the context of Rails is essentially the same thing as a view. As described in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_2_1">Section 3.2.1</a>, an action called <span class="dark-green"><strong><code>home</code></strong></span> is associated with a view called <span class="dark-green"><strong><code>home.html.erb</code></strong></span> located in the <span class="dark-green"><strong><code>app/views/static_pages</code></strong></span> directory, which means that we need to create a new file called <span class="dark-green"><strong><code>about.html.erb</code></strong></span> in the same directory.<span epub:type="pagebreak" id="page_127"></span></p>
<p class="indent">The way to create a file varies by system setup, but most text editors will let you control-click inside the directory where you want to create the file to bring up a menu with a “New File” menu item. Alternatively, you can use the File menu to create a new file and then pick the proper directory when saving it. Finally, you can use my favorite trick by applying the Unix touch command as follows:</p>
<p class="codelink"><a id="pf0127-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0127-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> touch app/views/static_pages/about.html.erb</pre>
<p class="noindent">As mentioned in <em>Learn Enough Command Line to Be Dangerous</em> (<a href="http://www.learnenough.com/command-line">www.learnenough.com/command-line</a>), <span class="dark-green"><strong><code>touch</code></strong></span> is designed to update the modification timestamp of a file or directory without otherwise affecting it, but as a side effect it creates a new (blank) file if one doesn’t already exist. (If you’re using the cloud IDE, you may have to refresh the file tree as described in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_1">Section 1.2.1</a>. This is a good example of technical sophistication (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#box1_2">Box 1.2</a>).)</p>
<p class="indent">Once you’ve created the <span class="dark-green"><strong><code>about.html.erb</code></strong></span> file in the right directory, you should fill it with the content shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex023">Listing 3.23</a>.</p>
<p class="ex-title" id="ch03ex023"><strong>Listing 3.23:</strong> Code for the About page. <span class="green5"><code>GREEN</code></span></p>
<pre class="pre2">app/views/static_pages/about.html.erb</pre>
<p class="codelink"><a id="pf0127-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0127-02a">Click here to view code image</a></p>
<div class="example">
<pre>&lt;<span class="green"><strong>h1</strong></span>&gt;About&lt;/<span class="green"><strong>h1</strong></span>&gt;
&lt;<span class="green"><strong>p</strong></span>&gt;
  The &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;&lt;<span class="green"><strong>em</strong></span>&gt;Ruby on Rails
  Tutorial&lt;/<span class="green"><strong>em</strong></span>&gt;&lt;/<span class="green"><strong>a</strong></span>&gt;, part of the
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.learnenough.com/"</span>&gt;Learn Enough&lt;/<span class="green"><strong>a</strong></span>&gt; family of
  tutorials, is a
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/book"</span>&gt;book&lt;/<span class="green"><strong>a</strong></span>&gt; and
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://screencasts.railstutorial.org/"</span>&gt;screencast series&lt;/<span class="green"><strong>a</strong></span>&gt;
  to teach web development with
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://rubyonrails.org/"</span>&gt;Ruby on Rails&lt;/<span class="green"><strong>a</strong></span>&gt;.
  This is the sample app for the tutorial.
&lt;/<span class="green"><strong>p</strong></span>&gt;</pre>
</div>
<p class="indent">At this point, running <span class="dark-green"><strong><code>rails test</code></strong></span> should get us back to <span class="green5"><small>GREEN</small></span>:</p>
<p class="ex-title" id="ch03ex024"><strong>Listing 3.24:</strong> <span class="green5"><small><code>GREEN</code></small></span></p>
<p class="codelink"><a id="pf0127-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0127-03a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails test
3 tests, 3 assertions, 0 failures, 0 errors, 0 skips</pre>
</div>
<p class="noindent"><span epub:type="pagebreak" id="page_128"></span>Of course, it’s never a bad idea to take a look at the page in a browser to make sure our tests aren’t leading us astray (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig07">Figure 3.7</a>).</p>
<figure id="ch03fig07" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_07.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_07.jpg">
<figcaption><p><strong>Figure 3.7:</strong> The new About page (/static_pages/about).</p></figcaption>
</figure>
</section>
<section>
<h4 class="h4" id="sec3_3_4">3.3.4 Refactor</h4>
<p class="noindent">Now that we’ve gotten to <span class="green5"><small>GREEN</small></span>, we are free to refactor our code with confidence. When developing an application, often code will start to “smell,” meaning that it gets ugly, bloated, or filled with repetition. The computer doesn’t care what the code looks like, of course, but humans do, so it is important to keep the code base clean by refactoring frequently. Although our sample app is a little too small to refactor right now, code smell seeps in at every crack, and we’ll get started refactoring in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_4_3">Section 3.4.3</a>.</p>
</section>
</section>
<section>
<h3 class="h3" id="sec3_4">3.4 Slightly Dynamic Pages</h3>
<p class="noindent">Now that we’ve created the actions and views for some static pages, we’ll make them <em>slightly</em> dynamic by adding some content that changes on a per-page basis: We’ll have <span epub:type="pagebreak" id="page_129"></span>the title of each page change to reflect its content. Whether a changing title represents <em>truly</em> dynamic content is debatable, but in any case it lays the necessary foundation for unambiguously dynamic content in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#ch07">Chapter 7</a>.</p>
<figure id="ch03tab02">
<figcaption><p><strong>Table 3.2:</strong> The (mostly) static pages for the sample app.</p></figcaption>
<table class="topbot">
<thead>
<tr>
<th class="tab-th"><p class="tab-para">Page</p></th>
<th class="tab-th"><p class="tab-para">URL</p></th>
<th class="tab-th"><p class="tab-para">Base title</p></th>
<th class="tab-th"><p class="tab-para">Variable title</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="tab-para">Home</p></td>
<td><p class="tab-para">/static_pages/home</p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>"Ruby on Rails Tutorial Sample App"</code></strong></span></p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>"Home"</code></strong></span></p></td>
</tr>
<tr>
<td><p class="tab-para">Help</p></td>
<td><p class="tab-para">/static_pages/help</p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>"Ruby on Rails Tutorial Sample App"</code></strong></span></p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>"Help"</code></strong></span></p></td>
</tr>
<tr>
<td><p class="tab-para">About</p></td>
<td><p class="tab-para">/static_pages/about</p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>"Ruby on Rails Tutorial Sample App"</code></strong></span></p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>"About"</code></strong></span></p></td>
</tr>
</tbody>
</table>
</figure>
<p class="indent">Our plan is to edit the Home, Help, and About pages to make page titles that change on each page. This will involve using the <span class="dark-green"><strong><code>&lt;title&gt;</code></strong></span> tag in our page views. Most browsers display the contents of the title tag at the top of the browser window, and it is also important for search-engine optimization. We’ll be using the full “Red, Green, Refactor” cycle: first by adding simple tests for our page titles (<span class="red5"><small>RED</small></span>), then by adding titles to each of our three pages (<span class="green5"><small>GREEN</small></span>), and finally using a <em>layout</em> file to eliminate duplication (Refactor). By the end of this section, all three of our static pages will have titles of the form “&lt;page name&gt; | Ruby on Rails Tutorial Sample App,” where the first part of the title will vary depending on the page (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03tab02">Table 3.2</a>).</p>
<p class="indent">The <span class="dark-green"><strong><code>rails new</code></strong></span> command (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex01">Listing 3.1</a>) creates a layout file by default, but it’s instructive to ignore it initially, which we can do by changing its name:</p>
<p class="codelink"><a id="pf0129-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0129-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> mv app/views/layouts/application.html.erb layout_file  <span class="blue"># temporary change</span></pre>
<p class="noindent">You wouldn’t normally do this in a real application, but it’s easier to understand the purpose of the layout file if we start by disabling it.</p>
<section>
<h4 class="h4" id="sec3_4_1">3.4.1 Testing Titles (Red)</h4>
<p class="noindent">To add page titles, we need to learn (or review) the structure of a typical web page, which takes the form shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex025">Listing 3.25</a>. (This is covered in much more depth in <em>Learn Enough HTML to Be Dangerous</em>, <a href="http://www.learnenough.com/html">www.learnenough.com/html</a>.)</p>
<p class="ex-title" id="ch03ex025"><strong>Listing 3.25:</strong> The HTML structure of a typical web page.</p>
<p class="codelink"><a id="pf0129-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0129-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="green"><strong>html</strong></span>&gt;
  &lt;<span class="green"><strong>head</strong></span>&gt;
<span epub:type="pagebreak" id="page_130"></span>    &lt;<span class="green"><strong>title</strong></span>&gt;Greeting&lt;/<span class="green"><strong>title</strong></span>&gt;
  &lt;/<span class="green"><strong>head</strong></span>&gt;
  &lt;<span class="green"><strong>body</strong></span>&gt;
    &lt;<span class="green"><strong>p</strong></span>&gt;Hello, world!&lt;/<strong><span class="green">p</span></strong>&gt;
  &lt;/<span class="green"><strong>body</strong></span>&gt;
&lt;/<span class="green"><strong>html</strong></span>&gt;</pre>
</div>
<p class="noindent">The structure in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex025">Listing 3.25</a> includes a <em>document type</em>, or doctype, declaration at the top to tell browsers which version of HTML we’re using (in this case, HTML5);<sup><a id="ch03fn10a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn10">10</a></sup> a <span class="dark-green"><strong><code>head</code></strong></span> section, in this case with “Greeting” inside a <span class="dark-green"><strong><code>title</code></strong></span> tag; and a <span class="dark-green"><strong><code>body</code></strong></span> section, in this case with “Hello, world!” inside a <span class="dark-green"><strong><code>p</code></strong></span> (paragraph) tag. (The indentation is optional— HTML is not sensitive to whitespace, and ignores both tabs and spaces—but it makes the document’s structure easier to see.)</p>
<p class="footnote"><a id="ch03fn10" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn10a">10</a>. HTML changes with time; by explicitly making a doctype declaration we make it likelier that browsers will render our pages properly in the future. The simple doctype <span class="dark-green"><strong><code>&lt;!DOCTYPE html&gt;</code></strong></span> is characteristic of the latest HTML standard, HTML5.</p>
<p class="indent">We’ll write simple tests for each of the titles in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03tab02">Table 3.2</a> by combining the tests in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex017">Listing 3.17</a> with the <span class="dark-green"><strong><code>assert_select</code></strong></span> method, which lets us test for the presence of a particular HTML tag (sometimes called a “selector”—hence the name):<sup><a id="ch03fn11a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn11">11</a></sup></p>
<p class="footnote"><a id="ch03fn11" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn11a">11</a>. For a list of common minitest assertions, see the table of available assertions in the Rails Guides testing article.</p>
<p class="codelink"><a id="pf0130-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0130-02a">Click here to view code image</a></p>
<pre class="pre1">assert_select <span class="maroon">"title"</span>, <span class="maroon">"Home | Ruby on Rails Tutorial Sample App"</span></pre>
<p class="noindent">In particular, this code checks for the presence of a <span class="dark-green"><strong><code>&lt;title&gt;</code></strong></span> tag containing the string “Home | Ruby on Rails Tutorial Sample App”. Applying this idea to all three static pages gives the tests shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex026">Listing 3.26</a>.</p>
<p class="ex-title" id="ch03ex026"><strong>Listing 3.26:</strong> The Static Pages controller test with title tests. <span class="red5"><small><code>RED</code></small></span></p>
<pre class="pre2">test/controllers/static_pages_controller_test.rb</pre>
<p class="codelink"><a id="pf0130-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0130-03a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green1">require</span> <span class="maroon">'test_helper'</span>

<span class="green"><strong>class</strong></span> <strong><span class="blue3">StaticPagesControllerTest</span></strong> <span class="ash">&lt;</span> <span class="red">ActionDispatch</span><span class="ash">::</span><span class="red">IntegrationTest</span>

  <span class="green1">test</span> <span class="maroon">"should get home"</span> <strong><span class="green">do</span></strong>
    get static_pages_home_url
    assert_response <span class="violet">:success</span>
<span epub:type="pagebreak" id="page_131"></span><span class="mark">    assert_select <span class="red2">"title"</span>, <span class="red2">"Home | Ruby on Rails Tutorial Sample App"</span></span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get help"</span> <strong><span class="green">do</span></strong>
    get static_pages_help_url
    assert_response <span class="violet">:success</span>
<span class="mark">    assert_select <span class="red2">"title"</span>, <span class="red2">"Help | Ruby on Rails Tutorial Sample App"</span></span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get about"</span> <strong><span class="green">do</span></strong>
    get static_pages_about_url
    assert_response <span class="violet">:success</span>
<span class="mark">    assert_select <span class="red2">"title"</span>, <span class="red2">"About | Ruby on Rails Tutorial Sample App"</span></span>
  <strong><span class="green">end</span></strong>
<span class="green"><strong>end</strong></span></pre>
</div>
<p class="indent">With the tests from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex026">Listing 3.26</a> in place, you should verify that the test suite is currently <span class="red5"><small>RED</small></span>:</p>
<p class="ex-title" id="ch03ex027"><strong>Listing 3.27:</strong> <span class="red5"><small><code>RED</code></small></span></p>
<p class="codelink"><a id="pf0131-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0131-02a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails test
3 tests, 6 assertions, 3 failures, 0 errors, 0 skips</pre>
</div>
</section>
<section>
<h4 class="h4" id="sec3_4_2">3.4.2 Adding Page Titles (Green)</h4>
<p class="noindent">Now we’ll add a title to each page, getting the tests from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_4_1">Section 3.4.1</a> to pass in the process. Applying the basic HTML structure from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex025">Listing 3.25</a> to the custom Home page from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex012">Listing 3.12</a> yields <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex028">Listing 3.28</a>.</p>
<p class="ex-title" id="ch03ex028"><strong>Listing 3.28:</strong> The view for the Home page with full HTML structure. <span class="red5"><small><code>RED</code></small></span></p>
<pre class="pre2">app/views/static_pages/home.html.erb</pre>
<p class="codelink"><a id="pf0131-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0131-03a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="green"><strong>html</strong></span>&gt;
  &lt;<span class="green"><strong>head</strong></span>&gt;
    &lt;<span class="green"><strong>title</strong></span>&gt;Home | Ruby on Rails Tutorial Sample App&lt;/<span class="green"><strong>title</strong></span>&gt;
  &lt;/<span class="green"><strong>head</strong></span>&gt;
  &lt;<span class="green"><strong>body</strong></span>&gt;
<span epub:type="pagebreak" id="page_132"></span>    &lt;<span class="green"><strong>h1</strong></span>&gt;Sample App&lt;/<span class="green"><strong>h1</strong></span>&gt;
    &lt;<span class="green"><strong>p</strong></span>&gt;
      This is the home page for the
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;Ruby on Rails Tutorial&lt;/<span class="green"><strong>a</strong></span>&gt;
      sample application.
    &lt;/<span class="green"><strong>p</strong></span>&gt;
  &lt;/<span class="green"><strong>body</strong></span>&gt;
&lt;/<span class="green"><strong>html</strong></span>&gt;</pre>
</div>
<p class="noindent">The corresponding web page appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig08">Figure 3.8</a>. Note that the browser used in the screenshots (Safari) displays the page title only if you include an additional tab, which explains the second tab shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig08">Figure 3.8</a>.</p>
<figure id="ch03fig08" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_08.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_08.jpg">
<figcaption><p><strong>Figure 3.8:</strong> The Home page with a title.</p></figcaption>
</figure>
<p class="indent">Following this model for the Help page (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex013">Listing 3.13</a>) and the About page (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex023">Listing 3.23</a>) yields the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex029">Listing 3.29</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex030">Listing 3.30</a>.<span epub:type="pagebreak" id="page_133"></span></p>
<p class="ex-title" id="ch03ex029"><strong>Listing 3.29:</strong> The view for the Help page with full HTML structure. <span class="red5"><small><code>RED</code></small></span></p>
<pre class="pre2">app/views/static_pages/help.html.erb</pre>
<p class="codelink"><a id="pf0133-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0133-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="green"><strong>html</strong></span>&gt;
  &lt;<span class="green"><strong>head</strong></span>&gt;
    &lt;<span class="green"><strong>title</strong></span>&gt;Help | Ruby on Rails Tutorial Sample App&lt;/<span class="green"><strong>title</strong></span>&gt;
  &lt;/<span class="green"><strong>head</strong></span>&gt;
  &lt;<span class="green"><strong>body</strong></span>&gt;
    &lt;<span class="green"><strong>h1</strong></span>&gt;Help&lt;/<span class="green"><strong>h1</strong></span>&gt;
    &lt;<span class="green"><strong>p</strong></span>&gt;
      Get help on the Ruby on Rails Tutorial at the
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/help"</span>&gt;Rails Tutorial help
      page&lt;/<span class="green"><strong>a</strong></span>&gt;.
      To get help on this sample app, see the
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/book"</span>&gt;&lt;<span class="green"><strong>em</strong></span>&gt;Ruby on Rails
      Tutorial&lt;/<span class="green"><strong>em</strong></span>&gt; book&lt;/<span class="green"><strong>a</strong></span>&gt;.
    &lt;/<span class="green"><strong>p</strong></span>&gt;
  &lt;/<span class="green"><strong>body</strong></span>&gt;
&lt;/<span class="green"><strong>html</strong></span>&gt;</pre>
</div>
<p class="ex-title" id="ch03ex030"><strong>Listing 3.30:</strong> The view for the About page with full HTML structure. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">app/views/static_pages/about.html.erb</pre>
<p class="codelink"><a id="pf0133-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0133-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="green"><strong>html</strong></span>&gt;
  &lt;<span class="green"><strong>head</strong></span>&gt;
    &lt;<span class="green"><strong>title</strong></span>&gt;About | Ruby on Rails Tutorial Sample App&lt;/<span class="green"><strong>title</strong></span>&gt;
  &lt;/<span class="green"><strong>head</strong></span>&gt;
  &lt;<span class="green"><strong>body</strong></span>&gt;
    &lt;<span class="green"><strong>h1</strong></span>&gt;About&lt;/<span class="green"><strong>h1</strong></span>&gt;
    &lt;<span class="green"><strong>p</strong></span>&gt;
      The &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;&lt;<span class="green"><strong>em</strong></span>&gt;Ruby on Rails
      Tutorial&lt;/<span class="green"><strong>em</strong></span>&gt;&lt;/<span class="green"><strong>a</strong></span>&gt;, part of the
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.learnenough.com/"</span>&gt;Learn Enough&lt;/<span class="green"><strong>a</strong></span>&gt; family of
      tutorials, is a
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/book"</span>&gt;book&lt;/<span class="green"><strong>a</strong></span>&gt; and
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://screencasts.railstutorial.org/"</span>&gt;screencast series&lt;/<span class="green"><strong>a</strong></span>&gt;
      to teach web development with
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://rubyonrails.org/"</span>&gt;Ruby on Rails&lt;/<span class="green"><strong>a</strong></span>&gt;.
      This is the sample app for the tutorial.
    &lt;/<span class="green"><strong>p</strong></span>&gt;
  &lt;/<span class="green"><strong>body</strong></span>&gt;
&lt;/<span class="green"><strong>html</strong></span>&gt;</pre>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_134"></span>At this point, the test suite should be back to <span class="green5"><small>GREEN</small></span>:</p>
<p class="ex-title" id="ch03ex031"><strong>Listing 3.31:</strong> <span class="green5"><small><code>GREEN</code></small></span></p>
<p class="codelink"><a id="pf0134-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0134-01a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails test
3 tests, 6 assertions, 0 failures, 0 errors, 0 skips</pre>
</div>
<section>
<h5 class="h5" id="lev25">Exercise</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<p class="indent">Beginning in this section, we’ll start making modifications to the applications in the exercises that won’t generally be reflected in future code listings. The reason is so that the text makes sense to readers who don’t complete the exercises, but as a result your code will diverge from the main text if you <em>do</em> solve them. Learning to resolve small discrepancies like this is an excellent example of technical sophistication (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#box1_2">Box 1.2</a>).</p>
<ol class="num">
<li><p class="num">You may have noticed some repetition in the Static Pages controller test (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex026">Listing 3.26</a>). In particular, the base title, “Ruby on Rails Tutorial Sample App,” is the same for every title test. Using the special function <span class="dark-green"><strong><code>setup</code></strong></span>, which is automatically run before every test, verify that the tests in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex032">Listing 3.32</a> are still <span class="green5"><small>GREEN</small></span>. (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex032">Listing 3.32</a> uses an <em>instance variable</em>, seen briefly in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2_2">Section 2.2.2</a> and covered further in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_4_5">Section 4.4.5</a>, combined with <em>string interpolation</em>, which is covered further in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_2_2">Section 4.2.2</a>.)</p></li>
</ol>
<p class="ex-title" id="ch03ex032"><strong>Listing 3.32:</strong> The Static Pages controller test with a base title. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">test/controllers/static_pages_controller_test.rb</pre>
<p class="codelink"><a id="pf0134-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0134-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green1">require</span> <span class="maroon">'test_helper'</span>

<span class="green"><strong>class</strong></span> <strong><span class="blue3">StaticPagesControllerTest</span></strong> <span class="ash">&lt;</span> <span class="red">ActionDispatch</span><span class="ash">::</span><span class="red">IntegrationTest</span>
<span class="mark">  <strong><span class="green3">def</span></strong> <span class="blue5">setup</span></span>
<span class="mark">    <span class="blue1">@base_title</span> <span class="ash1">=</span> <span class="red2">"Ruby on Rails Tutorial Sample App"</span></span>
<span class="mark">  <strong><span class="green3">end</span></strong></span>

  <span class="green1">test</span> <span class="maroon">"should get home"</span> <strong><span class="green">do</span></strong>
    get static_pages_home_url
    assert_response <span class="violet">:success</span>
<span epub:type="pagebreak" id="page_135"></span><span class="mark">    assert_select <span class="red2">"title"</span>, <span class="red2">"Home |</span> <span class="pink1">#{</span><span class="blue1">@base_title</span><span class="pink1">}</span><span class="red2">"</span></span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get help"</span> <strong><span class="green">do</span></strong>
    get static_pages_help_url
    assert_response <span class="violet">:success</span>
<span class="mark">    assert_select <span class="red2">"title"</span>, <span class="red2">"Help |</span> <span class="pink1">#{</span><span class="blue1">@base_title</span><span class="pink1">}</span><span class="red2">"</span></span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get about"</span> <strong><span class="green">do</span></strong>
    get static_pages_about_url
    assert_response <span class="violet">:success</span>
<span class="mark">    assert_select <span class="red2">"title"</span>, <span class="red2">"About |</span> <span class="pink1">#{</span><span class="blue1">@base_title</span><span class="pink1">}</span><span class="red2">"</span></span>
  <strong><span class="green">end</span></strong>
<span class="green"><strong>end</strong></span></pre>
</div>
</section>
</section>
<section>
<h4 class="h4" id="sec3_4_3">3.4.3 Layouts and Embedded Ruby (Refactor)</h4>
<p class="noindent">We’ve achieved a lot already in this section, generating three valid pages using Rails controllers and actions, but they are purely static HTML and hence don’t show off the power of Rails. Moreover, they suffer from terrible duplication:</p>
<p class="bullet">• The page titles are almost (but not quite) exactly the same.</p>
<p class="bullet">• “Ruby on Rails Tutorial Sample App” is common to all three titles.</p>
<p class="bullet">• The entire HTML skeleton structure is repeated on each page.</p>
<p class="noindent">This repeated code is a violation of the important “Don’t Repeat Yourself ” (DRY) principle; in this section we’ll “DRY out our code” by removing the repetition. At the end, we’ll re-run the tests from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_4_2">Section 3.4.2</a> to verify that the titles are still correct.</p>
<p class="indent">Paradoxically, we’ll take the first step toward eliminating duplication by first adding some more: We’ll make the titles of the pages, which are currently quite similar, match <em>exactly</em>. This will make it much simpler to remove all the repetition at a stroke.</p>
<p class="indent">The technique involves using <em>embedded Ruby</em> in our views. Since the Home, Help, and About page titles have a variable component, we’ll use a special Rails function called <span class="dark-green"><strong><code>provide</code></strong></span> to set a different title on each page. We can see how this works by replacing the literal title “Home” in the <span class="dark-green"><strong><code>home.html.erb</code></strong></span> view with the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex033">Listing 3.33</a>.<span epub:type="pagebreak" id="page_136"></span></p>
<p class="ex-title" id="ch03ex033"><strong>Listing 3.33:</strong> The view for the Home page with an embedded Ruby title. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">app/views/static_pages/home.html.erb</pre>
<p class="codelink"><a id="pf0136-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0136-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="mark"><span class="maroon1">&lt;%</span> provide(<span class="blue1">:title</span>, <span class="red2">"Home"</span>) <span class="maroon1">%&gt;</span></span>
<span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="green"><strong>html</strong></span>&gt;
  &lt;<span class="green"><strong>head</strong></span>&gt;
<span class="mark">    <span class="green3">&lt;</span><span class="green3"><strong>title</strong></span><span class="green3">&gt;</span><span class="maroon1">&lt;%=</span> <span class="green3"><strong>yield</strong></span>(<span class="blue1">:title</span>) <span class="maroon1">%&gt;</span> | Ruby on Rails Tutorial Sample App<span class="green3">&lt;/</span><span class="green3"><strong>title</strong></span>&gt;</span>
  &lt;/<span class="green"><strong>head</strong></span>&gt;
  &lt;<span class="green"><strong>body</strong></span>&gt;
    &lt;<span class="green"><strong>h1</strong></span>&gt;Sample App&lt;/<span class="green"><strong>h1</strong></span>&gt;
    &lt;<span class="green"><strong>p</strong></span>&gt;
      This is the home page for the
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;Ruby on Rails Tutorial&lt;/<span class="green"><strong>a</strong></span>&gt;
      sample application.
    &lt;/<span class="green"><strong>p</strong></span>&gt;
  &lt;/<span class="green"><strong>body</strong></span>&gt;
&lt;/<span class="green"><strong>html</strong></span>&gt;</pre>
</div>
<p class="noindent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex033">Listing 3.33</a> is our first example of embedded Ruby, also called <em>ERb</em> (or ERB). (Now you know why HTML views have the file extension <span class="dark-green"><strong><code>.html.erb</code></strong></span>.) ERb is the primary template system for including dynamic content in web pages.<sup><a id="ch03fn12a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn12">12</a></sup> The code</p>
<p class="footnote"><a id="ch03fn12" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn12a">12</a>. There is a second popular template system called Haml (note: not “HAML”), which I personally love, but it’s not <em>quite</em> standard enough for use in an introductory tutorial.</p>
<pre class="pre1"><span class="red5">&lt;%</span> provide(<span class="violet">:title</span>, <span class="maroon">"Home"</span>) <span class="red5">%&gt;</span></pre>
<p class="noindent">indicates using <span class="dark-green"><strong><code>&lt;% ... %&gt;</code></strong></span> that Rails should call the <span class="dark-green"><strong><code>provide</code></strong></span> function and associate the string <span class="dark-green"><strong><code>"Home"</code></strong></span> with the label <span class="dark-green"><strong><code>:title</code></strong></span>.<sup><a id="ch03fn13a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn13">13</a></sup> Then, in the title, we use the closely related notation <span class="dark-green"><strong><code>&lt;%= ... %&gt;</code></strong></span> to insert the title into the template using Ruby’s <span class="dark-green"><strong><code>yield</code></strong></span> function:<sup><a id="ch03fn14a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn14">14</a></sup></p>
<p class="footnote"><a id="ch03fn13" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn13a">13</a>. Experienced Rails developers might have expected the use of <span class="dark-green"><strong><code>content_for</code></strong></span> at this point, but it doesn’t work well with the asset pipeline. The <span class="dark-green"><strong><code>provide</code></strong></span> function is its replacement.</p>
<p class="footnote"><a id="ch03fn14" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn14a">14</a>. If you’ve studied Ruby before, you might suspect that Rails is <em>yielding</em> the contents to a block, and your suspicion would be correct. But you don’t need to know this to develop applications with Rails.</p>
<p class="codelink"><a id="pf0136-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0136-03a">Click here to view code image</a></p>
<pre class="pre1">&lt;<span class="green"><strong>title</strong></span>&gt;<span class="red5">&lt;%=</span> <span class="green"><strong>yield</strong></span>(<span class="violet">:title</span>) <span class="red5">%&gt;</span> | Ruby on Rails Tutorial Sample App&lt;/<span class="green"><strong>title</strong></span>&gt;</pre>
<p class="noindent">(The distinction between the two types of embedded Ruby is that <span class="dark-green"><strong><code>&lt;% ... %&gt;</code></strong></span> <em>executes</em> the code inside, while <span class="dark-green"><strong><code>&lt;%= ... %&gt;</code></strong></span> executes it <em>and inserts</em> the result into the template.) <span epub:type="pagebreak" id="page_137"></span>The resulting page is exactly the same as before, only now the variable part of the title is generated dynamically by ERb.</p>
<p class="indent">We can verify that all this works by running the tests from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_4_2">Section 3.4.2</a> and confirming that they are still <span class="green5"><small>GREEN</small></span>:</p>
<p class="ex-title" id="ch03ex034"><strong>Listing 3.34:</strong> <code>GREEN</code></p>
<p class="codelink"><a id="pf0137-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0137-01a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails test
3 tests, 6 assertions, 0 failures, 0 errors, 0 skips</pre>
</div>
<p class="noindent">Then we can make the corresponding replacements for the Help and About pages (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex035">Listing 3.35</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex036">Listing 3.36</a>).</p>
<p class="ex-title" id="ch03ex035"><strong>Listing 3.35:</strong> The view for the Help page with an embedded Ruby title. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">app/views/static_pages/help.html.erb</pre>
<p class="codelink"><a id="pf0137-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0137-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="mark"><span class="maroon1">&lt;%</span> provide(<span class="blue1">:title</span>, <span class="red2">"Help"</span>) <span class="maroon1">%&gt;</span></span>
<span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="green"><strong>html</strong></span>&gt;
  &lt;<span class="green"><strong>head</strong></span>&gt;
<span class="mark">    <span class="green3">&lt;</span><span class="green3"><strong>title</strong></span><span class="green3">&gt;</span><span class="maroon1">&lt;%=</span> <span class="green3"><strong>yield</strong></span>(<span class="blue1">:title</span>) <span class="maroon1">%&gt;</span> | Ruby on Rails Tutorial Sample App<span class="green3">&lt;/</span><span class="green3"><strong>title</strong></span>&gt;</span>
  &lt;/<span class="green"><strong>head</strong></span>&gt;
  &lt;<span class="green"><strong>body</strong></span>&gt;
    &lt;<span class="green"><strong>h1</strong></span>&gt;Help&lt;/<span class="green"><strong>h1</strong></span>&gt;
    &lt;<span class="green"><strong>p</strong></span>&gt;
      Get help on the Ruby on Rails Tutorial at the
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/help"</span>&gt;Rails Tutorial help
      section&lt;/<span class="green"><strong>a</strong></span>&gt;.
      To get help on this sample app, see the
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/book"</span>&gt;&lt;<span class="green"><strong>em</strong></span>&gt;Ruby on Rails
      Tutorial&lt;/<span class="green"><strong>em</strong></span>&gt; book&lt;/<span class="green"><strong>a</strong></span>&gt;.
    &lt;/<span class="green"><strong>p</strong></span>&gt;
  &lt;/<span class="green"><strong>body</strong></span>&gt;
&lt;/<span class="green"><strong>html</strong></span>&gt;</pre>
</div>
<p class="ex-title" id="ch03ex036"><strong>Listing 3.36:</strong> The view for the About page with an embedded Ruby title. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">app/views/static_pages/about.html.erb</pre>
<p class="codelink"><a id="pf0137-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0137-03a">Click here to view code image</a></p>
<div class="example">
<pre><span class="mark"><span class="maroon1">&lt;%</span> provide(<span class="blue1">:title</span>, <span class="red2">"About"</span>) <span class="maroon1">%&gt;</span></span>
<span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="green"><strong>html</strong></span>&gt;
  &lt;<span class="green"><strong>head</strong></span>&gt;
<span epub:type="pagebreak" id="page_138"></span><span class="mark">    <span class="green3">&lt;</span><span class="green3"><strong>title</strong></span><span class="green3">&gt;</span><span class="maroon1">&lt;%=</span> <span class="green3"><strong>yield</strong></span>(<span class="blue1">:title)</span> <span class="maroon1">%&gt;</span> | Ruby on Rails Tutorial Sample App<span class="green3">&lt;/</span><span class="green3"><strong>title</strong></span>&gt;</span>
  &lt;/<span class="green"><strong>head</strong></span>&gt;
  &lt;<span class="green"><strong>body</strong></span>&gt;
    &lt;<span class="green"><strong>h1</strong></span>&gt;About&lt;/<span class="green"><strong>h1</strong></span>&gt;
    &lt;<span class="green"><strong>p</strong></span>&gt;
      The &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;&lt;<span class="green"><strong>em</strong></span>&gt;Ruby on Rails
      Tutorial&lt;/<span class="green"><strong>em</strong></span>&gt;&lt;/<span class="green"><strong>a</strong></span>&gt;, part of the
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.learnenough.com/"</span>&gt;Learn Enough&lt;/<span class="green"><strong>a</strong></span>&gt; family of
      tutorials, is a
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/book"</span>&gt;book&lt;/<span class="green"><strong>a</strong></span>&gt; and
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://screencasts.railstutorial.org/"</span>&gt;screencast series&lt;/<span class="green"><strong>a</strong></span>&gt;
      to teach web development with
      &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://rubyonrails.org/"</span>&gt;Ruby on Rails&lt;/<span class="green"><strong>a</strong></span>&gt;.
      This is the sample app for the tutorial.
    &lt;/<span class="green"><strong>p</strong></span>&gt;
  &lt;/<span class="green"><strong>body</strong></span>&gt;
&lt;/<span class="green"><strong>html</strong></span>&gt;</pre>
</div>
<p class="indent">Now that we’ve replaced the variable part of the page titles with ERb, each of our pages looks something like this:</p>
<p class="codelink"><a id="pf0138-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0138-02a">Click here to view code image</a></p>
<pre class="pre1"><span class="red5">&lt;%</span> provide(<span class="violet">:title</span>, <span class="maroon">"Page Title"</span>) <span class="red5">%&gt;</span>
<span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="green"><strong>html</strong></span>&gt;
  &lt;<span class="green"><strong>head</strong></span>&gt;
    &lt;<span class="green"><strong>title</strong></span>&gt;<span class="red5">&lt;%=</span> <span class="green"><strong>yield</strong></span>(<span class="violet">:title</span>) <span class="red5">%&gt;</span> | Ruby on Rails Tutorial Sample App&lt;/<span class="green"><strong>title</strong></span>&gt;
  &lt;/<span class="green"><strong>head</strong></span>&gt;
  &lt;<span class="green"><strong>body</strong></span>&gt;
    Contents
  &lt;/<span class="green"><strong>body</strong></span>&gt;
&lt;/<span class="green"><strong>html</strong></span>&gt;</pre>
<p class="noindent">In other words, all the pages are identical in structure, including the contents of the title tag, with the sole exception of the material inside the <span class="dark-green"><strong><code>body</code></strong></span> tag.</p>
<p class="indent">To factor out this common structure, Rails comes with a special <em>layout</em> file called <span class="dark-green"><strong><code>application.html.erb</code></strong></span>, which we renamed in the beginning of this section (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_4">Section 3.4</a>) and which we’ll now restore:</p>
<p class="codelink"><a id="pf0138-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0138-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> mv layout_file app/views/layouts/application.html.erb</pre>
<p class="indent"><span epub:type="pagebreak" id="page_139"></span>To get the layout to work, we have to replace the default title with the embedded Ruby from the preceding examples:</p>
<p class="codelink"><a id="pf0139-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0139-01a">Click here to view code image</a></p>
<pre class="pre1">&lt;<span class="green"><strong>title</strong></span>&gt;<span class="red5">&lt;%=</span> <span class="green"><strong>yield</strong></span>(<span class="violet">:title</span>) <span class="red5">%&gt;</span> | Ruby on Rails Tutorial Sample App&lt;/<span class="green"><strong>title</strong></span>&gt;</pre>
<p class="noindent">The resulting layout appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex037">Listing 3.37</a>.</p>
<p class="ex-title" id="ch03ex037"><strong>Listing 3.37:</strong> The sample application site layout. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">app/views/layouts/application.html.erb</pre>
<p class="codelink"><a id="pf0139-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0139-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;!DOCTYPE html&gt;</span>
&lt;<span class="green"><strong>html</strong></span>&gt;
  &lt;<span class="green"><strong>head</strong></span>&gt;
<span class="mark">    <span class="green3">&lt;</span><span class="green3"><strong>title</strong></span><span class="green3">&gt;</span><span class="maroon1">&lt;%=</span> <span class="green3"><strong>yield</strong></span>(<span class="blue1">:title</span>) <span class="maroon1">%&gt;</span> | Ruby on Rails Tutorial Sample App<span class="green3">&lt;/</span><span class="green3"><strong>title</strong></span>&gt;</span>
    &lt;<span class="green"><strong>meta</strong></span> <span class="ash3">charset</span><span class="ash">=</span><span class="maroon">"utf-8"</span>&gt;
    <span class="red5">&lt;%=</span> csrf_meta_tags <span class="red5">%&gt;</span>
    <span class="red5">&lt;%=</span> csp_meta_tag <span class="red5">%&gt;</span>

    <span class="red5">&lt;%=</span> stylesheet_link_tag <span class="maroon">'application'</span>, <span class="violet">media</span>: <span class="maroon">'all'</span>,
                                           <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span> <span class="red5">%&gt;</span>
    <span class="red5">&lt;%=</span> javascript_pack_tag <span class="maroon">'application'</span>, <span class="maroon">'data-turbolinks-track'</span>: <span class="maroon">'reload'</span> <span class="red5">%&gt;</span>
  &lt;/<span class="green"><strong>head</strong></span>&gt;

  &lt;<span class="green"><strong>body</strong></span>&gt;
    <span class="red5">&lt;%=</span> <span class="green"><strong>yield</strong></span> <span class="red5">%&gt;</span>
  &lt;/<span class="green"><strong>body</strong></span>&gt;
&lt;/<span class="green"><strong>html</strong></span>&gt;</pre>
</div>
<p class="noindent">Note here the special line</p>
<pre class="pre1"><span class="red5">&lt;%=</span> <span class="green"><strong>yield</strong></span> <span class="red5">%&gt;</span></pre>
<p class="noindent">This code is responsible for inserting the contents of each page into the layout. It’s not important to know exactly how this works; what matters is that using this layout ensures that, for example, visiting the page /static_pages/home converts the contents of <span class="dark-green"><strong><code>home.html.erb</code></strong></span> to HTML and then inserts it in place of <span class="dark-green"><strong><code>&lt;%= yield %&gt;</code></strong></span>.</p>
<p class="indent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex037">Listing 3.37</a> also includes the “character set”, which in this case is utf-8 for displaying Unicode.</p>
<p class="indent">Finally, it’s worth noting that the default Rails layout includes several additional lines:<span epub:type="pagebreak" id="page_140"></span></p>
<p class="codelink"><a id="pf0140-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0140-01a">Click here to view code image</a></p>
<pre class="pre1"><span class="red5">&lt;%=</span> csrf_meta_tags <span class="red5">%&gt;</span>
<span class="red5">&lt;%=</span> csp_meta_tag <span class="red5">%&gt;</span>
<span class="red5">&lt;%=</span> stylesheet_link_tag <span class="ash">...</span> <span class="red5">%&gt;</span>
<span class="red5">&lt;%=</span> javascript_pack_tag <span class="maroon">"application"</span>, <span class="ash">...</span> <span class="red5">%&gt;</span></pre>
<p class="noindent">This code arranges to include the application stylesheet and JavaScript, which are part of the asset pipeline (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch05.xhtml#sec5_2_1">Section 5.2.1</a>), together with the Rails method <span class="dark-green"><strong><code>csp_meta_tag</code></strong></span>, which implements Content Security Policy (CSP) to mitigate cross-site scripting (XSS) attacks, and <span class="dark-green"><strong><code>csrf_meta_tags</code></strong></span>, which mitigates cross-site request forgery (CSRF) attacks. (One huge advantage of using a mature framework like Rails is that it worries about such things so that we don’t have to.)</p>
<p class="indent">Even though the tests are passing, there one detail left to deal with: The views in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex033">Listing 3.33</a>, <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex035">Listing 3.35</a>, and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex036">Listing 3.36</a> are still filled with all the HTML structure included in the layout. Since it’s redundant (and indeed leads to invalid HTML markup), we should remove it and leave only the interior contents. The resulting cleaned-up views appear in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex038">Listing 3.38</a>, <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex039">Listing 3.39</a>, and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex040">Listing 3.40</a>.</p>
<p class="ex-title" id="ch03ex038"><strong>Listing 3.38:</strong> The Home page with HTML structure removed. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">app/views/static_pages/home.html.erb</pre>
<p class="codelink"><a id="pf0140-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0140-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;%</span> provide(<span class="violet">:title</span>, <span class="maroon">"Home"</span>) <span class="red5">%&gt;</span>
&lt;<span class="green"><strong>h1</strong></span>&gt;Sample App&lt;/<span class="green"><strong>h1</strong></span>&gt;
&lt;<span class="green"><strong>p</strong></span>&gt;
  This is the home page for the
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;Ruby on Rails Tutorial&lt;/<span class="green"><strong>a</strong></span>&gt;
  sample application.
&lt;/<span class="green"><strong>p</strong></span>&gt;</pre>
</div>
<p class="ex-title" id="ch03ex039"><strong>Listing 3.39:</strong> The Help page with HTML structure removed. <code>GREEN</code></p>
<pre class="pre2">app/views/static_pages/help.html.erb</pre>
<p class="codelink"><a id="pf0140-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0140-03a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;%</span> provide(<span class="violet">:title</span>, <span class="maroon">"Help"</span>) <span class="red5">%&gt;</span>
&lt;<span class="green"><strong>h1</strong></span>&gt;Help&lt;/<span class="green"><strong>h1</strong></span>&gt;
&lt;<span class="green"><strong>p</strong></span>&gt;
  Get help on the Ruby on Rails Tutorial at the
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/help"</span>&gt;Rails Tutorial Help page&lt;/<span class="green"><strong>a</strong></span>&gt;.
  To get help on this sample app, see the
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/book"</span>&gt;&lt;<span class="green"><strong>em</strong></span>&gt;Ruby on Rails Tutorial&lt;/<span class="green"><strong>em</strong></span>&gt;
  book&lt;/<span class="green"><strong>a</strong></span>&gt;.
&lt;/<span class="green"><strong>p</strong></span>&gt;</pre>
</div>
<p class="ex-title" id="ch03ex040"><span epub:type="pagebreak" id="page_141"></span><strong>Listing 3.40:</strong> The About page with HTML structure removed. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">app/views/static_pages/about.html.erb</pre>
<p class="codelink"><a id="pf0141-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0141-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;%</span> provide(<span class="violet">:title</span>, <span class="maroon">"About"</span>) <span class="red5">%&gt;</span>
&lt;<span class="green"><strong>h1</strong></span>&gt;About&lt;/<span class="green"><strong>h1</strong></span>&gt;
&lt;<span class="green"><strong>p</strong></span>&gt;
  The &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/"</span>&gt;&lt;<span class="green"><strong>em</strong></span>&gt;Ruby on Rails
  Tutorial&lt;/<span class="green"><strong>em</strong></span>&gt;&lt;/<span class="green"><strong>a</strong></span>&gt;, part of the
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.learnenough.com/"</span>&gt;Learn Enough&lt;/<span class="green"><strong>a</strong></span>&gt; family of
  tutorials, is a
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/book"</span>&gt;book&lt;/<span class="green"><strong>a</strong></span>&gt; and
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://screencasts.railstutorial.org/"</span>&gt;screencast series&lt;/<span class="green"><strong>a</strong></span>&gt;
  to teach web development with
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://rubyonrails.org/"</span>&gt;Ruby on Rails&lt;/<span class="green"><strong>a</strong></span>&gt;.
  This is the sample app for the tutorial.
&lt;/<span class="green"><strong>p</strong></span>&gt;</pre>
</div>
<p class="noindent">With these views defined, the Home, Help, and About pages are the same as before, but they have much less duplication.</p>
<p class="indent">Experience shows that even fairly simple refactoring is error-prone and can easily go awry. This is one reason why having a good test suite is so valuable. Rather than double-checking every page for correctness—a procedure that isn’t too hard early on but rapidly becomes unwieldy as an application grows—we can simply verify that the test suite is still <span class="green5"><small>GREEN</small></span>:</p>
<p class="ex-title" id="ch03ex041"><strong>Listing 3.41:</strong> <span class="green5"><small><code>GREEN</code></small></span></p>
<p class="codelink"><a id="pf0141-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0141-02a">Click here to view code image</a></p>
<div class="example">
<pre>$ rails test
3 tests, 6 assertions, 0 failures, 0 errors, 0 skips</pre>
</div>
<p class="noindent">This isn’t a <em>proof</em> that our code is still correct, but it greatly increases the probability, thereby providing a safety net to protect us against future bugs.</p>
<section>
<h5 class="h5" id="lev26">Exercise</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.<span epub:type="pagebreak" id="page_142"></span></p>
<ol class="num">
<li><p class="num">Make a Contact page for the sample app.<sup><a id="ch03fn15a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn15">15</a></sup> Following the model in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex017">Listing 3.17</a>, first write a test for the existence of a page at the URL /static_pages/contact by testing for the title “Contact | Ruby on Rails Tutorial Sample App.” Get your test to pass by following the same steps as when making the About page in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_3_3">Section 3.3.3</a>, including filling the Contact page with the content from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex042">Listing 3.42</a>.</p></li>
</ol>
<p class="footnote"><a id="ch03fn15" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn15a">15</a>. This exercise is solved in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch05.xhtml#sec5_3_1">Section 5.3.1</a>.</p>
<p class="ex-title" id="ch03ex042"><strong>Listing 3.42:</strong> Code for a proposed Contact page.</p>
<pre class="pre2">app/views/static_pages/contact.html.erb</pre>
<p class="codelink"><a id="pf0142-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0142-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red5">&lt;%</span> provide(<span class="violet">:title</span>, <span class="maroon">"Contact"</span>) <span class="red5">%&gt;</span>
&lt;<span class="green"><strong>h1</strong></span>&gt;Contact&lt;/<span class="green"><strong>h1</strong></span>&gt;
&lt;<span class="green"><strong>p</strong></span>&gt;
  Contact the Ruby on Rails Tutorial about the sample app at the
  &lt;<span class="green"><strong>a</strong></span> <span class="ash3">href</span><span class="ash">=</span><span class="maroon">"https://www.railstutorial.org/contact"</span>&gt;contact page&lt;/<span class="green"><strong>a</strong></span>&gt;.
&lt;/<span class="green"><strong>p</strong></span>&gt;</pre>
</div>
</section>
</section>
<section>
<h4 class="h4" id="sec3_4_4">3.4.4 Setting the Root Route</h4>
<p class="noindent">Now that we’ve customized our site’s pages and gotten a good start on the test suite, let’s set the application’s root route before moving on. As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_4">Section 1.2.4</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2_2">Section 2.2.2</a>, this involves editing the <span class="dark-green"><strong><code>routes.rb</code></strong></span> file to connect / to a page of our choice, which in this case will be the Home page. (At this point, I also recommend removing the <span class="dark-green"><strong><code>hello</code></strong></span> action from the Application controller if you added it in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_1">Section 3.1</a>.) As shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex043">Listing 3.43</a>, this means changing the <span class="dark-green"><strong><code>root</code></strong></span> route from</p>
<pre class="pre1">root <span class="maroon">'application#hello'</span></pre>
<p class="noindent">to</p>
<pre class="pre1">root <span class="maroon">'static_pages#home'</span></pre>
<p class="noindent">This arranges for requests for / to be routed to the <span class="dark-green"><strong><code>home</code></strong></span> action in the Static Pages controller. The resulting routes file is shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig09">Figure 3.9</a>.</p>
<figure id="ch03fig09" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_09.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_09.jpg">
<figcaption><p><strong>Figure 3.9:</strong> The Home page at the root route.<span epub:type="pagebreak" id="page_143"></span></p></figcaption>
</figure>
<p class="ex-title" id="ch03ex043"><strong>Listing 3.43:</strong> Setting the root route to the Home page.</p>
<pre class="pre2">config/routes.rb</pre>
<p class="codelink"><a id="pf0143-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0143-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>routes<span class="ash">.</span>draw <strong><span class="green">do</span></strong>
<span class="mark">  root <span class="red2">'static_pages#home'</span></span>
  get  <span class="maroon">'static_pages/home'</span>
  get  <span class="maroon">'static_pages/help'</span>
  get  <span class="maroon">'static_pages/about'</span>
<strong><span class="green">end</span></strong></pre>
</div>
<section>
<h5 class="h5" id="lev27">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.<span epub:type="pagebreak" id="page_144"></span></p>
<ol class="num">
<li><p class="num">Adding the root route in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex043">Listing 3.43</a> leads to the creation of a Rails helper called <span class="dark-green"><strong><code>root_url</code></strong></span> (in analogy to helpers like <span class="dark-green"><strong><code>static_pages_home_url</code></strong></span>). By filling in the code marked <span class="dark-green"><strong><code>FILL_IN</code></strong></span> in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex044">Listing 3.44</a>, write a test for the root route.</p></li>
<li><p class="num">Due to the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex043">Listing 3.43</a>, the test in the previous exercise is already <span class="green5"><small>GREEN</small></span>. In such a case, it’s harder to be confident that we’re actually testing what we think we’re testing, so modify the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex043">Listing 3.43</a> by commenting out the root route to get to <span class="red5"><small>RED</small></span> (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex045">Listing 3.45</a>). (We’ll talk more about Ruby comments in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_2">Section 4.2</a>.) Then uncomment it (thereby restoring the original <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex043">Listing 3.43</a>) and verify that you get back to <span class="green5"><small>GREEN</small></span>.</p></li>
</ol>
<p class="ex-title" id="ch03ex044"><strong>Listing 3.44:</strong> A test for the root route. <span class="green5"><small><code>GREEN</code></small></span></p>
<pre class="pre2">test/controllers/static_pages_controller_test.rb</pre>
<p class="codelink"><a id="pf0144-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0144-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green1">require</span> <span class="maroon">'test_helper'</span>

<span class="green"><strong>class</strong></span> <strong><span class="blue3">StaticPagesControllerTest</span></strong> <span class="ash">&lt;</span> <span class="red">ActionDispatch</span><span class="ash">::</span><span class="red">IntegrationTest</span>

<span class="mark">  <span class="green3">test</span> <span class="red2">"should get about"</span> <strong><span class="green3">do</span></strong></span>
<span class="mark">    get <span class="red2">FILL_IN</span></span>
<span class="mark">    assert_response <span class="red2">FILL_IN</span></span>
<span class="mark">  <strong><span class="green3">end</span></strong></span>

  <span class="green1">test</span> <span class="maroon">"should get home"</span> <strong><span class="green">do</span></strong>
    get static_pages_home_url
    assert_response <span class="violet">:success</span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get help"</span> <strong><span class="green">do</span></strong>
    get static_pages_help_url
    assert_response <span class="violet">:success</span>
  <strong><span class="green">end</span></strong>

  <span class="green1">test</span> <span class="maroon">"should get about"</span> <strong><span class="green">do</span></strong>
    get static_pages_about_url
    assert_response <span class="violet">:success</span>
  <strong><span class="green">end</span></strong>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="ex-title" id="ch03ex045"><span epub:type="pagebreak" id="page_145"></span><strong>Listing 3.45:</strong> Commenting out the root route to get a failing test. <span class="red5"><small><code>RED</code></small></span></p>
<pre class="pre2">config/routes.rb</pre>
<p class="codelink"><a id="pf0145-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0145-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>routes<span class="ash">.</span>draw <strong><span class="green">do</span></strong>
<span class="mark"><span class="green3">#   root 'static_pages#home'</span></span>
  get  <span class="maroon">'static_pages/home'</span>
  get  <span class="maroon">'static_pages/help'</span>
  get  <span class="maroon">'static_pages/about'</span>
<span class="green"><strong>end</strong></span></pre>
</div>
</section>
</section>
</section>
<section>
<h3 class="h3" id="sec3_5">3.5 Conclusion</h3>
<p class="noindent">Seen from the outside, this chapter hardly accomplished anything: We started with static pages, and ended with ... <em>mostly</em> static pages. But appearances are deceiving: By developing in terms of Rails controllers, actions, and views, we are now in a position to add arbitrary amounts of dynamic content to our site. Seeing exactly how this plays out is the task for the rest of this tutorial.</p>
<p class="indent">Before moving on, let’s take a minute to commit the changes on our topic branch and merge them into the master branch. Back in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_2">Section 3.2</a> we created a Git branch for the development of static pages. If you haven’t been making commits as we’ve been moving along, first make a commit indicating that we’ve reached a stopping point:</p>
<p class="codelink"><a id="pf0145-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0145-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git add -A
<strong><span class="navy">$</span></strong> git commit -m <span class="maroon">"Finish static pages"</span></pre>
<p class="noindent">Then merge the changes back into the master branch using the same technique as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_3_4">Section 1.3.4</a>:<sup><a id="ch03fn16a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn16">16</a></sup></p>
<p class="footnote"><a id="ch03fn16" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn16a">16</a>. If you get an error message saying that the Spring process id (pid) file would be overwritten by the merge, just remove the file using <span class="dark-green"><strong><code>rm -f *.pid</code></strong></span> at the command line.</p>
<p class="codelink"><a id="pf0145-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0145-03a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git checkout master
<strong><span class="navy">$</span></strong> git merge static-pages</pre>
<p class="indent"><span epub:type="pagebreak" id="page_146"></span>Once you reach a stopping point like this, it’s usually a good idea to push your code up to a remote repository (which, if you followed the steps in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_3_3">Section 1.3.3</a>, will be GitHub):</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git push</pre>
<p class="noindent">I also recommend deploying the application to Heroku:</p>
<pre class="pre1">$ rails test
$ git push heroku</pre>
<p class="noindent">Here we’ve taken care to run the test suite before deploying, which is a good habit to develop.</p>
<section>
<h4 class="h4" id="sec3_5_1">3.5.1 What We Learned in this Chapter</h4>
<p class="bullet">• For a third time, we went through the full procedure of creating a new Rails application from scratch, installing the necessary gems, pushing it up to a remote repository, and deploying it to production.</p>
<p class="bullet">• The <span class="dark-green"><strong><code>rails</code></strong></span> script generates a new controller with <span class="dark-green"><strong><code>rails generate controller ControllerName &lt;optional action names&gt;</code></strong></span>.</p>
<p class="bullet">• New routes are defined in the file <span class="dark-green"><strong><code>config/routes.rb</code></strong></span>.</p>
<p class="bullet">• Rails views can contain static HTML or embedded Ruby (ERb).</p>
<p class="bullet">• Automated testing allows us to write test suites that drive the development of new features, allow for confident refactoring, and catch regressions.</p>
<p class="bullet">• Test-driven development uses a “Red, Green, Refactor” cycle.</p>
<p class="bullet">• Rails layouts allow the use of a common template for pages in our application, thereby eliminating duplication.</p>
</section>
</section>
<section>
<h3 class="h3" id="sec3_6">3.6 Advanced Testing Setup</h3>
<p class="noindent">This optional section describes the testing setup used in the <em>Ruby on Rails Tutorial</em> screencast series. There are two main elements: an enhanced pass/fail reporter (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_6_1">Section 3.6.1</a>) and an automated test runner that detects file changes and automatically runs the corresponding tests (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_6_2">Section 3.6.2</a>). The code in this section is advanced <span epub:type="pagebreak" id="page_147"></span>and is presented for convenience only; you are not expected to understand it at this time.</p>
<p class="indent">The changes in this section should be made on the master branch:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git checkout master</pre>
<section>
<h4 class="h4" id="sec3_6_1">3.6.1 Minitest Reporters</h4>
<p class="noindent">Although many systems, including the cloud IDE, will show the appropriate colors for <span class="red5"><small>RED</small></span> and <span class="green5"><small>GREEN</small></span> test suites, adding <em>minitest reporters</em> lends a degree of pleasant polish to the test outputs, so I recommend adding the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex046">Listing 3.46</a> to your test helper file,<sup><a id="ch03fn17a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn17">17</a></sup> thereby making use of the <code>minitest-reporters</code> gem included in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex02">Listing 3.2</a>.</p>
<p class="footnote"><a id="ch03fn17" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fn17a">17</a>. The code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex046">Listing 3.46</a> mixes single- and double-quoted strings. This is because <span class="dark-green"><strong><code>rails new</code></strong></span> generates single-quoted strings, whereas the minitest reporters documentation uses double-quoted strings. This mixing of the two string types is common in Ruby; see <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_2_2">Section 4.2.2</a> for more information.</p>
<p class="ex-title" id="ch03ex046"><strong>Listing 3.46:</strong> Configuring the tests to show <span class="red5"><small>RED</small></span> and <span class="green5"><small>GREEN</small></span>.</p>
<pre class="pre2">test/test_helper.rb</pre>
<p class="codelink"><a id="pf0147-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0147-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">ENV</span><span class="ash">[</span><span class="maroon">'RAILS_ENV'</span><span class="ash">] ||=</span> <span class="maroon">'test'</span>
require_relative <span class="maroon">'../config/environment'</span>
<span class="green1">require</span> <span class="maroon">'rails/test_help'</span>
<span class="mark"><span class="green3">require</span> <span class="red2">"minitest/reporters"</span></span>
<span class="mark"><span class="red2">Minitest</span><span class="ash1">::</span><span class="red2">Reporters</span><span class="ash1">.</span>use!</span>

<span class="green"><strong>class</strong></span> <strong><span class="blue3">ActiveSupport</span></strong><span class="ash">::</span><span class="red">TestCase</span>
  <span class="blue"># Run tests in parallel with specified workers</span>
  parallelize(<span class="violet">workers</span>: <span class="violet">:number_of_processors</span>)

  <span class="blue"># Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.</span>
  fixtures <span class="violet">:all</span>

  <span class="blue"># Add more helper methods to be used by all tests here...</span>
<span class="green"><strong>end</strong></span></pre>
</div>
<p class="noindent">The resulting transition from <span class="red5"><small>RED</small></span> to <span class="green5"><small>GREEN</small></span> in the cloud IDE appears as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig010">Figure 3.10</a>.<span epub:type="pagebreak" id="page_148"></span></p>
<figure id="ch03fig010" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_10.jpg" alt="Image" width="625" height="228" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_10.jpg">
<figcaption><p><strong>Figure 3.10:</strong> Going from <span class="red5"><small>RED</small></span> to <span class="green5"><small>GREEN</small></span> in the cloud IDE.</p></figcaption>
</figure>
</section>
<section>
<h4 class="h4" id="sec3_6_2">3.6.2 Automated Tests with Guard</h4>
<p class="noindent">One annoyance associated with using the <span class="dark-green"><strong><code>rails test</code></strong></span> command is having to switch to the command line and run the tests by hand. To avoid this inconvenience, we can use <em>Guard</em> to automate the running of the tests. Guard monitors changes in the filesystem so that, for example, when we change the <span class="dark-green"><strong><code>static_pages_controller_test.rb</code></strong></span> file, only those tests get run. Even better, we can configure Guard so that when, say, the <span class="dark-green"><strong><code>home.html.erb</code></strong></span> file is modified, the <span class="dark-green"><strong><code>static_pages_controller_test.rb</code></strong></span> automatically runs.</p>
<p class="indent">The <span class="dark-green"><strong><code>Gemfile</code></strong></span> in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex02">Listing 3.2</a> has already included the <code>guard</code> gem in our application, so to get started we just need to initialize it:</p>
<p class="codelink"><a id="pf0148-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0148-01a">Click here to view code image</a></p>
<pre class="pre1">$ bundle exec guard init
Writing new Guardfile to /home/ec2-user/environment/sample_app/Guardfile
00:51:32 - INFO - minitest guard added to Guardfile, feel free to edit it</pre>
<p class="noindent">We then edit the resulting <span class="dark-green"><strong><code>Guardfile</code></strong></span> so that Guard will run the right tests when the integration tests and views are updated, which will look something like <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex047">Listing 3.47</a>. For maximum flexibility, I recommend using the version of the <span class="dark-green"><strong><code>Guardfile</code></strong></span> listed in the reference application, which if you’re reading this online should be identical to <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex047">Listing 3.47</a>:</p>
<p class="bullet">• Reference <span class="dark-green"><strong><code>Guardfile</code></strong></span> at <a href="http://railstutorial.org/guardfile">railstutorial.org/guardfile</a><span epub:type="pagebreak" id="page_149"></span></p>
<p class="ex-title" id="ch03ex047"><strong>Listing 3.47:</strong> A custom <span class="dark-green"><strong><code>Guardfile</code></strong></span>.</p>
<p class="codelink"><a id="pf0149-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0149-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="blue"># Defines the matching rules for Guard.</span>
guard <span class="violet">:minitest</span>, <span class="violet">spring</span>: <span class="maroon">"bin/rails test"</span>, <span class="violet">all_on_start</span>: <span class="green"><strong>false do</strong></span>
  watch(<span class="red6">%r{^test/(.*)/?(.*)_test\.rb$}</span>)
  watch(<span class="maroon">'test/test_helper.rb'</span>) { <span class="maroon">'test'</span> }
  watch(<span class="maroon">'config/routes.rb'</span>) { interface_tests }
  watch(<span class="red6">%r{app/views/layouts/*}</span>) { interface_tests }
  watch(<span class="red6">%r{^app/models/(.*?)\.rb$}</span>) <strong><span class="green">do</span></strong> <span class="ash">|</span>matches<span class="ash">|</span>
    <span class="maroon">"test/models/</span><strong><span class="pink">#{</span></strong>matches<span class="ash">[1]</span><strong><span class="pink">}</span></strong><span class="maroon">_test.rb"</span>
  <strong><span class="green">end</span></strong>
  watch(<span class="red6">%r{^app/controllers/(.*?)_controller\.rb$}</span>) <strong><span class="green">do</span></strong> <span class="ash">|</span>matches<span class="ash">|</span>
    resource_tests(matches<span class="ash">[1]</span>)
  <strong><span class="green">end</span></strong>
  watch(<span class="red6">%r{^app/views/([^/]*?)/.*\.html\.erb$}</span>) <strong><span class="green">do</span></strong> <span class="ash">|</span>matches<span class="ash">|</span>
    <span class="ash">[</span><span class="maroon">"test/controllers/</span><strong><span class="pink">#{</span></strong>matches<span class="ash">[1]</span><strong><span class="pink">}</span></strong><span class="maroon">_controller_test.rb"</span><span class="ash">] +</span>
    integration_tests(matches<span class="ash">[1]</span>)
  <strong><span class="green">end</span></strong>
  watch(<span class="red6">%r{^app/helpers/(.*?)_helper\.rb$}</span>) <strong><span class="green">do</span></strong> <span class="ash">|</span>matches<span class="ash">|</span>
    integration_tests(matches<span class="ash">[1]</span>)
  <strong><span class="green">end</span></strong>
  watch(<span class="maroon">'app/views/layouts/application.html.erb'</span>) <strong><span class="green">do</span></strong>
    <span class="maroon">'test/integration/site_layout_test.rb'</span>
  <strong><span class="green">end</span></strong>
  watch(<span class="maroon">'app/helpers/sessions_helper.rb'</span>) <strong><span class="green">do</span></strong>
    integration_tests <span class="ash">&lt;&lt;</span> <span class="maroon">'test/helpers/sessions_helper_test.rb'</span>
  <strong><span class="green">end</span></strong>
  watch(<span class="maroon">'app/controllers/sessions_controller.rb'</span>) <strong><span class="green">do</span></strong>
    <span class="ash">[</span><span class="maroon">'test/controllers/sessions_controller_test.rb'</span>,
     <span class="maroon">'test/integration/users_login_test.rb'</span><span class="ash">]</span>
  <strong><span class="green">end</span></strong>
  watch(<span class="maroon">'app/controllers/account_activations_controller.rb'</span>) <strong><span class="green">do</span></strong>
    <span class="maroon">'test/integration/users_signup_test.rb'</span>
  <strong><span class="green">end</span></strong>
  watch(<span class="red6">%r{app/views/users/*}</span>) <strong><span class="green">do</span></strong>
    resource_tests(<span class="maroon">'users'</span>) <span class="ash">+</span>
    <span class="ash">[</span><span class="maroon">'test/integration/microposts_interface_test.rb'</span><span class="ash">]</span>
  <strong><span class="green">end</span></strong>
<span class="green"><strong>end</strong></span>

<span class="blue"># Returns the integration tests corresponding to the given resource.</span>
<strong><span class="green">def</span></strong> <span class="blue3">integration_tests</span>(resource <span class="ash">=</span> <span class="violet">:all</span>)
  <span class="green"><strong>if</strong></span> resource <span class="ash">==</span> <span class="violet">:all</span>
    <span class="red">Dir</span><span class="ash">[</span><span class="maroon">"test/integration/*"</span><span class="ash">]</span>
  <span class="green"><strong>else</strong></span>
    <span class="red">Dir</span><span class="ash">[</span><span class="maroon">"test/integration/</span><strong><span class="pink">#{</span></strong>resource<strong><span class="pink">}</span></strong><span class="maroon">_*.rb"</span><span class="ash">]</span>
  <strong><span class="green">end</span></strong>
<span class="green"><strong>end</strong></span>

<span epub:type="pagebreak" id="page_150"></span><span class="blue"># Returns all tests that hit the interface.</span>
<strong><span class="green">def</span></strong> <span class="blue3">interface_tests</span>
  integration_tests <span class="ash">&lt;&lt;</span> <span class="maroon">"test/controllers/"</span>
<span class="green"><strong>end</strong></span>

<span class="blue"># Returns the controller tests corresponding to the given resource.</span>
<strong><span class="green">def</span></strong> <span class="blue3">controller_test</span>(resource)
  <span class="maroon">"test/controllers/</span><strong><span class="pink">#{</span></strong>resource<strong><span class="pink">}</span></strong><span class="maroon">_controller_test.rb"</span>
<span class="green"><strong>end</strong></span>

<span class="blue"># Returns all tests for the given resource.</span>
<strong><span class="green">def</span></strong> <span class="blue3">resource_tests</span>(resource)
  integration_tests(resource) <span class="ash">&lt;&lt;</span> controller_test(resource)
<span class="green"><strong>end</strong></span></pre>
</div>
<p class="noindent">On the cloud IDE, there’s one additional step, which is to run the following rather obscure commands to allow Guard to monitor all the files in the project:</p>
<p class="codelink"><a id="pf0150-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0150-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> <span class="green1">echo</span> fs.inotify.max_user_watches<span class="ash">=524288</span> | sudo tee -a /etc/sysctl.conf
<strong><span class="navy">$</span></strong> sudo sysctl -p</pre>
<p class="indent">Once Guard is configured, you should open a new terminal (as with the Rails server in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_2">Section 1.2.2</a>) and run it at the command line as follows (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03fig011">Figure 3.11</a>):</p>
<figure id="ch03fig011" class="image-l">
<img src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/fig03_11.jpg" alt="Image" width="625" height="266" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig03_11.jpg">
<figcaption><p><strong>Figure 3.11:</strong> Using Guard on the cloud IDE.</p></figcaption>
</figure>
<pre class="pre1">$ bundle exec guard</pre>
<p class="noindent"><span epub:type="pagebreak" id="page_151"></span>The rules in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex047">Listing 3.47</a> are optimized for this tutorial, automatically running (for example) the integration tests when a controller is changed. To run <em>all</em> the tests, simply hit return at the <span class="dark-green"><strong><code>guard&gt;</code></strong></span> prompt.</p>
<p class="indent">To exit Guard, press Ctrl-D. To add additional matchers to Guard, refer to the examples in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03ex047">Listing 3.47</a>, the Guard README, and the Guard wiki.</p>
<p class="indent">If the test suite fails without apparent cause, try exiting Guard, stopping Spring (which Rails uses to preload information to help speed up tests), and restarting:</p>
<p class="codelink"><a id="pf0151-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0151-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> bin/spring stop    <span class="blue"># Try this if the tests mysteriously start failing.</span>
<strong><span class="navy">$</span></strong> bundle <span class="green1">exec</span> guard</pre>
<p class="indent">Before proceeding, you should add your changes and make a commit:</p>
<p class="codelink"><a id="pf0151-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03_images.xhtml#pf0151-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git add -A
<strong><span class="navy">$</span></strong> git commit -m <span class="maroon">"Complete advanced testing setup"</span><span epub:type="pagebreak" id="page_152"></span></pre>
</section>
</section>
</section>
<div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-3" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders">
		
		<li class="copy"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#">Add Highlight</a></li>
		<li class="add-note"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#">
			Add Note
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Chapter 2. A Toy App</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Chapter 4. Rails-Flavored Ruby</div>
        </a>
    
  
  </div>

</section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag collapsed slideUp">
        
        
          <p class="usage-data">Find answers on the fly, or master something new. Subscribe today. <a href="https://learning.oreilly.com/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
        

        
        

      </div>

    
    



        
      </div>
      
        

<footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
  <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" class="icon-up" onclick="window.Appcues.track(&#39;JumpTop_HeronBook&#39;)" style="display: block;"><div class="visuallyhidden">Back to top</div></a>
  <ul class="js-footer-nav">
  
    
    <li><a href="https://learning.oreilly.com/public/support/">Support</a></li>
    
    <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
    
  
  
  </ul>
  <span class="copyright">© 2020 <a href="https://learning.oreilly.com/" target="_blank">O'Reilly Media, Inc</a>.</span>
  
    
    <a href="https://www.oreilly.com/terms/">Terms of Service</a> 
     / 
    
    <a href="https://learning.oreilly.com/privacy">Privacy Policy</a> 
    
    
  
</footer>

      
    
    <script src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(1)" charset="utf-8"></script><script type="text/javascript" id="">(function(){window.medalliaUserIdentifier=document.documentElement.dataset.userUuid;window.medalliaUserName=document.documentElement.dataset.username})();</script>
<script type="text/javascript" id="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/embed.js.download"></script>
    <script src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(2)" charset="utf-8"></script>
  

<div></div><div></div><div class="selection_bubble_root" style="display: none;"></div><div class="annotator-notice"></div><div class="font-flyout" style="top: 201.006px; left: 1194.34px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#">Reset</a>
</div>
</div><script type="text/javascript" async="" src="./Chapter 3. Mostly Static Pages - Ruby on Rails Tutorial, 6th Edition_files/generic1604331345324.js.download" charset="UTF-8"></script><script type="text/javascript" id="">function forceInputUppercase(a){var b=a.target.selectionStart,c=a.target.selectionEnd;a.target.value=a.target.value.toUpperCase();a.target.setSelectionRange(b,c)}void 0!=document.getElementById("id_promotion")&&null!=document.getElementById("id_promotion")&&document.getElementById("id_promotion").addEventListener("keyup",forceInputUppercase,!1);
void 0!=document.getElementsByName("promotionCode")[0]&&null!=document.getElementsByName("promotionCode")[0]&&document.getElementsByName("promotionCode")[0].addEventListener("keyup",forceInputUppercase,!1);</script><script type="text/javascript" id="">var nonwExpandable=document.querySelectorAll(".orm-ff-NavigationSubnav-headerListItem a, .orm-ff-NavigationView-headerListItem a");nonwExpandable.forEach(function(a,b){b+1!=nonwExpandable.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):b+1==nonwExpandable.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var nonwExpandableFo=document.querySelectorAll(".drop-content li:not(.flyout-parent) a");
nonwExpandableFo.forEach(function(a,b){"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1!=nonwExpandableFo.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1==nonwExpandableFo.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var expandable=document.querySelectorAll(".orm-ff-NavigationSubnav-toggleControls a, .orm-ff-NavigationView-toggleControls a");expandable.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.parentNode.parentNode.parentNode.querySelectorAll(".orm-Button-btnContentWrap span")[0].childNodes[1].textContent+" | "+a.textContent})})});var flyoutLinks=document.querySelectorAll(".flyout a");
flyoutLinks.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.closest("li.flyout-parent").getElementsByTagName("a")[0].textContent+" | "+a.textContent})})});</script><span></span><script type="text/javascript" id="">dataLayer.push({"ld.experiment":void 0,"ld.variation":void 0});</script></body></html>