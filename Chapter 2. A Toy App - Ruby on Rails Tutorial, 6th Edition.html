<!DOCTYPE html>
<!-- saved from url=(0085)https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02 -->
<html class=" js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage no-applicationcache svg inlinesvg zoom" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/ruby-on-rails/9780136702726/ch10.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="10224494" data-user-uuid="66943332-5511-462c-876e-5d5b720c7edf" data-username="czjtgu3dkobug4zdmolfga2wembsmu" data-account-type="Trial" data-activated-trial-date="12/02/2020" data-archive="9780136702726" data-publishers="Addison-Wesley Professional" data-htmlfile-name="ch10.xhtml" data-epub-title="Ruby on Rails Tutorial, 6th Edition" data-debug="0" data-testing="0" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="O&#39;Reilly Media"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9780136702726"><link rel="shortcut icon" href="https://www.oreilly.com/favicon.ico"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/css" rel="stylesheet" type="text/css"><title>Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition</title><link rel="stylesheet" href="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/output.731fc84c4f9a.css" type="text/css"><link rel="stylesheet" type="text/css" href="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/annotator.e3b0c44298fc.css"><link rel="stylesheet" href="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/font-awesome.min.css"><style type="text/css" title="ibis-book">@page{margin:1em 2em}#sbo-rt-content div{margin-top:1em;margin-bottom:1em;margin-left:1em;margin-right:1em;text-align:justify}#sbo-rt-content div.cover img{max-width:99%;max-height:99%}#sbo-rt-content .att{text-align:right}#sbo-rt-content .cover{margin-top:.5em;margin-bottom:.5em;text-align:center}#sbo-rt-content .h1{margin-top:1.5em;margin-bottom:.5em;font-weight:bold;font-size:210%;page-break-after:avoid;border-bottom:solid .1em;text-align:center}#sbo-rt-content .halftitle{margin-top:1em;margin-bottom:2em;font-weight:bold;font-size:210%;page-break-after:avoid;text-align:center}#sbo-rt-content .h2{margin-top:1em;margin-bottom:.1em;font-weight:bold;font-size:180%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content .h2f{margin-top:1em;margin-bottom:2.5em;font-weight:bold;font-size:190%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content .h2t{margin-top:1em;margin-bottom:2em;font-weight:bold;font-size:190%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content .center{text-align:center}#sbo-rt-content .h3{margin-top:.5em;margin-bottom:.001em;font-weight:bold;font-size:160%;page-break-after:avoid;text-align:left}#sbo-rt-content .h4{margin-top:.5em;margin-bottom:.001em;font-weight:bold;font-size:130%;page-break-after:avoid;text-align:left}#sbo-rt-content .h5{margin-top:.5em;margin-bottom:.001em;font-weight:bold;font-size:120%;page-break-after:avoid;text-align:left}#sbo-rt-content ul{margin-top:1em;margin-bottom:1em;margin-left:.2em}#sbo-rt-content ul.sq{list-style-type:square}#sbo-rt-content ul.sq li p,#sbo-rt-content ul.sq li p.noindent{margin-top:.5em;margin-left:1em;margin-bottom:.5em;text-indent:.002em}#sbo-rt-content .left{text-align:left}#sbo-rt-content .ex-title{margin-top:.8em;margin-bottom:.5em;text-indent:.1em;font-size:100%}#sbo-rt-content code{font-family:Courier,Courier New,monospace;font-size:small}#sbo-rt-content pre{font-family:Courier,Courier New,monospace;margin-top:.6em;margin-bottom:1em;margin-left:.1em;line-height:1.3em;font-size:small}#sbo-rt-content .pre3{font-family:Courier,Courier New,monospace;margin-top:1em;margin-bottom:1em;margin-left:2.9em;background-color:#E6E6E6}#sbo-rt-content .equ{margin-top:.8em;margin-bottom:.5em;text-align:center}#sbo-rt-content .footnum{margin-top:.7em;margin-bottom:.5em;text-indent:-1em;margin-left:3.3em}#sbo-rt-content .footnotep{margin-top:.8em;margin-left:.8em;margin-bottom:.5em;text-indent:.8em}#sbo-rt-content .mark1{background-color:#F4F7F9}#sbo-rt-content .codelink{margin-top:.2em;margin-bottom:.5em}#sbo-rt-content .middle img{vertical-align:middle}#sbo-rt-content .box{margin-top:.6em;margin-bottom:1em;margin-left:.1em;margin-right:.8em;padding:.8em;background-color:#E6E6E6}#sbo-rt-content .box-bq{font-size:.8em;margin-top:.8em;margin-bottom:.5em;margin-left:1.6em;text-indent:.1em;background-color:#E6E6E6}#sbo-rt-content .boxip{margin-top:.5em;margin-left:.1em;margin-bottom:.5em;text-indent:.8em;background-color:#E6E6E6}#sbo-rt-content ol.num{list-style-type:number;font-weight:normal}#sbo-rt-content ol.num li p{list-style-type:number;font-weight:normal}#sbo-rt-content ol.num li p,#sbo-rt-content ol.num li p.number{margin-top:.5em;margin-left:.2em;margin-bottom:.5em;text-indent:.002em}#sbo-rt-content .num-p{margin-top:.5em;margin-bottom:.5em;margin-left:0}#sbo-rt-content .bullet{margin-top:.7em;margin-bottom:.5em;text-indent:-.8em;margin-left:2em}#sbo-rt-content .credit{margin-top:.1em;margin-bottom:.1em;text-indent:-1.5em;margin-left:2em}#sbo-rt-content .box-caption{margin-top:.1em;margin-bottom:1em;font-size:125%;font-weight:bold;text-indent:.02em;text-align:left}#sbo-rt-content .example{font-family:Courier,Courier New,monospace;margin-top:.6em;margin-bottom:1em;margin-left:.1em;line-height:1.3em;font-size:small;border-top:.02em solid black;border-bottom:.02em solid black}#sbo-rt-content .image-l{margin-top:.8em;margin-left:1em;text-align:center}#sbo-rt-content .topbot{margin-top:.8em;margin-bottom:.5em;border-bottom:solid black .1em;border-top:solid black .1em;text-indent:.1em}#sbo-rt-content .uln{margin-top:.7em;margin-bottom:.7em;margin-left:2em}#sbo-rt-content .fdash{margin-top:.7em;margin-bottom:.7em;margin-left:2em}#sbo-rt-content .fdash1{margin-top:.7em;margin-bottom:.7em;margin-left:3em}#sbo-rt-content .tr{border-bottom:.1em solid black}#sbo-rt-content th{text-align:left}#sbo-rt-content td{padding-left:.1em;padding-top:0;padding-bottom:0;vertical-align:top;text-align:left}#sbo-rt-content .mark{background-color:#E6E6E6}#sbo-rt-content .pre1{font-family:Courier,Courier New,monospace;margin-top:.2em;margin-bottom:1em;margin-left:0;padding:.8em;background-color:#E6E6E6}#sbo-rt-content .pre2{font-family:Courier,Courier New,monospace;margin-top:.2em;margin-bottom:1em;margin-left:.2em}#sbo-rt-content .tab-thc{margin-top:.1em;margin-bottom:.1em;border-bottom:solid black .1em;text-align:center}#sbo-rt-content .tab-th{margin-top:.1em;border-bottom:solid black .1em;border-top:solid black .1em;text-align:left}#sbo-rt-content .author{margin-top:2.5em;margin-bottom:5.5em;text-align:center;font-size:120%}#sbo-rt-content .pub{margin-top:1.5em;margin-bottom:.5em;text-align:center}#sbo-rt-content .pub1{font-weight:bold;font-size:.9em;margin-top:.1em;margin-bottom:.5em;text-align:center}#sbo-rt-content .copy{margin-top:.9em;margin-bottom:.5em;text-indent:.02em}#sbo-rt-content .copy1{margin-top:.9em;margin-bottom:.2em;text-indent:.02em}#sbo-rt-content .copy2{margin-top:.2em;margin-bottom:.5em;text-indent:.02em}#sbo-rt-content .title{margin-top:1em;margin-bottom:.2em;font-size:125%;font-weight:bold;text-indent:.02em;text-align:center}#sbo-rt-content .noindent{margin-top:.5em;margin-bottom:.5em;text-indent:.1em}#sbo-rt-content .tab-para{margin-top:.1em;margin-bottom:.1em;margin-left:.1em;text-indent:0}#sbo-rt-content .tab-parai{margin-top:.1em;margin-bottom:.1em;margin-left:1.1em;text-indent:-1.1em}#sbo-rt-content .boxnp{margin-top:.5em;margin-bottom:.5em;text-indent:.1em}#sbo-rt-content .toc-intro{margin-top:.1em;margin-bottom:.5em;margin-left:1.5em;text-align:left}#sbo-rt-content .tocchap{margin-top:1.5em;margin-bottom:.4em;margin-left:3.4em;text-indent:-4em}#sbo-rt-content .toclev1{margin-top:.4em;margin-bottom:.4em;margin-left:1em}#sbo-rt-content .toclev2{margin-top:.4em;margin-bottom:.4em;margin-left:2.6em}#sbo-rt-content .toclev1a{margin-top:.4em;margin-bottom:.4em;margin-left:.5em}#sbo-rt-content .toc-index{margin-top:2em;margin-bottom:.4em;margin-left:.7em}#sbo-rt-content .indexmain{margin-top:.4em;margin-bottom:.2em;margin-left:.8em;text-indent:-.8em}#sbo-rt-content .indexsub{margin-top:.4em;margin-bottom:.2em;margin-left:1.7em;text-indent:-.7em}#sbo-rt-content .indexsubsub{margin-top:.4em;margin-bottom:.2em;font-style:italic;margin-left:3em;text-indent:-.9em}#sbo-rt-content figcaption{margin-top:.8em;margin-bottom:.5em;color:black;text-align:left;text-indent:.1em}#sbo-rt-content .subtitle{margin-top:.1em;margin-bottom:1em;font-weight:bold;font-size:150%;page-break-after:avoid;text-align:center}#sbo-rt-content .edition{margin-top:2em;margin-bottom:3em;font-weight:bold;font-size:150%;page-break-after:avoid;text-align:center}#sbo-rt-content .indent{margin-top:.5em;margin-left:.1em;margin-bottom:.5em;text-indent:1.5em}#sbo-rt-content .h2a{margin-top:.1em;margin-bottom:2em;font-weight:bold;font-size:190%;page-break-after:avoid;text-align:left}#sbo-rt-content figure>img{max-width:99%;max-height:99%}#sbo-rt-content figure{margin-top:1em;margin-bottom:1em;margin-left:.5em;margin-right:1.5em}#sbo-rt-content none{list-style-type:none}#sbo-rt-content a{text-decoration:none}#sbo-rt-content .footnote{font-size:.8em;margin-top:.1em;margin-bottom:.5em;margin-left:.8em}#sbo-rt-content .none{margin-top:.5em;margin-left:1em;margin-bottom:.5em;list-style-type:none}#sbo-rt-content div.image-p img{width:80%}#sbo-rt-content .image-p{page-break-before:always;text-align:center}#sbo-rt-content table{border-collapse:collapse;border-spacing:0;background:transparent;vertical-align:top;margin-top:.1em;margin-right:.1em;margin-bottom:.9em;margin-left:0;width:100%}#sbo-rt-content .tab-parar{margin-top:.1em;margin-bottom:.1em;text-indent:.1em;text-align:right}#sbo-rt-content .h2i{margin-top:1em;margin-bottom:2.1em;font-weight:bold;font-size:190%;border-bottom:solid .1em;page-break-after:avoid;text-align:left}#sbo-rt-content pre{overflow:auto;-ms-overflow:auto;-moz-overflow:auto;-webkit-overflow:auto;-ms-padding-bottom:5pt;-moz-padding-bottom:5pt;-webkit-padding-bottom:5pt}#sbo-rt-content .maroon{color:#BB2121}#sbo-rt-content .green{color:#005A00}#sbo-rt-content .green1{color:#48785D}#sbo-rt-content .navy{color:#504B72}#sbo-rt-content .ash{color:#666}#sbo-rt-content .blue{color:#408080}#sbo-rt-content .green3{color:#00A100}#sbo-rt-content .blue1{color:#0000B8}#sbo-rt-content .violet{color:#1A177D}#sbo-rt-content .pink{color:#A131A1}#sbo-rt-content .pink1{color:#A131A1}#sbo-rt-content .red{color:#800}#sbo-rt-content .blue3{color:#2E3192}#sbo-rt-content .red2{color:#B80000}#sbo-rt-content .green4{color:#269200}#sbo-rt-content .ash1{color:#666}#sbo-rt-content .ash2{color:#33484A}#sbo-rt-content .red2{color:#640000}#sbo-rt-content .ash3{color:#7D8F29}#sbo-rt-content .red5{color:#BD7B00}#sbo-rt-content .maroon1{color:#B66600}#sbo-rt-content .blue5{color:#1F3BFF}#sbo-rt-content .red6{color:#B68}#sbo-rt-content .green7{color:#14B600}#sbo-rt-content .maroon2{color:#B66600}#sbo-rt-content .pink2{color:#AC21FF}#sbo-rt-content .pink3{color:#AC21FF}#sbo-rt-content .lighgreen{color:#5FA100}#sbo-rt-content .lighblue{color:#269271}#sbo-rt-content .darkmaroon{color:#269271}#sbo-rt-content .maroon5{color:#A10000}#sbo-rt-content .blue6{color:#0000B9}#sbo-rt-content .marko{background-color:#FAF9CE}#sbo-rt-content .green5{color:#1C8B43}#sbo-rt-content .colork1{color:#136433;font-weight:bold}#sbo-rt-content .colork2{color:#504C72}#sbo-rt-content .colork3{color:#51785D}#sbo-rt-content .colork4{color:#303192}#sbo-rt-content .colork5{color:#955744}#sbo-rt-content .colork6{color:#5C70BA}#sbo-rt-content .colork7{color:#487864}#sbo-rt-content .colork8{color:#5C5778}#sbo-rt-content .colork9{color:#666}#sbo-rt-content .colork10{color:#48785D}#sbo-rt-content .colork11{color:#BC654D}#sbo-rt-content .colork12{color:#3E8185}#sbo-rt-content .colork13{color:#C62425}#sbo-rt-content .colork14{color:#1D8C43}#sbo-rt-content .colork15{color:#0D8140}#sbo-rt-content .colork16{color:#BB2425}#sbo-rt-content .colork17{color:#985744}#sbo-rt-content .colork18{color:#6C8896}#sbo-rt-content .colork19{color:#2A2C80}#sbo-rt-content .colork20{color:#BD2425}#sbo-rt-content .redk1{color:#EE1C25}#sbo-rt-content .colork21{color:#2A2C77}#sbo-rt-content .colork22{color:#955744}#sbo-rt-content .colork23{color:#BC6561}#sbo-rt-content .colork24{color:#BE7D2B}#sbo-rt-content .colork25{color:#8E7C5D}#sbo-rt-content .colork26{color:#7C5778}#sbo-rt-content .colork27{color:#9D1C1F}#sbo-rt-content .colork28{color:#AA5744}#sbo-rt-content .colork29{color:#C59861}#sbo-rt-content .grayk1{color:#C0908E}#sbo-rt-content .pd_green{color:#48785d}#sbo-rt-content .dark-green{color:#146333}#sbo-rt-content .mark1{background-color:#faf9ce}#sbo-rt-content .mark{background-color:#faf9ce}#sbo-rt-content .pd_ash{color:#666}#sbo-rt-content .pd_blue7{color:#6c8896}#sbo-rt-content .pd_blue1{color:#504b72}#sbo-rt-content .pd_red{color:#965744}#sbo-rt-content .pd_red2{color:#bb654e}#sbo-rt-content .pd_red5{color:#ed1c24}#sbo-rt-content .pd_blue5{color:#2e3192}#sbo-rt-content .pd_green4{color:#269200}#sbo-rt-content .pd_green5{color:#1c8b43}#sbo-rt-content .pd_blue3{color:#2c2c78}#sbo-rt-content .pd_orange{color:#c49847}</style><script type="text/javascript" async="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/cool-2.1.15.min.js.download"></script><script type="text/javascript" async="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/ec.js.download"></script><script type="text/javascript" async="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/analytics.js.download"></script><script type="text/javascript" async="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/f.txt"></script><script type="text/javascript" async="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/js"></script><script crossorigin="anonymous" integrity="sha256-NiDMmov61Y536X/eLXLiDGzFVFmNLtPyu4b5aFB54ks=" type="text/javascript" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/appcues.main.11e38ef4746fd64ab30c11794299d10b30bcb704.js.download" async=""></script><script async="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/gtm.js.download"></script><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9780136702726/chapter/ch10.xhtml",
          "book_id": "9780136702726",
          "chapter_uri": "ch10.xhtml",
          "position": 27.4567491080775,
          "user_uuid": "66943332-5511-462c-876e-5d5b720c7edf",
          "next_chapter_uri": "/library/view/ruby-on-rails/9780136702726/ch11.xhtml"
        
      },
      title: "Ruby on Rails Tutorial, 6th Edition",
      author_list: "Michael Hartl",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: true
    };
    // ]]></script><script src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/modernizr.8e35451ddb64.js.download"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><meta name="description" content=" Chapter 10 Updating, Showing, and Deleting Users In this chapter, we complete the REST actions for the Users resource (Table 7.1) by adding edit, update, index ... "><meta property="og:title" content="Chapter 10. Updating, Showing, and Deleting Users"><meta itemprop="isPartOf" content="/library/view/ruby-on-rails/9780136702726/"><meta itemprop="name" content="Chapter 10. Updating, Showing, and Deleting Users"><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9780136702726/"><meta property="og:description" itemprop="description" content=" Chapter 10 Updating, Showing, and Deleting Users In this chapter, we complete the REST actions for the Users resource (Table 7.1) by adding edit, update, index ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Addison-Wesley Professional"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9780136702726"><meta property="og:book:author" itemprop="author" content="Michael Hartl"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@OReillyMedia"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = '66943332-5511-462c-876e-5d5b720c7edf';
      dataLayer.push({userIdentifier: '66943332-5511-462c-876e-5d5b720c7edf'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = 'ba5f3401-307d-4b66-90a6-a97047c63525';
        

        window.medalliaVsgIsIndividual = true;
        
          
          dataLayer.push({learningAccountType: 'free trial'});
          
        

        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/vendor.3eecedff6f59.js.download"></script><script defer="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/reader.772cf1e31d6c.js.download"></script><iframe src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/saved_resource.html"></iframe><iframe src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(3).html"></iframe><iframe src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(4).html"></iframe><link rel="stylesheet" type="text/css" integrity="sha256-q9sKb2HpA5fJjN1cK9LjLaEXff5ix81Rv1Y3xJFptPE=" crossorigin="anonymous" href="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/container.11e38ef4746fd64ab30c11794299d10b30bcb704.css"><iframe src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(5).html"></iframe><script src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/f(1).txt"></script><script async="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/MathJax.js.download"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
</style><style type="text/css" id="kampyleStyle">.noOutline{outline: none !important;}.wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.1') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.1') format('opentype')}
</style><style type="text/css">@font-face {font-family: MathJax_AMS; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff?V=2.7.1') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf?V=2.7.1') format('opentype')}
</style></head>


<body class="reading sidenav  scalefonts subscribe-panel library nav-collapsed"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="working hide" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  


<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li><a href="https://learning.oreilly.com/home/" class="l0 nav-icn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z"></path></svg><span>Home</span></a></li><li class="search"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M8,8 C6.34321755,8 5.00013,6.65691245 5.00013,5.00013 C5.00013,3.34334755 6.34321755,2.00026001 8,2.00026001 C9.65678245,2.00026001 10.99987,3.34334755 10.99987,5.00013 C10.99987,6.65691245 9.65678245,8 8,8 Z M2.33024571,11.3523547 L2.33774538,11.3523547 C3.7622187,9.70968996 5.82947484,8.76608166 8.00374984,8.76608166 C10.1780248,8.76608166 12.245281,9.70968996 13.6697543,11.3523547 C13.8892083,11.6177474 14.0062813,11.9530021 13.99974,12.2973138 L13.99974,13.99974 L2.00026001,13.99974 L2.00026001,12.2973138 C1.99371867,11.9530021 2.11079172,11.6177474 2.33024571,11.3523547 Z" id="path-1"></path></svg><span>Your O'Reilly</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/profile/" class="l2 nav-icn"><span>Profile</span></a></li><li><a href="https://learning.oreilly.com/history/" class="l2 nav-icn"><span>History</span></a></li><li><a href="https://learning.oreilly.com/playlists/" class="l2 nav-icn"><span>Playlists</span></a></li><li><a href="https://learning.oreilly.com/u/66943332-5511-462c-876e-5d5b720c7edf/" class="l2 nav-icn"><span>Highlights</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Featured</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/featured/navigating-21st-century/" class="l2 nav-icn"><span>Navigating Change</span></a></li><li><a href="https://learning.oreilly.com/recommendations/" class="l2 nav-icn"><span>Recommended</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"></path></g></svg><span>Explore</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/topics/" class="l2 nav-icn"><span>All Topics</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;sort=publication_date&amp;facet_json=true&amp;page=0" class="l2 nav-icn"><span>Early Releases</span></a></li><li><a href="https://learning.oreilly.com/playlists/discover/" class="l2 nav-icn"><span>Shared Playlists</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;formats=case%20study&amp;formats=learning%20path&amp;formats=live%20online%20training&amp;formats=notebook&amp;formats=oriole&amp;formats=video&amp;sort=popularity&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Most Popular Titles</span></a></li><li><a href="https://learning.oreilly.com/resource-centers/" class="l2 nav-icn"><span>Resource Centers</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M12.8 3.2A1.2 1.2 0 0 1 14 4.4v8.4a1.2 1.2 0 0 1-1.2 1.2H3.2A1.2 1.2 0 0 1 2 12.8V4.4a1.2 1.2 0 0 1 1.2-1.2h1.2V2h1.2v1.2h4.8V2h1.2v1.2h1.2zm-9.6 9.6h9.6V6.2H3.2v6.6zM8 9.5a1.35 1.35 0 1 1 0-2.7 1.35 1.35 0 0 1 0 2.7zm2.7 2.148v.552H5.3v-.552c0-.321.124-.634.355-.858a3.358 3.358 0 0 1 4.69 0c.23.224.355.537.355.858z"></path></svg><span>Attend</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/live-training/" class="l2 nav-icn"><span>Live Trainings</span></a></li><li><a href="https://learning.oreilly.com/featured/architectural-katas" class="l2 nav-icn"><span>Architectural Katas</span></a></li><li><a href="https://learning.oreilly.com/featured/strata/" class="l2 nav-icn"><span>Strata</span></a></li><li><a href="https://learning.oreilly.com/featured/oscon/" class="l2 nav-icn"><span>Open Source</span></a></li><li><a href="https://learning.oreilly.com/featured/infrastructure-ops/" class="l2 nav-icn"><span>Infra &amp; Ops</span></a></li><li><a href="https://learning.oreilly.com/featured/software-architecture/" class="l2 nav-icn"><span>Software Arch</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="l1 nav-icn "><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.6467109,4.35328907 L14.7964612,7.51003884 C15.0678463,7.78304342 15.0678463,8.22395603 14.7964612,8.49696061 L11.6467109,11.6467109 L10.6597892,10.6597892 L13.3055794,8 L10.6597892,5.34021084 L11.6467109,4.35328907 Z M4.35328907,11.6467109 L1.20353875,8.48996116 C0.932153749,8.21695658 0.932153749,7.77604397 1.20353875,7.50303939 L4.35328907,4.35328907 L5.34021084,5.34021084 L2.69442057,8 L5.34021084,10.6597892 L4.35328907,11.6467109 Z M5.84417089,11.4997226 L8.67194674,4.50027742 L10.1838269,4.50027742 L7.35605105,11.4997226 L5.84417089,11.4997226 Z" id="Mask"></path></svg><span>Interact</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/?classification=content-scenario" class="l2 nav-icn"><span>Scenarios</span></a></li><li><a href="https://learning.oreilly.com/scenarios/?classification=sandbox-scenario" class="l2 nav-icn"><span>Sandboxes</span></a></li><li><a href="https://learning.oreilly.com/interactive/?classification=jupyter-notebook" class="l2 nav-icn"><span>Jupyter Notebooks</span></a></li></ul></li><li><a href="https://learning.oreilly.com/answers/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M2.31032699,3.75609006 C4.65421571,1.41371359 8.45302454,1.41472092 10.7955702,3.75860838 C13.1381158,6.10249583 13.1369405,9.90130261 10.7930518,12.243847 C8.44916311,14.5863913 4.65018639,14.5852161 2.30780867,12.2413286 C-0.0346204845,9.89749489 -0.0334929936,6.09853298 2.31032699,3.75609006 Z M8.8198605,4.98016308 C7.34193969,3.86924672 5.23410194,3.98609692 3.88914868,5.33104946 C3.12814393,6.09032122 2.72818176,7.13880077 2.79015179,8.21201133 C2.79115912,8.23064692 2.79233434,8.24928252 2.79350956,8.26791811 L2.79350956,8.26791811 C2.83179539,8.8307976 2.9944077,9.37404287 3.26947292,9.86201677 L3.26947292,9.86201677 L2.77621706,11.7027432 C2.7699968,11.7259241 2.77662063,11.7506624 2.79359185,11.7676337 C2.8105631,11.7846049 2.83530144,11.7912287 2.85848233,11.7850085 L2.85848233,11.7850085 L4.69400524,11.2922565 C5.26306363,11.6167344 5.90703177,11.786885 6.56209849,11.7858479 C8.64827865,11.7858479 10.3395879,10.094542 10.3395879,8.00836292 C10.3405204,6.84135608 9.80105674,5.73967784 8.87862141,5.02482134 L8.87862141,5.02482134 L8.82825492,4.98654283 Z M13.7933062,2 C14.7073496,2.00009863 15.4482759,2.74110484 15.4482759,3.65514822 C15.4482759,4.32460943 15.0449926,4.92814782 14.4264842,5.18432286 C13.8079757,5.44049789 13.096053,5.29885769 12.6226979,4.82545158 C12.1493429,4.35204547 12.0077795,3.64010743 12.2640213,3.02162665 C12.5202631,2.40314587 13.123845,1.99992776 13.7933062,2 Z"></path></svg><span>Answers</span></a></li><li><a href="https://learning.oreilly.com/certifications/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M12.912 9.18L14 8.014l-1.088-1.18a.304.304 0 01-.075-.268L13.195 5l-1.535-.463a.313.313 0 01-.194-.194l-.462-1.537-1.565.358c-.09.03-.194 0-.269-.074L8.007 2 6.845 3.09a.303.303 0 01-.269.074l-1.565-.358-.462 1.537a.313.313 0 01-.194.194L2.82 5l.358 1.567a.26.26 0 01-.075.269L2 8.015l1.088 1.164c.075.075.09.18.075.269l-.358 1.567 1.535.463c.09.03.164.104.194.194l.462 1.537 1.565-.358c.015 0 .045-.015.075-.015.075 0 .15.03.209.074L8.007 14l1.163-1.09a.303.303 0 01.269-.074l1.565.358.462-1.537a.313.313 0 01.194-.194L13.195 11l-.358-1.567a.338.338 0 01.075-.254zm-6.046 1.37L4.41 8.26l1.16-1.244 1.767 1.649L10.4 5.6l1.202 1.202-4.242 4.243-.495-.495z"></path></svg><span>Certifications</span></a></li><li><a href="https://learning.oreilly.com/preferences/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://learning.oreilly.com/public/support/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.363 6.656a2.692 2.692 0 0 1-2.681-2.703c0-1.493 1.2-2.703 2.681-2.703a2.692 2.692 0 0 1 2.682 2.703c0 1.493-1.2 2.703-2.682 2.703zm4.023 2.027c-1.852 0-3.352 1.513-3.352 3.379H2v-1.534c-.006-.31.099-.612.295-.852a6.666 6.666 0 0 1 9.09-.993zm-.543.676h1.12v.304c.003.284.16.543.408.676a.766.766 0 0 0 .77 0l.303-.176.556.966-.302.176a.772.772 0 0 0-.362.676v.08a.772.772 0 0 0 .362.677l.302.21-.556.965-.302-.175a.766.766 0 0 0-.771 0 .778.778 0 0 0-.409.675v.352h-1.106v-.372a.778.778 0 0 0-.409-.676.766.766 0 0 0-.77 0l-.303.176-.556-.912.302-.176a.772.772 0 0 0 .362-.676v-.04-.04a.772.772 0 0 0-.362-.676l-.302-.176.556-.966.289.155a.766.766 0 0 0 .77 0 .778.778 0 0 0 .41-.676V9.36zm1.562 2.703c0-.271-.108-.531-.3-.722a1.001 1.001 0 0 0-.72-.292 1.01 1.01 0 0 0-.992 1.023 1.01 1.01 0 0 0 1.01 1.004 1.01 1.01 0 0 0 1.002-1.013z"></path></svg><span>Support</span></a></li><li><a href="https://get.oreilly.com/email-signup.html" class="l1 nav-icn " target="&quot;_blank&quot;"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Newsletters</span></a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.613 12.63A.607.607 0 0 1 2 12.03V3.602C2 3.269 2.274 3 2.613 3h5.515v1.204H3.226v7.223h4.902v1.203H2.613zM5.677 9.02V6.611h4.903V4.926a.301.301 0 0 1 .19-.274.31.31 0 0 1 .33.063l2.722 2.673a.594.594 0 0 1 0 .849L11.1 10.909a.31.31 0 0 1-.331.063.301.301 0 0 1-.19-.274V9.02H5.677z"></path></svg><span>Sign Out</span></a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Ruby on Rails Tutorial, 6th Edition
      
    </h1></span></a><div class="toc-contents" style="max-height: 0px;">
  <div class="sbo-toc">
    <button type="button" class="sbo-toc-thumb close"><div class="visuallyhidden">Close</div></button>
      <section class="ios-app-teaser">
        <ul>
            <li><a class="js-toc-link toc-link" href="https://itunes.apple.com/gb/app/safari-queue-library-over/id881697395?mt=8" role="button">Install App</a></li>
            <li><a class="js-toc-link toc-link" href="safaridetail://9780136702726" role="button">Open in App</a></li>
        </ul>
      </section>
      <div class="sbo-book-meta">
        
        <span class="cover">
         <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/">
          <img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/saved_resource" alt="Cover image for Ruby on Rails Tutorial, 6th Edition" height="184" width="141">
        </a>
        </span>
        <span class="title">
          
            
                <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/publisher/addison-wesley-professional/">
                  <img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/addison-wesley.png" class="publisher-logo video" alt="publisher logo">
                </a>
            
          

          <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/">Ruby on Rails Tutorial, 6th Edition</a>
        </span>
        
        <span class="authors">by Michael Hartl</span>
        

        
        <span class="publishers t-publishers">Published by
          <!-- Show publisher page link if publisher pages switch is on -->
          
            <a class="t-publisher-link toc-link js-toc-link" href="https://learning.oreilly.com/library/publisher/addison-wesley-professional/">
              Addison-Wesley Professional</a>, 2020
          
        </span>
        

    

    </div>
  <ol class="tocList">
    
    
    
     

     <li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/cover.xhtml">
        Cover Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref00.xhtml">
        About This eBook <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/halftitle.xhtml">
        Halftitle Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/title.xhtml">
        Title Page <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/copy.xhtml">
        Copyright Page <span class="minutes">(02:18 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/toc.xhtml#toc">
        Contents <span class="minutes">(05:45 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref02.xhtml#pref02">
        Foreword <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref03.xhtml#pref03">
        Acknowledgments <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/pref04.xhtml#pref04">
        About the Author <span class="minutes">(01:09 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01">
        Chapter 1. From Zero to Deploy <span class="minutes">(77:03 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02">
        Chapter 2. A Toy App <span class="minutes">(50:36 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03">
        Chapter 3. Mostly Static Pages <span class="minutes">(63:15 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04">
        Chapter 4. Rails-Flavored Ruby <span class="minutes">(57:30 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch05.xhtml#ch05">
        Chapter 5. Filling in the Layout <span class="minutes">(60:57 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">
        Chapter 6. Modeling Users <span class="minutes">(67:51 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#ch07">
        Chapter 7. Sign Up <span class="minutes">(79:21 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch08.xhtml#ch08">
        Chapter 8. Basic Login <span class="minutes">(66:42 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch09.xhtml#ch09">
        Chapter 9. Advanced Login <span class="minutes">(52:54 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml#ch10">
        Chapter 10. Updating, Showing, and Deleting Users <span class="minutes">(73:36 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch11.xhtml#ch11">
        Chapter 11. Account Activation <span class="minutes">(55:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch12.xhtml#ch12">
        Chapter 12. Password Reset <span class="minutes">(48:18 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch13.xhtml#ch13">
        Chapter 13. User Microposts <span class="minutes">(106:57 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch14.xhtml#ch14">
        Chapter 14. Following Users <span class="minutes">(78:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1 currently-reading">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/index.xhtml#index">
        Index <span class="minutes">(55:12 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/credits.xhtml#credits">
        Credits <span class="minutes">(19:33 mins)</span>
       </a>
      
        
      
    
    
     

     </li><li class="toc-level1">
        
        <a class="js-toc-link toc-link" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01_images.xhtml#ch01_images">
        Code Snippets <span class="minutes">(09:12 mins)</span>
       </a>
      
        
      
   </li></ol>
 </div>



</div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" title="Search in archive" class="js-search-controls search-controls" onclick="window.Appcues.track(&#39;SearchBook_HeronBook&#39;)"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9780136702726/chapter/ch10.xhtml"><div class="js-collections-dropdown collections-dropdown menu-bit-cards" onclick="window.Appcues.track(&#39;AddPlaylist_HeronBook&#39;)"><div data-reactroot="" class="menu-dropdown-wrapper js-menu-dropdown-wrapper align-right"><img class="hidden" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/ajax-transp.gif" alt="loading spinner"><div class="menu-control"><div class="control "><div class="js-playlists-menu"><button class="js-playlist-icon"><svg class="icon-add-to-playlist-sml" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><g transform="translate(-1.000000, 0.000000)"><rect x="5" y="0" width="12" height="2"></rect><title>Playlists</title><path d="M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"></path><circle cx="2" cy="5" r="1"></circle><circle cx="1.94117647" cy="1" r="1"></circle><rect x="5" y="4" width="12" height="2"></rect><rect x="9" y="8" width="8" height="2"></rect><rect x="9" y="12" width="8" height="2"></rect></g></g></g></svg><div class="js-playlist-addto-label">Add&nbsp;To</div></button></div></div></div></div></div></div></li><li class="js-font-control-panel font-control-activator"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size" onclick="window.Appcues.track(&#39;ChangeFont_HeronBook&#39;)"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="trigger" data-push-state="false" title="Share" aria-label="Share" onclick="window.Appcues.track(&#39;Share_HeronBook&#39;)"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li class=""><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml&amp;text=Ruby%20on%20Rails%20Tutorial%2C%206th%20Edition&amp;via=OReillyMedia"><span>Twitter</span></a></li><li class=""><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><span>Facebook</span></a></li><li class=""><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml"><span>Google Plus</span></a></li><li class=""><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%20Chapter%2010.%20Updating%2C%20Showing%2C%20and%20Deleting%20Users&amp;body=https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml%0D%0Afrom%20Ruby%20on%20Rails%20Tutorial%2C%206th%20Edition%0D%0A"><span>Email</span></a></li></ul></li><!-- endif request.user.is_authenticated -->
      </ul>
    </div>

      
          
      

    <section role="document"><script src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/48743.js.download"></script>
<script>
  var userId = "66943332-5511-462c-876e-5d5b720c7edf";

  var userObject = {
    firstName: "Trần",
    segment: "Trial",
    admin: "False",
    profileCreatedOn: "2020-12-01",
    academic: ""
  };
  window.Appcues.identify(userId, userObject);
  window.Appcues.page();

  setTimeout(function () {
    window.Appcues.track('ViewingBook_HeronBook')
  }, 20000);
</script>


	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Chapter 1. From Zero to Deploy</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Chapter 3. Mostly Static Pages</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content"><div class="annotator-wrapper"><section epub:type="chapter">
<h2 class="h2" id="ch02"><span epub:type="pagebreak" id="page_59"></span>Chapter 2</h2>
<h2 class="h2a">A Toy App</h2>
<p class="noindent">In this chapter, we develop a toy demo application to show off some of the power of Rails. The purpose is to get a high-level overview of Ruby on Rails programming (and web development in general) by rapidly generating an application using <em>scaffold generators</em>, which create a large amount of functionality automatically. As discussed in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#box2_1">Box 2.1</a>, the rest of the book will take the opposite approach, developing a full sample application incrementally and explaining each new concept as it arises, but for a quick overview (and some instant gratification) there is no substitute for scaffolding. The resulting toy app will enable us to interact with it through its URLs, giving us insight into the structure of a Rails application, including a first example of the <em>REST architecture</em> favored by Rails.</p>
<p class="indent">As with the forthcoming sample application, the toy app will consist of <em>users</em> and their associated <em>microposts</em> (thus constituting a minimalist Twitter-style app). The functionality will be utterly under-developed, and many of the steps will seem like magic, but worry not: We will develop a similar application from the ground up starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03">Chapter 3</a>, and I will provide plentiful forward-references to later material. In the meantime, have patience and a little faith—the whole point of this tutorial is to take you <em>beyond</em> this superficial, scaffold-driven approach to achieve a deeper understanding of Rails.<span epub:type="pagebreak" id="page_60"></span></p>
<div class="box">
<p class="box-caption" id="box2_1">Box 2.1: Scaffolding: Quicker, Easier, More Seductive</p>
<p class="boxnp">From the beginning, Rails has benefited from a palpable sense of excitement, starting with the famous 15-minute weblog video (youtu.be/Gzj723LkRJY) by Rails creator David Heinemeier Hansson. That video and its successors are a great way to get a taste of Rails’ power, and I recommend watching them. But be warned: They accomplish their amazing 15-minute feat using a feature called <em>scaffolding</em>, which relies heavily on <em>generated code</em>, magically created by the Rails <strong><span class="dark-green"><code>generate scaffold</code></span></strong> command.</p>
<p class="boxip">When writing a Ruby on Rails tutorial, it is tempting to rely on the scaffolding approach—it’s quicker, easier, more seductive. But the complexity and sheer amount of code in the scaffolding can be utterly overwhelming to a beginning Rails developer; you may be able to use it, but you probably won’t understand it. Following the scaffolding approach risks turning you into a virtuoso script generator with little (and brittle) actual knowledge of Rails.</p>
<p class="boxip">In the <em>Ruby on Rails Tutorial</em>, we’ll take the (nearly) polar opposite approach: Although this chapter will develop a small toy app using scaffolding, the core of the Rails Tutorial is the sample app, which we’ll start writing in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#ch03">Chapter 3</a>. At each stage of developing the sample application, we will write <em>small, bite-sized</em> pieces of code—simple enough to understand, yet novel enough to be challenging. The cumulative effect will be a deeper, more flexible knowledge of Rails, giving you a good background for writing nearly any type of web application.</p>
</div>
<section>
<h3 class="h3" id="sec2_1">2.1 Planning the Application</h3>
<p class="noindent">In this section, we’ll outline our plans for the toy application. As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2">Section 1.2</a>, we’ll start by generating the application skeleton using the <strong><span class="green">rails new</span></strong> command with a specific Rails version number:</p>
<p class="codelink"><a id="pf0060-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0060-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> <span class="green1">cd</span> ~/environment
<strong><span class="navy">$</span></strong> rails _6.0.2.1_ new toy_app
<strong><span class="navy">$</span></strong> <span class="green1">cd</span> toy_app/</pre>
<p class="noindent">If you’re using the cloud IDE as recommended in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_1_1">Section 1.1.1</a>, note that this second app can be created in the same environment as the first. It is not necessary to create a new environment. To get the files to appear, you may need to click the gear icon in the file navigator area and select “Refresh File Tree.”<span epub:type="pagebreak" id="page_61"></span></p>
<p class="indent">Next, we’ll use a text editor to update the <strong><span class="green">Gemfile</span></strong> needed by Bundler with the contents of <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex01">Listing 2.1</a>.</p>
<p class="indent"><strong>Important note: For all the Gemfiles in this book, you should use the version numbers listed at gemfiles-6th-ed.railstutorial.org instead of the ones listed below (although they should be identical if you are reading this online).</strong></p>
<p class="ex-title" id="ch02ex01"><strong>Listing 2.1:</strong> A <strong><span class="green">Gemfile</span></strong> for the toy app.</p>
<p class="codelink"><a id="pf0061-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0061-01a">Click here to view code image</a></p>
<div class="example">
<pre>source <span class="maroon">'https://rubygems.org'</span>
git_source(<span class="violet">:github</span>) { <span class="ash">|</span>repo<span class="ash">|</span> <span class="maroon">"https://github.com/</span><strong><span class="pink">#{</span></strong>repo<strong><span class="pink">}</span></strong><span class="maroon">.git"</span> }

gem <span class="maroon">'rails'</span>,       <span class="maroon">'6.0.2.1'</span>
gem <span class="maroon">'puma'</span>,        <span class="maroon">'3.12.2'</span>
gem <span class="maroon">'sass-rails'</span>,  <span class="maroon">'5.1.0'</span>
gem <span class="maroon">'webpacker'</span>,   <span class="maroon">'4.0.7'</span>
gem <span class="maroon">'turbolinks'</span>,  <span class="maroon">'5.2.0'</span>
gem <span class="maroon">'jbuilder'</span>,    <span class="maroon">'2.9.1'</span>
gem <span class="maroon">'bootsnap'</span>,    <span class="maroon">'1.4.5'</span>, <span class="green1">require</span>: <strong><span class="green">false</span></strong>

group <span class="violet">:development</span>, <span class="violet">:test</span> <strong><span class="green">do</span></strong>
  gem <span class="maroon">'sqlite3'</span>, <span class="maroon">'1.4.1'</span>
  gem <span class="maroon">'byebug'</span>,  <span class="maroon">'11.0.1'</span>, <span class="violet">platforms</span>: <span class="ash">[</span><span class="violet">:mri</span>, <span class="violet">:mingw</span>, <span class="violet">:x64_mingw</span><span class="ash">]</span>
<strong><span class="green">end</span></strong>

group <span class="violet">:development</span> <strong><span class="green">do</span></strong>
  gem <span class="maroon">'web-console'</span>,           <span class="maroon">'4.0.1'</span>
  gem <span class="maroon">'listen'</span>,                <span class="maroon">'3.1.5'</span>
  gem <span class="maroon">'spring'</span>,                <span class="maroon">'2.1.0'</span>
  gem <span class="maroon">'spring-watcher-listen'</span>, <span class="maroon">'2.0.1'</span>
<strong><span class="green">end</span></strong>

group <span class="violet">:test</span> <strong><span class="green">do</span></strong>
  gem <span class="maroon">'capybara'</span>,           <span class="maroon">'3.28.0'</span>
  gem <span class="maroon">'selenium-webdriver'</span>, <span class="maroon">'3.142.4'</span>
  gem <span class="maroon">'webdrivers'</span>,         <span class="maroon">'4.1.2'</span>
<strong><span class="green">end</span></strong>

group <span class="violet">:production</span> <strong><span class="green">do</span></strong>
  gem <span class="maroon">'pg'</span>, <span class="maroon">'1.1.4'</span>
<strong><span class="green">end</span></strong>

<span class="blue"># Windows does not include zoneinfo files, so bundle the tzinfo-data gem</span>
gem <span class="maroon">'tzinfo-data'</span>, <span class="violet">platforms</span>: <span class="ash">[</span><span class="violet">:mingw</span>, <span class="violet">:mswin</span>, <span class="violet">:x64_mingw</span>, <span class="violet">:jruby</span><span class="ash">]</span></pre>
</div>
<p class="noindent">Note that <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex01">Listing 2.1</a> is identical to <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01ex018">Listing 1.18</a>.<span epub:type="pagebreak" id="page_62"></span></p>
<p class="indent">As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_4_1">Section 1.4.1</a>, we’ll install the local gems while preventing the installation of production gems using the <span class="dark-green"><strong><code>--without production</code></strong></span> option:</p>
<p class="codelink"><a id="pf0062-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0062-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> bundle install --without production</pre>
<p class="noindent">As noted in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_1">Section 1.2.1</a>, you may need to run <strong><span class="green">bundle update</span></strong> as well (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#box1_2">Box 1.2</a>).</p>
<p class="indent">Finally, we’ll put the toy app under version control with Git:</p>
<p class="codelink"><a id="pf0062-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0062-02a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git init
<strong><span class="navy">$</span></strong> git add -A
<strong><span class="navy">$</span></strong> git commit -m <span class="maroon">"Initialize repository"</span></pre>
<p class="noindent">You should also create a new repository at GitHub by following the same steps as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_3_3">Section 1.3.3</a> (taking care to make it private as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig01">Figure 2.1</a>), and then push up to the remote repository:</p>
<figure id="ch02fig01" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_01.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_01.jpg">
<figcaption><p><strong>Figure 2.1:</strong> Creating the toy app repository at GitHub.</p></figcaption>
</figure>
<span epub:type="pagebreak" id="page_63"></span>
<p class="codelink"><a id="pf0063-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0063-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git remote add origin https://github.com/&lt;username&gt;/toy_app.git
<strong><span class="navy">$</span></strong> git push -u origin master</pre>
<p class="indent">Finally, it’s never too early to deploy, which I suggest doing by following the same “hello, world!” steps from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_4">Section 1.2.4</a>, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex02">Listing 2.2</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex03">Listing 2.3</a>.</p>
<p class="ex-title" id="ch02ex02"><strong>Listing 2.2:</strong> Adding a <strong><span class="green">hello</span></strong> action to the Application controller.</p>
<pre class="pre2">app/controllers/application_controller.rb</pre>
<p class="codelink"><a id="pf0063-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0063-02a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">ApplicationController</span></strong> <span class="ash">&lt;</span> <span class="red">ActionController</span><span class="ash">::</span><span class="red">Base</span>

  <strong><span class="green">def</span></strong> <span class="blue3">hello</span>
<span class="mark">    render <span class="blue1">html</span>: <span class="red2">"hello, world!"</span></span>
  <strong><span class="green">end</span></strong>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="ex-title" id="ch02ex03"><strong>Listing 2.3:</strong> Setting the root route.</p>
<pre class="pre2">config/routes.rb</pre>
<p class="codelink"><a id="pf0063-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0063-03a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>routes<span class="ash">.</span>draw <strong><span class="green">do</span></strong>
  root <span class="maroon">'application#hello'</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent">Then commit the changes and push up to Heroku, and, at the same time, GitHub—it’s a good idea to keep the two copies in sync:</p>
<p class="codelink"><a id="pf0063-04" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0063-04a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git commit -am <span class="maroon">"Add hello"</span>
<strong><span class="navy">$</span></strong> heroku create
<strong><span class="navy">$</span></strong> git push <span class="ash">&amp;&amp;</span> git push heroku master</pre>
<p class="noindent">Here we’ve used the double ampersand operator <strong><span class="green">&amp;&amp;</span></strong> (read “and”) to combine the pushes to GitHub and Heroku; the second command will execute only if the first one succeeds.<sup><a id="ch02fn1a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn1" class="totri-footnote">1</a></sup></p>
<p class="footnote"><a id="ch02fn1" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn1a" class="totri-footnote">1</a>. The <strong><span class="green">&amp;&amp;</span></strong> operator is described in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04">Chapter 4</a> of <em>Learn Enough Command Line to Be Dangerous</em> (<a href="http://www.learnenough.com/command-line">www.learnenough.com/command-line</a>).<span epub:type="pagebreak" id="page_64"></span></p>
<p class="indent">As in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_4">Section 1.4</a>, you may see some warning messages, which you should ignore for now. We’ll deal with them in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_5">Section 7.5</a>. Apart from the URL of the Heroku app, the result should be the same as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01fig031">Figure 1.31</a>.</p>
<section>
<h4 class="h4" id="sec2_1_1">2.1.1 A Toy Model for Users</h4>
<p class="noindent">Now we’re ready to start making the app itself. The typical first step when making a web application is to create a <em>data model</em>, which is a representation of the structures needed by our application, including the relationships between them. In our case, the toy app will be a Twitter-style microblog, with only users and short (micro)posts. Thus, we’ll begin with a model for <em>users</em> of the app in this section, and then we’ll add a model for <em>microposts</em> (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_1_2">Section 2.1.2</a>).</p>
<p class="indent">There are as many choices for a user data model as there are different registration forms on the web; for simplicity, we’ll go with a distinctly minimalist approach. Users of our toy app will have a unique identifier called <strong><span class="dark-green"><code>id</code></span></strong> (of type <span class="dark-green"><strong><code>integer</code></strong></span>), a publicly viewable <span class="dark-green"><strong><code>name</code></strong></span> (of type <span class="dark-green"><strong><code>string</code></strong></span>), and an <strong><span class="dark-green"><strong><code>email</code></strong></span> address (also of type <span class="green">string</span></strong>) that will double as a unique username. (Note that there is no <strong><span class="dark-green"><code>password</code></span></strong> attribute at this point, which is part of what makes this app a “toy.” We’ll cover passwords starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">Chapter 6</a>.) A summary of the data model for users appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig02">Figure 2.2</a>.</p>
<figure id="ch02fig02" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_02.jpg" alt="Image" width="176" height="85" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_02.jpg">
<figcaption><p><strong>Figure 2.2:</strong> The data model for users.</p></figcaption>
</figure>
<p class="indent">As we’ll see starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#sec6_1_1">Section 6.1.1</a>, the label <strong><span class="green">users</span></strong> in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig02">Figure 2.2</a> corresponds to a <em>table</em> in a database, and the <strong><span class="dark-green"><code>id</code></span></strong>, <strong><span class="dark-green"><code>name</code></span></strong>, and <strong><span class="dark-green"><code>email</code></span></strong> attributes are <em>columns</em> in that table.</p>
</section>
<section>
<h4 class="h4" id="sec2_1_2">2.1.2 A Toy Model for Microposts</h4>
<p class="noindent">Recall from the introduction that a <em>micropost</em> is simply a short post, essentially a generic term for the brand-specific “tweet” (with the prefix “micro” motivated by Twitter’s original description as a “micro-blog”). The core of the micropost data model is even <span epub:type="pagebreak" id="page_65"></span>simpler than the one for users: A micropost has only an <strong><span class="dark-green"><code>id</code></span></strong> and a <strong><span class="dark-green"><code>content</code></span></strong> field for the micropost’s text (of type <strong><span class="dark-green"><code>text</code></span></strong>).<sup><a id="ch02fn2a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn2" class="totri-footnote">2</a></sup> There’s an additional complication, though: We want to <em>associate</em> each micropost with a particular user. We’ll accomplish this by recording the <strong><span class="dark-green"><code>user_id</code></span></strong> of the owner of the post. The results are shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig03">Figure 2.3</a>.</p>
<p class="footnote"><a id="ch02fn2" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn2a" class="totri-footnote">2</a>. Because microposts are short by design, the <strong><span class="dark-green"><code>string</code></span></strong> type might actually be big enough to contain them, but using <strong><span class="dark-green"><code>text</code></span></strong> better expresses our intent, while also giving us greater flexibility should we ever wish to relax the length constraint. Indeed, Twitter’s change from allowing 140 to 280 characters in English-language tweets is a perfect example of why such flexibility is important: A <strong><span class="dark-green"><code>string</code></span></strong> typically allows 255 (2<sup>8</sup> <em>–</em> 1) characters, which is big enough for 140-character tweets but not for 280-character ones. Using <strong><span class="dark-green"><code>text</code></span></strong> allows a unified treatment of both cases.</p>
<figure id="ch02fig03" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_03.jpg" alt="Image" width="195" height="93" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_03.jpg">
<figcaption><p><strong>Figure 2.3:</strong> The data model for microposts.</p></figcaption>
</figure>
<p class="indent">We’ll see in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_3_3">Section 2.3.3</a> (and more fully in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch13.xhtml#ch13">Chapter 13</a>) how this <strong><span class="dark-green"><code>user_id</code></span></strong> attribute allows us to succinctly express the notion that a user potentially has many associated microposts.</p>
</section>
</section>
<section>
<h3 class="h3" id="sec2_2">2.2 The Users Resource</h3>
<p class="noindent">In this section, we’ll implement the users data model in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_1_1">Section 2.1.1</a>, along with a web interface to that model. The combination will constitute a <em>Users resource</em>, which will allow us to think of users as objects that can be created, read, updated, and deleted through the web via the HTTP protocol. As promised in the introduction, our Users resource will be created by a scaffold generator program, which comes standard with each Rails project. I urge you not to look too closely at the generated code; at this stage, it will only serve to confuse you.</p>
<p class="indent">Rails scaffolding is generated by passing the <strong><span class="dark-green"><code>scaffold</code></span></strong> command to the <strong><span class="dark-green"><code>rails generate</code></span></strong> script. The argument of the <strong><span class="dark-green"><code>scaffold</code></span></strong> command is the singular version of <span epub:type="pagebreak" id="page_66"></span>the resource name (in this case, <strong><span class="dark-green"><code>User</code></span></strong>), together with optional parameters for the data model’s attributes:<sup><a id="ch02fn3a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn3" class="totri-footnote">3</a></sup></p>
<p class="footnote"><a id="ch02fn3" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn3a" class="totri-footnote">3</a>. The name of the scaffold follows the convention of <em>models</em>, which are singular, rather than resources and controllers, which are plural. Thus, we have <strong><span class="dark-green"><code>User</code></span></strong> instead of <strong><span class="dark-green"><code>Users</code></span></strong>.</p>
<p class="codelink"><a id="pf0066-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0066-01a">Click here to view code image</a></p>
<pre class="pre1"><span class="mark"><strong><span class="blue1">$</span></strong> rails generate scaffold User name:string email:string</span>

      <span class="green">invoke  active_record</span>
      <span class="green">create    db/migrate/&lt;timestamp&gt;_create_users.rb</span>
      <span class="green">create    app/models/user.rb</span>
      <span class="green">invoke    test_unit</span>
      <span class="green">create      test/models/user_test.rb</span>
      <span class="green">create      test/fixtures/users.yml</span>
      <span class="green">invoke  resource_route</span>
       <span class="green">route    resources :users</span>
      <span class="green">invoke  scaffold_controller</span>
      <span class="green">create    app/controllers/users_controller.rb</span>
      <span class="green">invoke    erb</span>
      <span class="green">create      app/views/users</span>
      <span class="green">create      app/views/users/index.html.erb</span>
      <span class="green">create      app/views/users/edit.html.erb</span>
      <span class="green">create      app/views/users/show.html.erb</span>
      <span class="green">create      app/views/users/new.html.erb</span>
      <span class="green">create      app/views/users/_form.html.erb</span>
      <span class="green">invoke    test_unit</span>
      <span class="green">create      test/controllers/users_controller_test.rb</span>
      <span class="green">create      test/system/users_test.rb</span>
      <span class="green">invoke    helper</span>
      <span class="green">create      app/helpers/users_helper.rb</span>
      <span class="green">invoke      test_unit</span>
      <span class="green">invoke    jbuilder</span>
      <span class="green">create      app/views/users/index.json.jbuilder</span>
      <span class="green">create      app/views/users/show.json.jbuilder</span>
      <span class="green">create      app/views/users/_user.json.jbuilder</span>
      <span class="green">invoke  assets</span>
      <span class="green">invoke    scss</span>
      <span class="green">create      app/assets/stylesheets/users.scss</span>
      <span class="green">invoke  scss</span>
      <span class="green">create    app/assets/stylesheets/scaffolds.scss</span></pre>
<p class="noindent">By including <strong><span class="dark-green"><code>name:string</code></span></strong> and <strong><span class="dark-green"><code>email:string</code></span></strong>, we have arranged for the User model to have the form shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig02">Figure 2.2</a>. (Note that there is no need to include a parameter for <strong><span class="dark-green"><code>id</code></span></strong>; Rails creates it automatically for use as the <em>primary key</em> in the database.)<span epub:type="pagebreak" id="page_67"></span></p>
<p class="indent">To proceed with the toy application, we first need to <em>migrate</em> the database using <strong><span class="dark-green"><code>rails db:migrate</code></span></strong>, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex04">Listing 2.4</a>.</p>
<p class="ex-title" id="ch02ex04"><strong>Listing 2.4:</strong> Migrating the database.</p>
<p class="codelink"><a id="pf0067-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0067-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="mark">$ rails db:migrate</span>
== CreateUsers: migrating ======================================
-- create_table(:users)
   -&gt; 0.0027s
== CreateUsers: migrated (0.0036s) =============================</pre>
</div>
<p class="noindent">The effect of <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex04">Listing 2.4</a> is to update the database with our new <strong><span class="dark-green"><code>users</code></span></strong> data model. (We’ll learn more about database migrations starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#sec6_1_1">Section 6.1.1</a>.)</p>
<p class="indent">Having run the migration in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex04">Listing 2.4</a>, we can run the local webserver in a separate tab (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01fig015">Figure 1.15</a>). Users of the cloud IDE should first add the same configuration as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_2">Section 1.2.2</a> to allow the toy app to be served (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex05">Listing 2.5</a>).</p>
<p class="ex-title" id="ch02ex05"><strong>Listing 2.5:</strong> Allowing connections to the local web server.</p>
<pre class="pre2">config/environments/development.rb</pre>
<p class="codelink"><a id="pf0067-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0067-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>configure <strong><span class="green">do</span></strong>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
<span class="green4"><span class="mark">  # Allow Cloud9 connections.</span></span>
<span class="mark">  config.hosts.clear</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="noindent">Then run the Rails server as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_2">Section 1.2.2</a>:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> rails server</pre>
<p class="noindent">Now the toy application should be available on the local server as described in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_2">Section 1.2.2</a>. In particular, if we visit the root URL at / (read “slash”, as noted in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_4">Section 1.2.4</a>), we get the same “hello, world!” page shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#ch01fig020">Figure 1.20</a>.<span epub:type="pagebreak" id="page_68"></span></p>
<section>
<h4 class="h4" id="sec2_2_1">2.2.1 A User Tour</h4>
<p class="noindent">In generating the Users resource scaffolding in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2">Section 2.2</a>, Rails created a large number of pages for manipulating users. For example, the page for listing all users is at /users, and the page for making a new user is at /users/new. The rest of this section is dedicated to taking a whirlwind tour through these user pages. As we proceed, it may help to refer to <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02tab01">Table 2.1</a>, which shows the correspondence between pages and URLs.</p>
<p class="indent">We start with the page that shows all the users in our application, called <span class="dark-green"><strong><code>index</code></strong></span> and located at /users. As you might expect, initially there are no users at all (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig04">Figure 2.4</a>).</p>
<figure id="ch02fig04" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_04.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_04.jpg">
<figcaption><p><strong>Figure 2.4:</strong> The initial index page for the Users resource (/users).</p></figcaption>
</figure>
<figure id="ch02tab01">
<figcaption><p><strong>Table 2.1:</strong> The correspondence between pages and URLs for the Users resource.</p></figcaption>
<table class="topbot">
<thead>
<tr>
<th class="tab-th"><p class="tab-para">URL</p></th>
<th class="tab-th"><p class="tab-para">Action</p></th>
<th class="tab-th"><p class="tab-para">Purpose</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="tab-para">/users</p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>index</code></strong></span></p></td>
<td><p class="tab-para">page to list all users</p></td>
</tr>
<tr>
<td><p class="tab-para">/users/1</p></td>
<td><p class="tab-para"><span class="dark-green"><strong><code>show</code></strong></span></p></td>
<td><p class="tab-para">page to show user with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
<tr>
<td><p class="tab-para">/users/new</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>new</code></span></strong></p></td>
<td><p class="tab-para">page to make a new user</p></td>
</tr>
<tr>
<td><p class="tab-para">/users/1/edit</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>edit</code></span></strong></p></td>
<td><p class="tab-para">page to edit user with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
</tbody>
</table>
</figure>
<p class="indent"><span epub:type="pagebreak" id="page_69"></span>To make a new user, we can click on the New User link in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig04">Figure 2.4</a> to visit the <strong><span class="dark-green"><code>new</code></span></strong> page at /users/new, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig05">Figure 2.5</a>. In <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#ch07">Chapter 7</a>, this will become the user signup page.</p>
<figure id="ch02fig05" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_05.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_05.jpg">
<figcaption><p><strong>Figure 2.5:</strong> The new user page (/users/new).</p></figcaption>
</figure>
<p class="indent">We can create a user by entering name and email values in the text fields and then clicking the Create User button. The result is the user <strong><span class="dark-green"><code>show</code></span></strong> page at /users/1, as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig06">Figure 2.6</a>. (The green welcome message is accomplished using the <em>flash</em>, which we’ll learn about in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_4_2">Section 7.4.2</a>.) Note that the URL is /users/1; as you might suspect, the number <strong><span class="dark-green"><code>1</code></span></strong> is simply the user’s <strong><span class="dark-green"><code>id</code></span></strong> attribute from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig02">Figure 2.2</a>. In <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_1">Section 7.1</a>, this page will become the user’s profile page.</p>
<figure id="ch02fig06" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_06.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_06.jpg">
<figcaption><p><strong>Figure 2.6:</strong> The page to show a user (/users/1).</p></figcaption>
</figure>
<p class="indent">To change a user’s information, we click the Edit link to visit the <strong><span class="dark-green"><code>edit</code></span></strong> page at /users/1/edit (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig07">Figure 2.7</a>). By modifying the user information and clicking the Update User button, we arrange to change the information for the user in the toy application (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig08">Figure 2.8</a>). (As we’ll see in detail starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#ch06">Chapter 6</a>, this user data is stored in a database back end.) We’ll add user edit/update functionality to the sample application in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml#sec10_1">Section 10.1</a>.</p>
<figure id="ch02fig07" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_07.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_07.jpg">
<figcaption><p><strong>Figure 2.7:</strong> The user edit page (/users/1/edit).</p></figcaption>
</figure>
<figure id="ch02fig08" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_08.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_08.jpg">
<figcaption><p><strong>Figure 2.8:</strong> A user with updated information.</p></figcaption>
</figure>
<p class="indent">Now we’ll create a second user by revisiting the <strong><span class="dark-green"><code>new</code></span></strong> page at /users/new and submitting a second set of user information. The resulting user <strong><span class="dark-green"><code>index</code></span></strong> is shown in <span epub:type="pagebreak" id="page_70"></span><span epub:type="pagebreak" id="page_71"></span><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig09">Figure 2.9</a>. In <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_1">Section 7.1</a>, we will develop the user index into a more polished page for showing all users.</p>
<figure id="ch02fig09" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_09.jpg" alt="Image" width="677" height="521" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_09.jpg">
<figcaption><p><strong>Figure 2.9:</strong> The user index page (/users) with a second user.</p></figcaption>
</figure>
<p class="indent">Having shown how to create, show, and edit users, we come finally to destroying them (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig010">Figure 2.10</a>). You should verify that clicking on the link in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig010">Figure 2.10</a> destroys the second user, yielding an index page with only one user. (If it doesn’t work, be sure that JavaScript is enabled in your browser; Rails uses JavaScript to issue the request needed to destroy a user.) <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch10.xhtml#sec10_4">Section 10.4</a> adds user deletion to the sample app, taking care to restrict its use to a special class of administrative users.</p>
<figure id="ch02fig010" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_10.jpg" alt="Image" width="1200" height="923" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_10.jpg">
<figcaption><p><strong>Figure 2.10:</strong> Destroying a user.</p></figcaption>
</figure>
<section>
<h5 class="h5" id="lev16">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.<span epub:type="pagebreak" id="page_72"></span><span epub:type="pagebreak" id="page_73"></span></p>
<ol class="num">
<li><p class="num">(For readers who know CSS) Create a new user, then use your browser’s HTML inspector to determine the CSS id for the text “User was successfully created.” What happens when you refresh your browser?</p></li>
<li><p class="num">What happens if you try to create a user with a name but no email address?</p></li>
<li><p class="num">What happens if you try create a user with an invalid email address, like “@example.com”?</p></li>
<li><p class="num">Destroy each of the users created in the previous exercises. Does Rails display a message by default when a user is destroyed?</p></li>
</ol></section>
</section>
<section>
<h4 class="h4" id="sec2_2_2">2.2.2 MVC in Action</h4>
<p class="noindent">Now that we’ve completed a quick overview of the Users resource, let’s examine one particular part of it in the context of the model-view-controller (MVC) pattern introduced in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_2_3">Section 1.2.3</a>. Our strategy will be to describe the results of a typical browser hit—a visit to the user index page at /users—in terms of MVC (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig011">Figure 2.11</a>).</p>
<figure id="ch02fig011" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_11.jpg" alt="Image" width="520" height="536" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_11.jpg">
<figcaption><p><strong>Figure 2.11:</strong> A detailed diagram of MVC in Rails.</p></figcaption>
</figure>
<p class="indent">Here is a summary of the steps shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig011">Figure 2.11</a>:</p>
<ol class="num">
<li><p class="num">The browser issues a request for the /users URL.</p></li>
<li><p class="num">Rails routes /users to the <strong><span class="dark-green"><code>index</code></span></strong> action in the Users controller.</p></li>
<li><p class="num">The <strong><span class="dark-green"><code>index</code></span></strong> action asks the User model to retrieve all users (<strong><span class="dark-green"><code>User.all</code></span></strong>).</p></li>
<li><p class="num">The User model pulls all the users from the database.</p></li>
<li><p class="num">The User model returns the list of users to the controller.</p></li>
<li><p class="num">The controller captures the users in the <strong><span class="dark-green"><code>@users</code></span></strong> variable, which is passed to the <strong><span class="dark-green"><code>index</code></span></strong> view.</p></li>
<li><p class="num">The view uses embedded Ruby to render the page as HTML.</p></li>
<li><p class="num">The controller passes the HTML back to the browser.<sup><a id="ch02fn4a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn4" class="totri-footnote">4</a></sup></p></li>
</ol>
<p class="footnote"><a id="ch02fn4" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn4a" class="totri-footnote">4</a>. Some references indicate that the view returns the HTML directly to the browser (via a webserver such as Apache or Nginx). Regardless of the implementation details, I find it helpful to think of the controller as a central hub through which all the application’s information flows.</p>
<p class="indent">Now let’s take a look at the these steps in more detail. We start with a request issued from the browser—that is, the result of typing a URL in the address bar or clicking on a link (Step 1 in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig011">Figure 2.11</a>). This request hits the <em>Rails router</em> (Step 2), which <span epub:type="pagebreak" id="page_74"></span>dispatches the request to the proper <em>controller action</em> based on the URL (and, as we’ll see in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#box3_2">Box 3.2</a>, the type of request). The code to create the mapping of user URLs to controller actions for the Users resource appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex06">Listing 2.6</a>. This code effectively sets up the table of URL/action pairs seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02tab01">Table 2.1</a>. (The strange notation <strong><span class="dark-green"><code>:users</code></span></strong> is a <em>symbol</em>, which we’ll learn about in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_3_3">Section 4.3.3</a>.)</p>
<p class="ex-title" id="ch02ex06"><strong>Listing 2.6:</strong> The Rails routes, with a rule for the Users resource.</p>
<pre class="pre2">config/routes.rb</pre>
<p class="codelink"><a id="pf0074-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0074-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>routes<span class="ash">.</span>draw <strong><span class="green">do</span></strong>
<span class="mark">  resources <span class="blue1">:users</span></span>
  root <span class="maroon">'application#hello'</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_75"></span>While we’re looking at the routes file, let’s take a moment to associate the root route with the users index, so that “slash” goes to /users. Recall from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex03">Listing 2.3</a> that we added the root route</p>
<pre class="pre1">root <span class="maroon">'application#hello'</span></pre>
<p class="noindent">so that the root route went to the <strong><span class="dark-green"><code>hello</code></span></strong> action in the Application controller. In the present case, we want to use the <strong><span class="dark-green"><code>index</code></span></strong> action in the Users controller, which we can arrange using the code shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex07">Listing 2.7</a>.</p>
<p class="ex-title" id="ch02ex07"><strong>Listing 2.7:</strong> Adding a root route for users.</p>
<pre class="pre2">config/routes.rb</pre>
<p class="codelink"><a id="pf0075-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0075-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>routes<span class="ash">.</span>draw <strong><span class="green">do</span></strong>
  resources <span class="violet">:users</span>
<span class="mark">  root <span class="red2">'users#index'</span></span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent">A <em>controller</em> contains a collection of related <em>actions</em>, and the pages from the tour in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2_1">Section 2.2.1</a> correspond to actions in the Users controller. The controller generated by the scaffolding is shown schematically in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex08">Listing 2.8</a>. Note the code <strong><span class="dark-green"><code>class UsersController &lt; ApplicationController</code></span></strong>, which is an example of a Ruby <em>class</em> with <em>inheritance</em>. (We’ll discuss inheritance briefly in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_3_4">Section 2.3.4</a> and cover both subjects in more detail in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_4">Section 4.4</a>.)</p>
<p class="ex-title" id="ch02ex08"><strong>Listing 2.8:</strong> The Users controller in schematic form.</p>
<pre class="pre2">app/controllers/users_controller.rb</pre>
<p class="codelink"><a id="pf0075-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0075-03a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">UsersController</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationController</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <strong><span class="green">def</span></strong> <span class="blue3">index</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>
<span epub:type="pagebreak" id="page_76"></span>  <strong><span class="green">def</span></strong> <span class="blue3">show</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">new</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">edit</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">create</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">update</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">destroy</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="noindent">You might notice that there are more actions than there are pages. The <strong><span class="dark-green"><code>index</code></span></strong>, <strong><span class="dark-green"><code>show</code></span></strong>, <strong><span class="dark-green"><code>new</code></span></strong>, and <strong><span class="dark-green"><code>edit</code></span></strong> actions all correspond to pages from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2_1">Section 2.2.1</a>, but there are additional <strong><span class="dark-green"><code>create</code></span></strong>, <strong><span class="dark-green"><code>update</code></span></strong>, and <strong><span class="dark-green"><code>destroy</code></span></strong> actions as well. These actions don’t typically render pages (although they can); instead, their main purpose is to modify information about users in the database.</p>
<p class="indent">This full suite of controller actions, summarized in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02tab02">Table 2.2</a>, represents the implementation of the REST architecture in Rails (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#box2_2">Box 2.2</a>), which is based on the idea of <em>representational state transfer</em>, a concept identified and named by computer scientist <span epub:type="pagebreak" id="page_77"></span>Roy Fielding.<sup><a id="ch02fn5a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn5" class="totri-footnote">5</a></sup> Note from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02tab02">Table 2.2</a> that there is some overlap in the URLs; for example, both the user <strong><span class="dark-green"><code>show</code></span></strong> action and the <strong><span class="dark-green"><code>update</code></span></strong> action correspond to the URL /users/1. The difference between them is the HTTP request method they respond to. We’ll learn more about HTTP request methods starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_3">Section 3.3</a>.</p>
<p class="footnote"><a id="ch02fn5" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn5a" class="totri-footnote">5</a>. Fielding, Roy Thomas. <em>Architectural Styles and the Design of Network-Based Software Architectures</em>. Doctoral dissertation, University of California, Irvine, 2000.</p>
<figure id="ch02tab02">
<figcaption><p><strong>Table 2.2:</strong> RESTful routes provided by the Users resource in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex06">Listing 2.6</a>.</p></figcaption>
<table class="topbot">
<thead>
<tr>
<th class="tab-th"><p class="tab-para">HTTP request</p></th>
<th class="tab-th"><p class="tab-para">URL</p></th>
<th class="tab-th"><p class="tab-para">Action</p></th>
<th class="tab-th"><p class="tab-para">Purpose</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="tab-para"><code>GET</code></p></td>
<td><p class="tab-para">/users</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>index</code></span></strong></p></td>
<td><p class="tab-para">page to list all users</p></td>
</tr>
<tr>
<td><p class="tab-para"><code>GET</code></p></td>
<td><p class="tab-para">/users/1</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>show</code></span></strong></p></td>
<td><p class="tab-para">page to show user with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
<tr>
<td><p class="tab-para"><code>GET</code></p></td>
<td><p class="tab-para">/users/new</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>new</code></span></strong></p></td>
<td><p class="tab-para">page to make a new user</p></td>
</tr>
<tr>
<td><p class="tab-para"><code>POST</code></p></td>
<td><p class="tab-para">/users</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>create</code></span></strong></p></td>
<td><p class="tab-para">create a new user</p></td>
</tr>
<tr>
<td><p class="tab-para"><code>GET</code></p></td>
<td><p class="tab-para">/users/1/edit</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>edit</code></span></strong></p></td>
<td><p class="tab-para">page to edit user with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
<tr>
<td><p class="tab-para"><code>PATCH</code></p></td>
<td><p class="tab-para">/users/1</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>update</code></span></strong></p></td>
<td><p class="tab-para">update user with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
<tr>
<td><p class="tab-para"><code>DELETE</code></p></td>
<td><p class="tab-para">/users/1</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>destroy</code></span></strong></p></td>
<td><p class="tab-para">delete user with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
</tbody>
</table>
</figure>
<div class="box">
<p class="box-caption" id="box2_2">Box 2.2: REpresentational State Transfer (REST)</p>
<p class="boxnp">If you read much about Ruby on Rails web development, you’ll see a lot of references to “REST,” which is an acronym for REpresentational State Transfer. REST is an architectural style for developing distributed, networked systems and software applications such as the World Wide Web and web applications. Although REST theory is rather abstract, in the context of Rails applications REST means that most application components (such as users and microposts) are modeled as <em>resources</em> that can be created, read, updated, and deleted—operations that correspond both to the CRUD operations of relational databases and to the four fundamental HTTP request methods: <code>POST</code>, <code>GET</code>, <code>PATCH</code>, and <code>DELETE</code>. (We’ll learn more about HTTP requests in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#sec3_3">Section 3.3</a> and especially <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml#box3_2">Box 3.2</a>.)</p>
<p class="boxip">As a Rails application developer, the RESTful style of development helps you make choices about which controllers and actions to write: You simply structure the application using resources that get created, read, updated, and deleted. In the case of users and microposts, this process is straightforward, since they are naturally resources in their own right. In <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch14.xhtml#ch14">Chapter 14</a>, we’ll see an example where <span epub:type="pagebreak" id="page_78"></span>REST principles allow us to model a subtler problem, “following users,” in a natural and convenient way.</p>
</div>
<p class="indent">To examine the relationship between the Users controller and the User model, let’s focus on the <strong><span class="dark-green"><code>index</code></span></strong> action, shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex09">Listing 2.9</a>. (Learning how to read code even when you don’t fully understand it is an important aspect of technical sophistication (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#box1_2">Box 1.2</a>).)</p>
<p class="ex-title" id="ch02ex09"><strong>Listing 2.9:</strong> The simplified user <strong><span class="dark-green"><code>index</code></span></strong> action for the toy application.</p>
<pre class="pre2">app/controllers/users_controller.rb</pre>
<p class="codelink"><a id="pf0078-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0078-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">UsersController</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationController</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <strong><span class="green">def</span></strong> <span class="blue3">index</span>
<span class="mark"><span class="blue1">    @users</span> <span class="ash1">=</span> <span class="red2">User</span><span class="ash1">.</span>all</span>
  <strong><span class="green">end</span></strong>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="noindent">This <strong><span class="dark-green"><code>index</code></span></strong> action includes the line <strong><span class="dark-green"><code>@users = User.all</code></span></strong> (Step 3 in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig011">Figure 2.11</a>), which asks the User model to retrieve a list of all the users from the database (Step 4), and then places them in the variable <strong><span class="dark-green"><code>@users</code></span></strong> (pronounced “at-users”) (Step 5).</p>
<p class="indent">The User model itself appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex010">Listing 2.10</a>. Although it is rather plain, it comes equipped with a large amount of functionality because of inheritance (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_3_4">Section 2.3.4</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_4">Section 4.4</a>). In particular, by using the Rails library called <em>Active Record</em>, the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex010">Listing 2.10</a> arranges for <strong><span class="dark-green"><code>User.all</code></span></strong> to return all the users in the database.</p>
<p class="ex-title" id="ch02ex010"><strong>Listing 2.10:</strong> The User model for the toy application.</p>
<pre class="pre2">app/models/user.rb</pre>
<p class="codelink"><a id="pf0078-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0078-02a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">User</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationRecord</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_79"></span>Once the <strong><span class="dark-green"><code>@users</code></span></strong> variable is defined, the controller calls the <em>view</em> (Step 6), shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex011">Listing 2.11</a>. Variables that start with the <strong><span class="dark-green"><code>@</code></span></strong> sign, called <em>instance variables</em>, are automatically available in the views; in this case, the <strong><span class="dark-green"><code>index.html.erb</code></span></strong> view in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex011">Listing 2.11</a> iterates through the <strong><span class="dark-green"><code>@users</code></span></strong> list and outputs a line of HTML for each one. (Remember, you aren’t supposed to understand this code right now. It is shown only for purposes of illustration.)</p>
<p class="ex-title" id="ch02ex011"><strong>Listing 2.11:</strong> The view for the users index.</p>
<pre class="pre2">app/views/users/index.html.erb</pre>
<p class="codelink"><a id="pf0079-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0079-01a">Click here to view code image</a></p>
<div class="example">
<pre>&lt;<strong><span class="green">p</span></strong> <span class="ash3">id</span><span class="ash">=</span><span class="maroon">"notice"</span>&gt;<span class="red5">&lt;%=</span> notice <span class="red5">%&gt;</span>&lt;/<strong><span class="green">p</span></strong>&gt;

&lt;<strong><span class="green">h1</span></strong>&gt;Users&lt;/<strong><span class="green">h1</span></strong>&gt;

&lt;<strong><span class="green">table</span></strong>&gt;
  &lt;<strong><span class="green">thead</span></strong>&gt;
    &lt;<strong><span class="green">tr</span></strong>&gt;
      &lt;<strong><span class="green">th</span></strong>&gt;Name&lt;/<strong><span class="green">th</span></strong>&gt;
      &lt;<strong><span class="green">th</span></strong>&gt;Email&lt;/<strong><span class="green">th</span></strong>&gt;
      &lt;<strong><span class="green">th</span></strong> <span class="ash3">colspan</span><span class="ash">=</span><span class="maroon">"3"</span>&gt;&lt;/<strong><span class="green">th</span></strong>&gt;
    &lt;/<strong><span class="green">tr</span></strong>&gt;
  &lt;/<strong><span class="green">thead</span></strong>&gt;

  &lt;<strong><span class="green">tbody</span></strong>&gt;
<span class="mark"><span class="maroon1">    &lt;%</span> <span class="blue1">@users</span><span class="ash1">.</span>each <strong><span class="green3">do</span></strong> <span class="ash1">|</span>user<span class="ash1">|</span> <span class="maroon1">%&gt;</span></span>
      &lt;<strong><span class="green">tr</span></strong>&gt;
        &lt;<strong><span class="green">td</span></strong>&gt;<span class="red5">&lt;%=</span> user<span class="ash">.</span>name <span class="red5">%&gt;</span>&lt;/<strong><span class="green">td</span></strong>&gt;
        &lt;<strong><span class="green">td</span></strong>&gt;<span class="red5">&lt;%=</span> user<span class="ash">.</span>email <span class="red5">%&gt;</span>&lt;/<strong><span class="green">td</span></strong>&gt;
        &lt;<strong><span class="green">td</span></strong>&gt;<span class="red5">&lt;%=</span> link_to <span class="maroon">'Show'</span>, user <span class="red5">%&gt;</span>&lt;/<strong><span class="green">td</span></strong>&gt;
        &lt;<strong><span class="green">td</span></strong>&gt;<span class="red5">&lt;%=</span> link_to <span class="maroon">'Edit'</span>, edit_user_path(user) <span class="red5">%&gt;</span>&lt;/<strong><span class="green">td</span></strong>&gt;
        &lt;<strong><span class="green">td</span></strong>&gt;<span class="red5">&lt;%=</span> link_to <span class="maroon">'Destroy'</span>, user, <span class="green1">method</span>: <span class="violet">:delete</span>,
                         <span class="violet">data</span>: { <span class="violet">confirm</span>: <span class="maroon">'Are you sure?'</span> } <span class="red5">%&gt;</span>&lt;/<strong><span class="green">td</span></strong>&gt;
      &lt;/<strong><span class="green">tr</span></strong>&gt;
    <span class="red5">&lt;%</span> <strong><span class="green">end</span></strong> <span class="red5">%&gt;</span>
  &lt;/<strong><span class="green">tbody</span></strong>&gt;
&lt;/<strong><span class="green">table</span></strong>&gt;

&lt;<strong><span class="green">br</span></strong>&gt;

<span class="red5">&lt;%=</span> link_to <span class="maroon">'New User'</span>, new_user_path <span class="red5">%&gt;</span></pre>
</div>
<p class="noindent">The view converts its contents to HTML (Step 7), which is then returned by the controller to the browser for display (Step 8).<span epub:type="pagebreak" id="page_80"></span></p>
<section>
<h5 class="h5" id="lev17">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">By referring to <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig011">Figure 2.11</a>, write out the analogous steps for visiting the URL /users/1/edit.</p></li>
<li><p class="num">Find the line in the scaffolding code that retrieves the user from the database in the previous exercise. <em>Hint</em>: It’s in a special location called <strong><span class="dark-green"><code>set_user</code></span></strong>.</p></li>
<li><p class="num">What is the name of the view file for the user edit page?</p></li>
</ol></section>
</section>
<section>
<h4 class="h4" id="sec2_2_3">2.2.3 Weaknesses of this Users Resource</h4>
<p class="noindent">Though good for getting a general overview of Rails, the scaffold Users resource suffers from a number of severe weaknesses.</p>
<p class="bullet">• <strong>No data validations.</strong> Our User model accepts data such as blank names and invalid email addresses without complaint.</p>
<p class="bullet">• <strong>No authentication.</strong> We have no notion of logging in or out, and no way to prevent any user from performing any operation.</p>
<p class="bullet">• <strong>No tests.</strong> This isn’t technically true—the scaffolding includes rudimentary tests— but the generated tests don’t test for data validation, authentication, or any other custom requirements.</p>
<p class="bullet">• <strong>No style or layout.</strong> There is no consistent site styling or navigation.</p>
<p class="bullet">• <strong>No real understanding.</strong> If you understand the scaffold code, you probably shouldn’t be reading this book.</p>
</section>
</section>
<section>
<h3 class="h3" id="sec2_3">2.3 The Microposts Resource</h3>
<p class="noindent">Having generated and explored the Users resource, we turn now to the associated Microposts resource. Throughout this section, I recommend comparing the elements of the Microposts resource with the analogous user elements from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2">Section 2.2</a>; you should see that the two resources parallel each other in many ways. The RESTful structure of Rails applications is best absorbed by this sort of repetition of form. Indeed, seeing the parallel structure of Users and Microposts even at this early stage is one of the prime motivations for this chapter.<span epub:type="pagebreak" id="page_81"></span></p>
</section>
<section>
<h4 class="h4" id="sec2_3_1">2.3.1 A Micropost Microtour</h4>
<p class="noindent">As with the Users resource, we’ll generate scaffold code for the Microposts resource using <strong><span class="dark-green"><code>rails generate scaffold</code></span></strong>, in this case implementing the data model from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig03">Figure 2.3</a>:<sup><a id="ch02fn6a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn6" class="totri-footnote">6</a></sup></p>
<p class="footnote"><a id="ch02fn6" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn6a" class="totri-footnote">6</a>. As with the User scaffold, the scaffold generator for microposts follows the singular convention of Rails models; thus, we have <strong><span class="dark-green"><code>generate Micropost</code></span></strong>.</p>
<p class="codelink"><a id="pf0081-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0081-01a">Click here to view code image</a></p>
<pre class="pre1"><span class="mark"><strong><span class="blue1">$</span></strong> rails generate scaffold Micropost content:text user_id:integer</span>

      <span class="green">invoke  active_record</span>
      <span class="green">create    db/migrate/&lt;timestamp&gt;_create_microposts.rb</span>
      <span class="green">create    app/models/micropost.rb</span>
      <span class="green">invoke    test_unit</span>
      <span class="green">create      test/models/micropost_test.rb</span>
      <span class="green">create      test/fixtures/microposts.yml</span>
      <span class="green">invoke  resource_route</span>
       <span class="green">route    resources :microposts</span>
      <span class="green">invoke  scaffold_controller</span>
      <span class="green">create    app/controllers/microposts_controller.rb</span>
      <span class="green">invoke    erb</span>
      <span class="green">create      app/views/microposts</span>
      <span class="green">create      app/views/microposts/index.html.erb</span>
      <span class="green">create      app/views/microposts/edit.html.erb</span>
      <span class="green">create      app/views/microposts/show.html.erb</span>
      <span class="green">create      app/views/microposts/new.html.erb</span>
      <span class="green">create      app/views/microposts/_form.html.erb</span>
      <span class="green">invoke    test_unit</span>
      <span class="green">create      test/controllers/microposts_controller_test.rb</span>
      <span class="green">create      test/system/microposts_test.rb</span>
      <span class="green">invoke    helper</span>
      <span class="green">create      app/helpers/microposts_helper.rb</span>
      <span class="green">invoke      test_unit</span>
      <span class="green">invoke    jbuilder</span>
      <span class="green">create      app/views/microposts/index.json.jbuilder</span>
      <span class="green">create      app/views/microposts/show.json.jbuilder</span>
      <span class="green">create      app/views/microposts/_micropost.json.jbuilder</span>
      <span class="green">invoke  assets</span>
      <span class="green">invoke    scss</span>
      <span class="green">create      app/assets/stylesheets/microposts.scss</span>
      <span class="green">invoke  scss</span>
   <span class="green">identical    app/assets/stylesheets/scaffolds.scss</span></pre>
<p class="noindent">To update our database with the new data model, we need to run a migration as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2">Section 2.2</a>:<span epub:type="pagebreak" id="page_82"></span></p>
<p class="codelink"><a id="pf0082-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0082-01a">Click here to view code image</a></p>
<pre class="pre1">$ rails db:migrate
== CreateMicroposts: migrating ===============================================
-- create_table(:microposts)
   -&gt; 0.0023s
== CreateMicroposts: migrated (0.0026s) ======================================</pre>
<p class="indent">Now we are in a position to create microposts in the same way we created users in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2_1">Section 2.2.1</a>. As you might guess, the scaffold generator has updated the Rails routes file with a rule for Microposts resource, as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex012">Listing 2.12</a>.<sup><a id="ch02fn7a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn7" class="totri-footnote">7</a></sup> As with users, the <strong><span class="dark-green"><code>resources :microposts</code></span></strong> routing rule maps micropost URLs to actions in the Microposts controller, as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02tab03">Table 2.3</a>.</p>
<p class="footnote"><a id="ch02fn7" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn7a" class="totri-footnote">7</a>. The scaffold code may have extra blank lines compared to <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex012">Listing 2.12</a>. This is not a cause for concern, as Ruby ignores such extra space.</p>
<p class="ex-title" id="ch02ex012"><strong>Listing 2.12:</strong> The Rails routes, with a new rule for Microposts resources.</p>
<pre class="pre2">config/routes.rb</pre>
<p class="codelink"><a id="pf0082-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0082-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="red">Rails</span><span class="ash">.</span>application<span class="ash">.</span>routes<span class="ash">.</span>draw <strong><span class="green">do</span></strong>
<span class="mark">  resources <span class="blue1">:microposts</span></span>
  resources <span class="violet">:users</span>
  root <span class="maroon">'users#index'</span>
<strong><span class="green">end</span></strong></pre>
</div>
<figure id="ch02tab03">
<figcaption><p><strong>Table 2.3:</strong> RESTful routes provided by the Microposts resource in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex012">Listing 2.12</a>.</p></figcaption>
<table class="topbot">
<thead>
<tr>
<th class="tab-th"><p class="tab-para">HTTP request</p></th>
<th class="tab-th"><p class="tab-para">URL</p></th>
<th class="tab-th"><p class="tab-para">Action</p></th>
<th class="tab-th"><p class="tab-para">Purpose</p></th>
</tr>
</thead>
<tbody>
<tr>
<td><p class="tab-para"><code>GET</code></p></td>
<td><p class="tab-para">/microposts</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>index</code></span></strong></p></td>
<td><p class="tab-para">page to list all microposts</p></td>
</tr>
<tr>
<td><p class="tab-para"><code>GET</code></p></td>
<td><p class="tab-para">/microposts/1</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>show</code></span></strong></p></td>
<td><p class="tab-para">page to show micropost with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
<tr>
<td><p class="tab-para"><code>GET</code></p></td>
<td><p class="tab-para">/microposts/new</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>new</code></span></strong></p></td>
<td><p class="tab-para">page to make a new micropost</p></td>
</tr>
<tr>
<td><p class="tab-para"><code>POST</code></p></td>
<td><p class="tab-para">/microposts</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>create</code></span></strong></p></td>
<td><p class="tab-para">create a new micropost</p></td>
</tr>
<tr>
<td><p class="tab-para"><code>GET</code></p></td>
<td><p class="tab-para">/microposts/1/edit</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>edit</code></span></strong></p></td>
<td><p class="tab-para">page to edit micropost with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
<tr>
<td><p class="tab-para"><code>PATCH</code></p></td>
<td><p class="tab-para">/microposts/1</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>update</code></span></strong></p></td>
<td><p class="tab-para">update micropost with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
<tr>
<td><p class="tab-para"><code>DELETE</code></p></td>
<td><p class="tab-para">/microposts/1</p></td>
<td><p class="tab-para"><strong><span class="dark-green"><code>destroy</code></span></strong></p></td>
<td><p class="tab-para">delete micropost with id <strong><span class="dark-green"><code>1</code></span></strong></p></td>
</tr>
</tbody>
</table>
</figure>
<p class="indent"><span epub:type="pagebreak" id="page_83"></span>The Microposts controller itself appears in schematic form in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex013">Listing 2.13</a>. Note that, apart from having <strong><span class="dark-green"><code>MicropostsController</code></span></strong> in place of <strong><span class="dark-green"><code>UsersController</code></span></strong>, <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex013">Listing 2.13</a> is <em>identical</em> to the code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex08">Listing 2.8</a>. This is a reflection of the REST architecture that is common to both resources.</p>
<p class="ex-title" id="ch02ex013"><strong>Listing 2.13:</strong> The Microposts controller in schematic form.</p>
<pre class="pre2">app/controllers/microposts_controller.rb</pre>
<p class="codelink"><a id="pf0083-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0083-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">MicropostsController</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationController</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <strong><span class="green">def</span></strong> <span class="blue3">index</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">show</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">new</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">edit</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">create</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

  <strong><span class="green">def</span></strong> <span class="blue3">update</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>

<span epub:type="pagebreak" id="page_84"></span>  <strong><span class="green">def</span></strong> <span class="blue3">destroy</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
    <span class="ash">.</span>
  <strong><span class="green">end</span></strong>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent">To make some actual microposts, we click on New Micropost on the micropost index page (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig012">Figure 2.12</a>). We then enter information at the new microposts page, /microposts/new, as seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig013">Figure 2.13</a>.</p>
<figure id="ch02fig012" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_12.jpg" alt="Image" width="1200" height="921" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_12.jpg">
<figcaption><p><strong>Figure 2.12:</strong> The micropost index page (/microposts).</p></figcaption>
</figure>
<figure id="ch02fig013" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_13.jpg" alt="Image" width="1200" height="922" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_13.jpg">
<figcaption><p><strong>Figure 2.13:</strong> The new micropost page (/microposts/new).</p></figcaption>
</figure>
<p class="indent">At this point, go ahead and create a micropost or two, taking care to make sure that at least one has a <strong><span class="dark-green"><code>user_id</code></span></strong> of <strong><span class="dark-green"><code>1</code></span></strong> to match the id of the first user created in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_2_1">Section 2.2.1</a>. The result should look something like <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig014">Figure 2.14</a>.</p>
<figure id="ch02fig014" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_14.jpg" alt="Image" width="1200" height="923" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_14.jpg">
<figcaption><p><strong>Figure 2.14:</strong> The micropost index page with a couple of posts.<span epub:type="pagebreak" id="page_85"></span></p></figcaption>
</figure>
<section>
<h5 class="h5" id="lev18">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">(For readers who know CSS) Create a new micropost, then use your browser’s HTML inspector to determine the CSS id for the text “Micropost was successfully created.” What happens when you refresh your browser?</p></li>
<li><p class="num">Try to create a micropost with empty content and no user id.</p></li>
<li><p class="num">Try to create a micropost with more than 140 characters of content (say, the first paragraph from the Wikipedia article on Ruby).</p></li>
<li><p class="num">Destroy the microposts from the previous exercises.<span epub:type="pagebreak" id="page_86"></span></p></li>
</ol>
</section>
</section>
<section>
<h4 class="h4" id="sec2_3_2">2.3.2 Putting the <em>Micro</em> in Microposts</h4>
<p class="noindent">Any <em>micro</em>post worthy of the name should have some means of enforcing the rules governing the length of the post. Implementing this constraint in Rails is easy with <em>validations</em>; to accept microposts with at most 140 characters (à la the original design of Twitter), we use a <em>length</em> validation. At this point, you should open the file <strong><span class="dark-green"><code>app/models/micropost.rb</code></span></strong> in your text editor or IDE and fill it with the contents of <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex014">Listing 2.14</a>.</p>
<p class="ex-title" id="ch02ex014"><strong>Listing 2.14:</strong> Constraining microposts to be at most 140 characters.</p>
<pre class="pre2">app/models/micropost.rb</pre>
<p class="codelink"><a id="pf0086-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0086-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">Micropost</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationRecord</span>
<span class="mark">  validates <span class="blue1">:content</span>, <span class="blue1">length</span>: { <span class="blue1">maximum</span>: <span class="ash1">140</span> }</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_87"></span>The code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex014">Listing 2.14</a> may look rather mysterious—we’ll cover validations more thoroughly starting in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch06.xhtml#sec6_2">Section 6.2</a>—but its effects are readily apparent if we go to the new micropost page and enter more than 140 characters for the content of the post. As seen in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig015">Figure 2.15</a>, Rails renders <em>error messages</em> indicating that the micropost’s content is too long. (We’ll learn more about error messages in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_3_3">Section 7.3.3</a>.)</p>
<figure id="ch02fig015" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_15.jpg" alt="Image" width="879" height="676" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_15.jpg">
<figcaption><p><strong>Figure 2.15:</strong> Error messages for a failed micropost creation.</p></figcaption>
</figure>
<section>
<h5 class="h5" id="lev19">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Try to create a micropost with the same long content used in a previous exercise (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_3_1">Section 2.3.1</a>). How has the behavior changed?</p></li>
<li><p class="num">(For readers who know CSS) Use your browser’s HTML inspector to determine the CSS id of the error message produced by the previous exercise.<span epub:type="pagebreak" id="page_88"></span></p></li>
</ol>
</section>
</section>
<section>
<h4 class="h4" id="sec2_3_3">2.3.3 A User <code>has_many</code> Microposts</h4>
<p class="noindent">One of the most powerful features of Rails is the ability to form <em>associations</em> between different data models. In the case of our User model, each user potentially has many microposts. We can express this relationship in code by updating the User and Micropost models as in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex015">Listing 2.15</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex016">Listing 2.16</a>, respectively.</p>
<p class="ex-title" id="ch02ex015"><strong>Listing 2.15:</strong> A user has many microposts.</p>
<pre class="pre2">app/models/user.rb</pre>
<p class="codelink"><a id="pf0088-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0088-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">User</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationRecord</span>
<span class="mark">  has_many <span class="blue1">:microposts</span></span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="ex-title" id="ch02ex016"><strong>Listing 2.16:</strong> A micropost belongs to a user.</p>
<pre class="pre2">app/models/micropost.rb</pre>
<p class="codelink"><a id="pf0088-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0088-02a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">Micropost</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationRecord</span>
<span class="mark">  belongs_to <span class="blue1">:user</span></span>
  validates <span class="violet">:content</span>, <span class="violet">length</span>: { <span class="violet">maximum</span>: <span class="ash">140</span> }
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent">We can visualize the result of this association in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig016">Figure 2.16</a>. Because of the <strong><span class="dark-green"><code>user_id</code></span></strong> column in the <strong><span class="dark-green"><code>microposts</code></span></strong> table, Rails (using Active Record) can infer the microposts associated with each user.</p>
<figure id="ch02fig016" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_16.jpg" alt="Image" width="710" height="104" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_16.jpg">
<figcaption><p><strong>Figure 2.16:</strong> The association between microposts and users.</p></figcaption>
</figure>
<p class="indent">In <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch13.xhtml#ch13">Chapter 13</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch14.xhtml#ch14">Chapter 14</a>, we will use the association of users and microposts both to display all of a user’s microposts and to construct a Twitter-like micropost feed. For now, we can examine the implications of the user–micropost association by using <span epub:type="pagebreak" id="page_89"></span>the <em>console</em>, which is a useful tool for interacting with Rails applications. We first invoke the console with <strong><span class="dark-green"><code>rails console</code></span></strong> at the command line, and then retrieve the first user from the database using <strong><span class="dark-green"><code>User.first</code></span></strong> (putting the results in the variable <strong><span class="dark-green"><code>first_user</code></span></strong>), as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex017">Listing 2.17</a>.<sup><a id="ch02fn8a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn8" class="totri-footnote">8</a></sup> (I include <strong><span class="dark-green"><code>exit</code></span></strong> in the last line just to demonstrate how to exit the console. On most systems, you can also use Ctrl-D for the same purpose.)<sup><a id="ch02fn9a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn9" class="totri-footnote">9</a></sup></p>
<p class="footnote"><a id="ch02fn8" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn8a" class="totri-footnote">8</a>. Your console prompt might be something like <strong><span class="dark-green"><code>2.6.3 :001 &gt;</code></span></strong>, but the examples use <strong><span class="dark-green"><code>&gt;&gt;</code></span></strong> since Ruby versions will vary.</p>
<p class="footnote"><a id="ch02fn9" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn9a" class="totri-footnote">9</a>. As in the case of Ctrl-C, the capital “D” refers to the key on the keyboard, not the capital letter, so you don’t have to hold down the Shift key along with the Ctrl key.</p>
<p class="ex-title" id="ch02ex017"><strong>Listing 2.17:</strong> Investigating the state of the application using the Rails console.</p>
<p class="codelink"><a id="pf0089-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0089-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="green3"><span class="mark">$ rails console</span></span>
<strong><span class="navy">&gt;&gt;</span></strong> first_user <span class="ash">=</span> <span class="red">User</span><span class="ash">.</span>first
   <span class="green">(0.5ms) SELECT sqlite_version(*)</span>
  <span class="green">User Load (0.2ms) SELECT "users".* FROM "users" ORDER BY "users"."id" ASC</span>
  <span class="green">LIMIT ? [["LIMIT", 1]]</span>
 <span class="green">=&gt; #&lt;User id: 1, name: "Michael Hartl", email: "michael@example.org",</span>
 <span class="green">created_at: "2019-08-20 00:39:14", updated_at: "2019-08-20 00:41:24"&gt;</span>
<strong><span class="navy">&gt;&gt;</span></strong> first_user<span class="ash">.</span>microposts
  <span class="green">Micropost Load (3.2ms) SELECT "microposts".* FROM "microposts" WHERE</span>
  <span class="green">"microposts"."user_id" = ? LIMIT ? [["user_id", 1], ["LIMIT", 11]]</span>
 <span class="green">=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Micropost id: 1, content:</span>
 <span class="green">"First micropost!", user_id: 1, created_at: "2019-08-20 02:04:13", updated_at:</span>
 <span class="green">"2019-08-20 02:04:13"&gt;, #&lt;Micropost id: 2, content: "Second micropost",</span>
 <span class="green">user_id: 1, created_at: "2019-08-20 02:04:30", updated_at: "2019-08-20</span>
 <span class="green">02:04:30"&gt;]&gt;</span>
<strong><span class="navy">&gt;&gt;</span></strong> micropost <span class="ash">=</span> first_user<span class="ash">.</span>microposts<span class="ash">.</span>first
  <span class="green">Micropost Load (0.2ms) SELECT "microposts".* FROM "microposts" WHERE</span>
  <span class="green">"microposts"."user_id" = ? ORDER BY "microposts"."id" ASC LIMIT ?</span>
  <span class="green">[["user_id", 1], ["LIMIT", 1]]</span>
 <span class="green">=&gt; #&lt;Micropost id: 1, content: "First micropost!", user_id: 1, created_at:</span>
 <span class="green">"2019-08-20 02:04:13", updated_at: "2019-08-20 02:04:13"&gt;</span>
<strong><span class="navy">&gt;&gt;</span></strong> micropost<span class="ash">.</span>user
 <span class="green">=&gt; #&lt;User id: 1, name: "Michael Hartl", email: "michael@example.org",</span>
 <span class="green">created_at: "2019-08-20 00:39:14", updated_at: "2019-08-20 00:41:24"</span>
<strong><span class="navy">&gt;&gt;</span></strong> <span class="green1">exit</span></pre>
</div>
<p class="noindent">There’s a lot going on in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex017">Listing 2.17</a>, and teasing out the relevant parts is a good exercise in technical sophistication (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#box1_2">Box 1.2</a>). The output includes the actual return <span epub:type="pagebreak" id="page_90"></span>values, which are raw Ruby objects, as well as the structured query language (SQL) code that produced them.</p>
<p class="indent">In addition to retrieving the first user with <strong><span class="dark-green"><code>User.first</code></span></strong>, <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex017">Listing 2.17</a> shows two other things: (1) how to access the first user’s microposts using the code <strong><span class="dark-green"><code>first_user.microposts</code></span></strong>, which automatically returns all the microposts with <strong><span class="dark-green"><code>user_id</code></span></strong> equal to the id of <strong><span class="dark-green"><code>first_user</code></span></strong> (in this case, <strong><span class="dark-green"><code>1</code></span></strong>); and (2) how to return the user corresponding to a particular post using <strong><span class="dark-green"><code>micropost.user</code></span></strong>. We’ll learn much more about the Ruby involved in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex017">Listing 2.17</a> in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#ch04">Chapter 4</a>, and more about the association facilities in Active Record in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch13.xhtml#ch13">Chapter 13</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch14.xhtml#ch14">Chapter 14</a>.</p>
</section>
<section>
<h5 class="h5" id="lev20">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Edit the user show page to display the content of the user’s first micropost. (Use your technical sophistication (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#box1_2">Box 1.2</a>) to guess the syntax based on the other content in the file.) Visit /users/1 to confirm that it worked.</p></li>
<li><p class="num">The code in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex018">Listing 2.18</a> shows how to add a validation for the presence of micropost content to ensure that microposts can’t be blank. Verify that you get the behavior shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig017">Figure 2.17</a>.</p>
<figure id="ch02fig017" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_17.jpg" alt="Image" width="879" height="675" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_17.jpg">
<figcaption><p><strong>Figure 2.17:</strong> The effect of a micropost presence validation.</p></figcaption>
</figure></li>
<li><p class="num">Update <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex019">Listing 2.19</a> by replacing <strong><span class="dark-green"><code>FILL_IN</code></span></strong> with the appropriate code to validate the presence of name and email attributes in the User model (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig018">Figure 2.18</a>).</p></li>
</ol>
<figure id="ch02fig018" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_18.jpg" alt="Image" width="890" height="684" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_18.jpg">
<figcaption><p><strong>Figure 2.18:</strong> The effect of presence validations on the User model.</p></figcaption>
</figure>
<p class="ex-title" id="ch02ex018"><strong>Listing 2.18:</strong> Code to validate the presence of micropost content.</p>
<pre class="pre2">app/models/micropost.rb</pre>
<p class="codelink"><a id="pf0090-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0090-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">Micropost</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationRecord</span>
  belongs_to <span class="violet">:user</span>
  validates <span class="violet">:content</span>, <span class="violet">length</span>: { <span class="violet">maximum</span>: <span class="ash">140</span> },
<span class="blue1"><span class="mark">                      presence</span>: <strong><span class="green3">true</span></strong>
<strong><span class="green">end</span></strong></span></pre>
</div>
<p class="ex-title" id="ch02ex019"><span epub:type="pagebreak" id="page_91"></span><strong>Listing 2.19:</strong> Adding presence validations to the User model.</p>
<pre class="pre2">app/models/user.rb</pre>
<p class="codelink"><a id="pf0091-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0091-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green">class</span></strong> <strong><span class="blue3">User</span></strong> <span class="ash">&lt;</span> <span class="red">ApplicationRecord</span>
  has_many <span class="violet">:microposts</span>
<span class="mark">   validates <span class="red2">FILL_IN</span>, <span class="blue1">presence</span>: <strong><span class="green3">true</span></strong>   <span class="green3"># Replace FILL_IN with the right code.</span>
<span class="mark">   validates <span class="red2">FILL_IN</span>, <span class="blue1">presence</span>: <strong><span class="green3">true</span></strong>   <span class="green3"># Replace FILL_IN with the right code.</span></span>
<strong><span class="green">end</span></strong></span></pre>
</div>
</section>
<h4 class="h4" id="sec2_3_4">2.3.4 Inheritance Hierarchies</h4>
<p class="noindent">We end our discussion of the toy application with a brief description of the controller and model class hierarchies in Rails. This discussion will make more sense if you <span epub:type="pagebreak" id="page_92"></span>have some experience with object-oriented programming (OOP), particularly <em>classes</em>. Don’t worry if it’s confusing for now; we’ll discuss these ideas more thoroughly in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch04.xhtml#sec4_4">Section 4.4</a>.</p>
<p class="indent">We start with the inheritance structure for models. Comparing <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex020">Listing 2.20</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex021">Listing 2.21</a>, we see that both the User model and the Micropost model inherit (via the left angle bracket <strong><span class="dark-green"><code>&lt;</code></span></strong>) from <strong><span class="dark-green"><code>ApplicationRecord</code></span></strong>, which in turn inherits from <strong><span class="dark-green"><code>ActiveRecord::Base</code></span></strong>, which is the base class for models provided by Active Record; a diagram summarizing this relationship appears in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig019">Figure 2.19</a>. By inheriting from <strong><span class="dark-green"><code>ActiveRecord::Base</code></span></strong>, our model objects gain the ability to communicate with the database, treat the database columns as Ruby attributes, and so on.<span epub:type="pagebreak" id="page_93"></span></p>
<figure id="ch02fig019" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_19.jpg" alt="Image" width="607" height="246" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_19.jpg">
<figcaption><p><strong>Figure 2.19:</strong> The inheritance hierarchy for the User and Micropost models.</p></figcaption>
</figure>
<p class="ex-title" id="ch02ex020"><strong>Listing 2.20:</strong> The <strong><span class="dark-green"><code>User</code></span></strong> class, highlighting inheritance.</p>
<pre class="pre2">app/models/user.rb</pre>
<p class="codelink"><a id="pf0093-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0093-01a">Click here to view code image</a></p>
<div class="example">
<pre><strong><span class="green3">class</span></strong> <strong><span class="blue5">User</span></strong> <span class="ash1">&lt;</span> <span class="red2">ApplicationRecord</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
<span class="green"><strong>end</strong></span></pre>
</div>
</section>
<p class="ex-title" id="ch02ex021"><strong>Listing 2.21:</strong> The <strong><span class="dark-green"><code>Micropost</code></span></strong> class, highlighting inheritance.</p>
<pre class="pre2">app/models/micropost.rb</pre>
<p class="codelink"><a id="pf0093-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0093-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="mark"><strong><span class="green3">class</span></strong> <strong><span class="blue5">Micropost</span></strong> <span class="ash1">&lt;</span> <span class="red2">ApplicationRecord</span></span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
<strong><span class="green">end</span></strong>
</pre>
</div>
<p class="indent">The inheritance structure for controllers is essentially the same as that for models. Comparing <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex022">Listing 2.22</a> and <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex023">Listing 2.23</a>, we see that both the Users controller and the Microposts controller inherit from the Application controller. Examining <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex024">Listing 2.24</a>, we see that <strong><span class="dark-green"><code>ApplicationController</code></span></strong> itself inherits from <strong><span class="dark-green"><code>ActionController::Base</code></span></strong>, which is the base class for controllers provided by the Rails library Action Pack. The relationships between these classes are illustrated in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig020">Figure 2.20</a>.<span epub:type="pagebreak" id="page_94"></span></p>
<figure id="ch02fig020" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_20.jpg" alt="Image" width="607" height="246" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_20.jpg">
<figcaption><p><strong>Figure 2.20:</strong> The inheritance hierarchy for the Users and Microposts controllers.</p></figcaption>
</figure>
<p class="ex-title" id="ch02ex022"><strong>Listing 2.22:</strong> The <strong><span class="dark-green"><code>UsersController</code></span></strong> class, highlighting inheritance.</p>
<pre class="pre2">app/controllers/users_controller.rb</pre>
<p class="codelink"><a id="pf0094-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0094-01a">Click here to view code image</a></p>
<div class="example">
<pre><span class="mark"><strong><span class="green3">class</span></strong> <strong><span class="blue5">UsersController</span></strong> <span class="ash1">&lt;</span> <span class="red2">ApplicationController</span></span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="ex-title" id="ch02ex023"><strong>Listing 2.23:</strong> The <strong><span class="dark-green"><code>MicropostsController</code></span></strong> class, highlighting inheritance.</p>
<pre class="pre2">app/controllers/microposts_controller.rb</pre>
<p class="codelink"><a id="pf0094-02" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0094-02a">Click here to view code image</a></p>
<div class="example">
<pre><span class="mark"><strong><span class="green3">class</span></strong> <strong><span class="blue5">MicropostsController</span></strong> <span class="ash1">&lt;</span> <span class="red2">ApplicationController</span></span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="ex-title" id="ch02ex024"><strong>Listing 2.24:</strong> The <strong><span class="dark-green"><code>ApplicationController</code></span></strong> class, highlighting inheritance.</p>
<pre class="pre2">app/controllers/application_controller.rb</pre>
<p class="codelink"><a id="pf0094-03" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0094-03a">Click here to view code image</a></p>
<div class="example">
<pre><span class="mark"><strong><span class="green3">class</span></strong> <strong><span class="blue5">ApplicationController</span></strong> <span class="ash1">&lt;</span> <span class="red2">ActionController</span><span class="ash1">::</span><span class="red2">Base</span></span>
  <span class="ash">.</span>
  <span class="ash">.</span>
  <span class="ash">.</span>
<strong><span class="green">end</span></strong></pre>
</div>
<p class="indent"><span epub:type="pagebreak" id="page_95"></span>As with model inheritance, both the Users and Microposts controllers gain a large amount of functionality by inheriting from a base class (in this case, <strong><span class="dark-green"><code>ActionController::Base</code></span></strong>), including the capability to manipulate model objects, filter inbound HTTP requests, and render views as HTML. Since all Rails controllers inherit from <strong><span class="dark-green"><code>ApplicationController</code></span></strong>, all rules defined in the Application controller automatically apply to every action in the application. For example, in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch09.xhtml#sec9_1">Section 9.1</a> we’ll see how to include helpers for logging in and logging out of all of the sample application’s controllers.</p>
<section>
<h5 class="h5" id="lev21">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">By examining the contents of the Application controller file, find the line that causes <strong><span class="dark-green"><code>ApplicationController</code></span></strong> to inherit from <strong><span class="dark-green"><code>ActionController::Base</code></span></strong>.</p></li>
<li><p class="num">Is there an analogous file containing a line where <strong><span class="dark-green"><code>ApplicationRecord</code></span></strong> inherits from <strong><span class="dark-green"><code>ActiveRecord::Base</code></span></strong>? <em>Hint</em>: It would probably be a file called something like <strong><span class="dark-green"><code>application_record.rb</code></span></strong> in the <strong><span class="dark-green"><code>app/models</code></span></strong> directory.</p></li>
</ol></section>
<section>
<h4 class="h4" id="sec2_3_5">2.3.5 Deploying the Toy App</h4>
<p class="noindent">With the completion of the Microposts resource, now is a good time to push the repository up to GitHub:</p>
<p class="codelink"><a id="pf0095-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0095-01a">Click here to view code image</a></p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git status    <span class="blue"># It's a good habit to check the status before adding</span>
<strong><span class="navy">$</span></strong> git add -A
<strong><span class="navy">$</span></strong> git commit -m <span class="maroon">"Finish toy app"</span>
<strong><span class="navy">$</span></strong> git push</pre>
<p class="noindent">Ordinarily, you should make smaller, more frequent commits, but for the purposes of this chapter a single big commit at the end is fine.</p>
<p class="indent">At this point, you can also deploy the toy app to Heroku as is described in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml#sec1_4">Section 1.4</a>:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> git push heroku</pre>
<p class="noindent"><span epub:type="pagebreak" id="page_96"></span>(This assumes you created the Heroku app in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_1">Section 2.1</a>. Otherwise, you should run <strong><span class="dark-green"><code>heroku create</code></span></strong> and then <strong><span class="dark-green"><code>git push heroku master</code></span></strong>.)</p>
<p class="indent">At this point, visiting the page at Heroku yields an error message, as shown in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig021">Figure 2.21</a>. We can track down the problem by inspecting the Heroku logs:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> heroku logs</pre>
<figure id="ch02fig021" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_21.jpg" alt="Image" width="879" height="675" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_21.jpg">
<figcaption><p><strong>Figure 2.21:</strong> An error page at Heroku.</p></figcaption>
</figure>
<p class="noindent">Scrolling up in the logs, you should see a line that includes something like this:</p>
<p class="codelink"><a id="pf0096-01" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02_images.xhtml#pf0096-01a">Click here to view code image</a></p>
<pre class="pre1">ActionView::Template::Error (PG::UndefinedTable: ERROR: relation "users" does
not exist</pre>
<p class="noindent">This line is a big hint that there is a missing <strong><span class="dark-green"><code>users</code></span></strong> table. Luckily, we learned how to handle that problem way back in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex04">Listing 2.4</a>: All we need to do is run the database migrations (which will create the <strong><span class="dark-green"><code>microposts</code></span></strong> table as well).<span epub:type="pagebreak" id="page_97"></span></p>
<p class="indent">The way to execute this sort of command at Heroku is to prefix the usual Rails command with <strong><span class="dark-green"><code>heroku run</code></span></strong>, like this:</p>
<pre class="pre1"><strong><span class="navy">$</span></strong> heroku run rails db:migrate</pre>
<p class="noindent">This updates the database at Heroku with the user and micropost data models as required. After running the migration, you should be able to use the toy app in production, with a real PostgreSQL database back end (<a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fig022">Figure 2.22</a>).<sup><a id="ch02fn10a" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn10">10</a></sup></p>
<p class="footnote"><a id="ch02fn10" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02fn10a">10</a>. The production database should work without any additional configuration, but in fact some configuration is recommended by the official Heroku documentation. We’ll take care of this detail in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch07.xhtml#sec7_5_3">Section 7.5.3</a>.</p>
<figure id="ch02fig022" class="image-l">
<img src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/fig02_22.jpg" alt="Image" width="879" height="675" data-mfp-src="/library/view/ruby-on-rails/9780136702726/graphics/fig02_22.jpg">
<figcaption><p><strong>Figure 2.22:</strong> Running the toy app in production.</p></figcaption>
</figure>
<p class="indent">Finally, if you completed the exercises in <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#sec2_3_3">Section 2.3.3</a>, you will have to remove the code to display the first user’s micropost to get the app to load properly. In this case, simply delete the offending code, make another commit, and push again to Heroku.<span epub:type="pagebreak" id="page_98"></span></p>
<section>
<h5 class="h5" id="lev22">Exercises</h5>
<p class="noindent">Solutions to the exercises are available to all Rails Tutorial purchasers at <a href="https://www.railstutorial.org/aw-solutions">https://www.railstutorial.org/aw-solutions</a>.</p>
<p class="indent">To see other people’s answers and to record your own, subscribe to the Rails Tutorial course or to the Learn Enough All Access Bundle.</p>
<ol class="num">
<li><p class="num">Create a few users on the production app.</p></li>
<li><p class="num">Create a few production microposts for the first user.</p></li>
<li><p class="num">By trying to create a micropost with content exceeding 140 characters, confirm that the validation from <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#ch02ex014">Listing 2.14</a> works on the production app.</p></li>
</ol>
</section>
<section>
<h3 class="h3" id="sec2_4">2.4 Conclusion</h3>
<p class="noindent">We’ve come now to the end of the high-level overview of a Rails application. The toy app developed in this chapter has several strengths and a host of weaknesses.</p>
<p><strong>Strengths</strong></p>
<p class="bullet">• High-level overview of Rails</p>
<p class="bullet">• Introduction to MVC</p>
<p class="bullet">• First taste of the REST architecture</p>
<p class="bullet">• Beginning data modeling</p>
<p class="bullet">• A live, database-backed web application in production</p>
<p><strong>Weaknesses</strong></p>
<p class="bullet">• No custom layout or styling</p>
<p class="bullet">• No static pages (such as “Home” or “About”)</p>
<p class="bullet">• No user passwords</p>
<p class="bullet">• No user images</p>
<p class="bullet">• No logging in</p>
<p class="bullet">• No security</p>
<p class="bullet">• No automatic user/micropost association<span epub:type="pagebreak" id="page_99"></span></p>
<p class="bullet">• No notion of “following” or “followed”</p>
<p class="bullet">• No micropost feed</p>
<p class="bullet">• No meaningful tests</p>
<p class="bullet">• <strong>No real understanding</strong></p>
<p class="noindent">The rest of this tutorial is dedicated to building on the strengths and eliminating the weaknesses.</p>
<section>
<h4 class="h4" id="sec2_4_1">2.4.1 What We Learned in this Chapter</h4>
<p class="bullet">• Scaffolding automatically creates code to model data and interact with it through the web.</p>
<p class="bullet">• Scaffolding is good for getting started quickly but is bad for understanding.</p>
<p class="bullet">• Rails uses the model-view-controller (MVC) pattern for structuring web applications.</p>
<p class="bullet">• As interpreted by Rails, the REST architecture includes a standard set of URLs and controller actions for interacting with data models.</p>
<p class="bullet">• Rails supports data validations to place constraints on the values of data model attributes.</p>
<p class="bullet">• Rails comes with built-in functions for defining associations between different data models.</p>
<p class="bullet">• We can interact with Rails applications at the command line using the Rails console.<span epub:type="pagebreak" id="page_100"></span></p>
</section>
</section>
</section>
<div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-18" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders">
		
		<li class="copy"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#">Add Highlight</a></li>
		<li class="add-note"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#">
			Add Note
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch01.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">Chapter 1. From Zero to Deploy</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch03.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">Chapter 3. Mostly Static Pages</div>
        </a>
    
  
  </div>

</section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag collapsed slideUp">
        
        
          <p class="usage-data">Find answers on the fly, or master something new. Subscribe today. <a href="https://learning.oreilly.com/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
        

        
        

      </div>

    
    



        
      </div>
      
        

<footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
  <a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" class="icon-up" onclick="window.Appcues.track(&#39;JumpTop_HeronBook&#39;)" style="display: none;"><div class="visuallyhidden">Back to top</div></a>
  <ul class="js-footer-nav">
  
    
    <li><a href="https://learning.oreilly.com/public/support/">Support</a></li>
    
    <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
    
  
  
  </ul>
  <span class="copyright">© 2020 <a href="https://learning.oreilly.com/" target="_blank">O'Reilly Media, Inc</a>.</span>
  
    
    <a href="https://www.oreilly.com/terms/">Terms of Service</a> 
     / 
    
    <a href="https://learning.oreilly.com/privacy">Privacy Policy</a> 
    
    
  
</footer>

      
    
    <script src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(1)" charset="utf-8"></script><script type="text/javascript" id="">(function(){window.medalliaUserIdentifier=document.documentElement.dataset.userUuid;window.medalliaUserName=document.documentElement.dataset.username})();</script>
<script type="text/javascript" id="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/embed.js.download"></script>
    <script src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/saved_resource(2)" charset="utf-8"></script>
  

<div></div><div></div><div class="selection_bubble_root" style="display: none;"></div><div class="annotator-notice"></div><div class="font-flyout" style="top: 201.006px; left: 1194.34px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://learning.oreilly.com/library/view/ruby-on-rails/9780136702726/ch02.xhtml#">Reset</a>
</div>
</div><script type="text/javascript" async="" src="./Chapter 2. A Toy App - Ruby on Rails Tutorial, 6th Edition_files/generic1604331345324.js.download" charset="UTF-8"></script><script type="text/javascript" id="">function forceInputUppercase(a){var b=a.target.selectionStart,c=a.target.selectionEnd;a.target.value=a.target.value.toUpperCase();a.target.setSelectionRange(b,c)}void 0!=document.getElementById("id_promotion")&&null!=document.getElementById("id_promotion")&&document.getElementById("id_promotion").addEventListener("keyup",forceInputUppercase,!1);
void 0!=document.getElementsByName("promotionCode")[0]&&null!=document.getElementsByName("promotionCode")[0]&&document.getElementsByName("promotionCode")[0].addEventListener("keyup",forceInputUppercase,!1);</script><script type="text/javascript" id="">var nonwExpandable=document.querySelectorAll(".orm-ff-NavigationSubnav-headerListItem a, .orm-ff-NavigationView-headerListItem a");nonwExpandable.forEach(function(a,b){b+1!=nonwExpandable.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):b+1==nonwExpandable.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var nonwExpandableFo=document.querySelectorAll(".drop-content li:not(.flyout-parent) a");
nonwExpandableFo.forEach(function(a,b){"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1!=nonwExpandableFo.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1==nonwExpandableFo.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var expandable=document.querySelectorAll(".orm-ff-NavigationSubnav-toggleControls a, .orm-ff-NavigationView-toggleControls a");expandable.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.parentNode.parentNode.parentNode.querySelectorAll(".orm-Button-btnContentWrap span")[0].childNodes[1].textContent+" | "+a.textContent})})});var flyoutLinks=document.querySelectorAll(".flyout a");
flyoutLinks.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.closest("li.flyout-parent").getElementsByTagName("a")[0].textContent+" | "+a.textContent})})});</script><span></span><script type="text/javascript" id="">dataLayer.push({"ld.experiment":void 0,"ld.variation":void 0});</script><div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Size2, sans-serif;"></div></div><script type="text/javascript" id="">dataLayer.push({"ld.experiment":void 0,"ld.variation":void 0});</script></body></html>